<!--
<pre class="Agda"><a id="14" class="Symbol">{-#</a> <a id="18" class="Keyword">OPTIONS</a> <a id="26" class="Pragma">--safe</a> <a id="33" class="Symbol">#-}</a>
<a id="37" class="Keyword">open</a> <a id="42" class="Keyword">import</a> <a id="49" href="Prelude.html" class="Module">Prelude</a>
<a id="57" class="Keyword">open</a> <a id="62" class="Keyword">import</a> <a id="69" href="Hash.html" class="Module">Hash</a>

<a id="75" class="Keyword">open</a> <a id="80" class="Keyword">import</a> <a id="87" href="Protocol.Streamlet.Assumptions.html" class="Module">Protocol.Streamlet.Assumptions</a>

<a id="119" class="Keyword">module</a> <a id="126" href="Protocol.Streamlet.Invariants.Uniqueness.html" class="Module">Protocol.Streamlet.Invariants.Uniqueness</a> <a id="167" class="Symbol">(</a><a id="168" href="Protocol.Streamlet.Invariants.Uniqueness.html#168" class="Bound">⋯</a> <a id="170" class="Symbol">:</a> <a id="172" class="Symbol">_)</a> <a id="175" class="Symbol">(</a><a id="176" class="Keyword">open</a> <a id="181" href="Protocol.Streamlet.Assumptions.html#222" class="Module">Assumptions</a> <a id="193" href="Protocol.Streamlet.Invariants.Uniqueness.html#168" class="Bound">⋯</a><a id="194" class="Symbol">)</a> <a id="196" class="Keyword">where</a>

<a id="203" class="Keyword">open</a> <a id="208" class="Keyword">import</a> <a id="215" href="Protocol.Streamlet.html" class="Module">Protocol.Streamlet</a> <a id="234" href="Protocol.Streamlet.Invariants.Uniqueness.html#168" class="Bound">⋯</a>

<a id="237" class="Keyword">open</a> <a id="242" class="Keyword">import</a> <a id="249" href="Protocol.Streamlet.Invariants.Votes.html" class="Module">Protocol.Streamlet.Invariants.Votes</a> <a id="285" href="Protocol.Streamlet.Invariants.Uniqueness.html#168" class="Bound">⋯</a>
</pre>-->

<pre class="Agda"><a id="UniqueVotes"></a><a id="304" href="Protocol.Streamlet.Invariants.Uniqueness.html#304" class="Function">UniqueVotes</a> <a id="316" class="Symbol">:</a> <a id="318" href="Protocol.Streamlet.Global.Traces.html#966" class="Function">StateProperty</a>
<a id="332" href="Protocol.Streamlet.Invariants.Uniqueness.html#304" class="Function">UniqueVotes</a> <a id="344" href="Protocol.Streamlet.Invariants.Uniqueness.html#344" class="Bound">s</a> <a id="346" class="Symbol">=</a> <a id="348" class="Symbol">∀</a> <a id="350" class="Symbol">{</a><a id="351" href="Protocol.Streamlet.Invariants.Uniqueness.html#351" class="Bound">p</a><a id="352" class="Symbol">}</a> <a id="354" class="Symbol">⦃</a> <a id="356" href="Protocol.Streamlet.Invariants.Uniqueness.html#356" class="Bound">_</a> <a id="358" class="Symbol">:</a> <a id="360" href="Protocol.Streamlet.Assumptions.html#1062" class="Field">Honest</a> <a id="367" href="Protocol.Streamlet.Invariants.Uniqueness.html#351" class="Bound">p</a> <a id="369" class="Symbol">⦄</a> <a id="371" class="Symbol">→</a>
  <a id="375" href="Prelude.InferenceRules.html#44321" class="Function Operator">────────────────────────────────────────</a>
  <a id="418" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a> <a id="425" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="427" href="Data.List.Base.html#1631" class="Function">map</a> <a id="431" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="445" class="Symbol">((</a><a id="447" href="Protocol.Streamlet.Invariants.Uniqueness.html#344" class="Bound">s</a> <a id="449" href="Protocol.Streamlet.Global.State.html#1568" class="Function Operator">＠</a> <a id="451" href="Protocol.Streamlet.Invariants.Uniqueness.html#351" class="Bound">p</a><a id="452" class="Symbol">)</a> <a id="454" class="Symbol">.</a><a id="455" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a><a id="457" class="Symbol">)</a>

<a id="uniqueVotes"></a><a id="460" href="Protocol.Streamlet.Invariants.Uniqueness.html#460" class="Function">uniqueVotes</a> <a id="472" class="Symbol">:</a> <a id="474" href="Prelude.Closures.html#3717" class="Function">Invariant</a> <a id="484" href="Protocol.Streamlet.Invariants.Uniqueness.html#304" class="Function">UniqueVotes</a>
<a id="496" href="Protocol.Streamlet.Invariants.Uniqueness.html#460" class="Function">uniqueVotes</a> <a id="508" class="Symbol">(_</a> <a id="511" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="513" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="518" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="520" class="Symbol">(_</a> <a id="523" href="Prelude.Closures.html#689" class="InductiveConstructor Operator">∎</a><a id="524" class="Symbol">))</a> <a id="527" class="Symbol">{</a><a id="528" href="Protocol.Streamlet.Invariants.Uniqueness.html#528" class="Bound">p</a><a id="529" class="Symbol">}</a>
  <a id="533" class="Keyword">rewrite</a> <a id="541" class="Keyword">let</a> <a id="545" class="Keyword">open</a> <a id="550" href="Protocol.Streamlet.Global.Step.html#3796" class="Module">∣Base∣</a> <a id="557" href="Protocol.Streamlet.Invariants.Uniqueness.html#528" class="Bound">p</a> <a id="559" class="Keyword">in</a> <a id="562" href="Protocol.Streamlet.Global.Step.html#3830" class="Function">lookup✓</a>
  <a id="572" class="Symbol">=</a> <a id="574" href="Data.List.Relation.Unary.AllPairs.Core.html#995" class="InductiveConstructor">[]</a>
<a id="577" href="Protocol.Streamlet.Invariants.Uniqueness.html#460" class="Function">uniqueVotes</a> <a id="589" class="Symbol">{</a><a id="590" href="Protocol.Streamlet.Invariants.Uniqueness.html#590" class="Bound">s′</a><a id="592" class="Symbol">}</a> <a id="594" class="Symbol">(_</a> <a id="597" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="599" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="604" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="606" class="Symbol">(_</a> <a id="609" href="Prelude.Closures.html#830" class="InductiveConstructor Operator">⟨</a> <a id="611" href="Protocol.Streamlet.Invariants.Uniqueness.html#611" class="Bound">s→</a> <a id="614" href="Prelude.Closures.html#830" class="InductiveConstructor Operator">∣</a> <a id="616" href="Protocol.Streamlet.Invariants.Uniqueness.html#616" class="Bound">s</a> <a id="618" href="Prelude.Closures.html#830" class="InductiveConstructor Operator">⟩←—</a> <a id="622" href="Protocol.Streamlet.Invariants.Uniqueness.html#622" class="Bound">tr</a><a id="624" class="Symbol">))</a>
  <a id="629" class="Symbol">{</a><a id="630" href="Protocol.Streamlet.Invariants.Uniqueness.html#630" class="Bound">p</a><a id="631" class="Symbol">}</a> <a id="633" class="Symbol">⦃</a> <a id="635" href="Protocol.Streamlet.Invariants.Uniqueness.html#635" class="Bound">hp</a> <a id="638" class="Symbol">⦄</a>
  <a id="642" class="Keyword">with</a> <a id="647" href="Protocol.Streamlet.Invariants.Uniqueness.html#647" class="Bound">Rs</a> ← <a id="652" href="Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="655" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="660" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="662" href="Protocol.Streamlet.Invariants.Uniqueness.html#622" class="Bound">tr</a>
  <a id="667" class="Keyword">with</a> <a id="672" href="Protocol.Streamlet.Invariants.Uniqueness.html#672" class="Bound">IH</a> ← <a id="677" href="Protocol.Streamlet.Invariants.Uniqueness.html#460" class="Function">uniqueVotes</a> <a id="689" href="Protocol.Streamlet.Invariants.Uniqueness.html#647" class="Bound">Rs</a> <a id="692" class="Symbol">⦃</a> <a id="694" href="Function.Base.html#4736" class="Function">it</a> <a id="697" class="Symbol">⦄</a>
  <a id="701" class="Keyword">with</a> <a id="706" href="Protocol.Streamlet.Invariants.Uniqueness.html#611" class="Bound">s→</a>
<a id="709" class="Symbol">...</a> <a id="713" class="Symbol">|</a> <a id="715" href="Protocol.Streamlet.Global.Step.html#2366" class="InductiveConstructor">Deliver</a>  <a id="724" class="Symbol">{</a><a id="725" class="Argument">env</a> <a id="729" class="Symbol">=</a> <a id="731" href="Protocol.Streamlet.Message.html#919" class="InductiveConstructor Operator">[</a> <a id="733" href="Protocol.Streamlet.Invariants.Uniqueness.html#733" class="Bound">p′</a> <a id="736" href="Protocol.Streamlet.Message.html#919" class="InductiveConstructor Operator">∣</a> <a id="738" href="Protocol.Streamlet.Invariants.Uniqueness.html#738" class="Bound">m′</a> <a id="741" href="Protocol.Streamlet.Message.html#919" class="InductiveConstructor Operator">⟩</a><a id="742" class="Symbol">}</a> <a id="744" href="Protocol.Streamlet.Invariants.Uniqueness.html#744" class="Bound">env∈</a>
  <a id="751" class="Symbol">=</a> <a id="753" href="Protocol.Streamlet.Invariants.Uniqueness.html#794" class="Function">QED</a>
  <a id="759" class="Keyword">where</a>
  <a id="767" class="Keyword">open</a> <a id="772" href="Protocol.Streamlet.Global.Step.html#3985" class="Module">∣Deliver∣</a> <a id="782" class="Bound">p</a> <a id="784" class="Bound">s</a> <a id="786" href="Protocol.Streamlet.Invariants.Uniqueness.html#744" class="Bound">env∈</a>

  <a id="794" href="Protocol.Streamlet.Invariants.Uniqueness.html#794" class="Function">QED</a> <a id="798" class="Symbol">:</a> <a id="800" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a> <a id="807" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="809" href="Data.List.Base.html#1631" class="Function">map</a> <a id="813" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="827" class="Symbol">((</a><a id="829" class="Bound">s′</a> <a id="832" href="Protocol.Streamlet.Global.State.html#1568" class="Function Operator">＠</a> <a id="834" class="Bound">p</a><a id="835" class="Symbol">)</a> <a id="837" class="Symbol">.</a><a id="838" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a><a id="840" class="Symbol">)</a>
  <a id="844" href="Protocol.Streamlet.Invariants.Uniqueness.html#794" class="Function">QED</a> <a id="848" class="Keyword">rewrite</a> <a id="856" href="Protocol.Streamlet.Global.Step.html#4348" class="Function">db≡</a> <a id="860" class="Symbol">=</a> <a id="862" href="Protocol.Streamlet.Invariants.Uniqueness.html#672" class="Bound">IH</a>
<a id="865" class="Symbol">...</a> <a id="869" class="Symbol">|</a> <a id="871" href="Protocol.Streamlet.Global.Step.html#2518" class="InductiveConstructor">AdvanceEpoch</a>
  <a id="886" class="Keyword">rewrite</a> <a id="894" class="Keyword">let</a> <a id="898" class="Keyword">open</a> <a id="903" href="Protocol.Streamlet.Global.Step.html#3883" class="Module">∣AdvanceEpoch∣</a> <a id="918" class="Bound">p</a> <a id="920" class="Bound">s</a> <a id="922" class="Keyword">in</a> <a id="925" href="Protocol.Streamlet.Global.Step.html#3927" class="Function">lookup✓</a>
  <a id="935" class="Symbol">=</a> <a id="937" href="Protocol.Streamlet.Invariants.Uniqueness.html#672" class="Bound">IH</a>
<a id="940" class="Symbol">...</a> <a id="944" class="Symbol">|</a> <a id="946" href="Protocol.Streamlet.Global.Step.html#2625" class="InductiveConstructor">Drop</a> <a id="951" class="Symbol">_</a>
  <a id="955" class="Symbol">=</a> <a id="957" href="Protocol.Streamlet.Invariants.Uniqueness.html#672" class="Bound">IH</a>
<a id="960" class="Symbol">...</a> <a id="964" class="Symbol">|</a> <a id="966" href="Protocol.Streamlet.Global.Step.html#1649" class="InductiveConstructor">LocalStep</a> <a id="976" class="Symbol">{</a><a id="977" class="Argument">p</a> <a id="979" class="Symbol">=</a> <a id="981" href="Protocol.Streamlet.Invariants.Uniqueness.html#981" class="Bound">p′</a><a id="983" class="Symbol">}{</a><a id="985" href="Protocol.Streamlet.Invariants.Uniqueness.html#985" class="Bound">mm</a><a id="987" class="Symbol">}{</a><a id="989" href="Protocol.Streamlet.Invariants.Uniqueness.html#989" class="Bound">ls′</a><a id="992" class="Symbol">}</a> <a id="994" href="Protocol.Streamlet.Invariants.Uniqueness.html#994" class="Bound">ls→</a>
  <a id="1000" class="Symbol">=</a> <a id="1002" href="Protocol.Streamlet.Invariants.Uniqueness.html#1070" class="Function">QED</a>
  <a id="1008" class="Keyword">where</a>
  <a id="1016" class="Keyword">open</a> <a id="1021" href="Protocol.Streamlet.Global.Step.html#4791" class="Module">∣LocalStep∣</a> <a id="1033" class="Bound">p</a> <a id="1035" href="Protocol.Streamlet.Invariants.Uniqueness.html#981" class="Bound">p′</a> <a id="1038" class="Bound">s</a> <a id="1040" href="Protocol.Streamlet.Invariants.Uniqueness.html#985" class="Bound">mm</a> <a id="1043" href="Protocol.Streamlet.Invariants.Uniqueness.html#989" class="Bound">ls′</a>
  <a id="1049" href="Protocol.Streamlet.Invariants.Uniqueness.html#1049" class="Function">≪db</a> <a id="1053" class="Symbol">=</a> <a id="1055" class="Symbol">(</a><a id="1056" class="Bound">s</a> <a id="1058" href="Protocol.Streamlet.Global.State.html#1568" class="Function Operator">＠</a> <a id="1060" class="Bound">p</a><a id="1061" class="Symbol">)</a> <a id="1063" class="Symbol">.</a><a id="1064" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a>

  <a id="1070" href="Protocol.Streamlet.Invariants.Uniqueness.html#1070" class="Function">QED</a> <a id="1074" class="Symbol">:</a> <a id="1076" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a> <a id="1083" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1085" href="Data.List.Base.html#1631" class="Function">map</a> <a id="1089" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="1103" class="Symbol">((</a><a id="1105" class="Bound">s′</a> <a id="1108" href="Protocol.Streamlet.Global.State.html#1568" class="Function Operator">＠</a> <a id="1110" class="Bound">p</a><a id="1111" class="Symbol">)</a> <a id="1113" class="Symbol">.</a><a id="1114" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a><a id="1116" class="Symbol">)</a>
  <a id="1120" href="Protocol.Streamlet.Invariants.Uniqueness.html#1070" class="Function">QED</a> <a id="1124" class="Keyword">with</a> <a id="1129" class="Bound">p</a> <a id="1131" href="Prelude.DecEq.html#123" class="Field Operator">≟</a> <a id="1133" href="Protocol.Streamlet.Invariants.Uniqueness.html#981" class="Bound">p′</a>
  <a id="1138" href="Protocol.Streamlet.Invariants.Uniqueness.html#1070" class="Function">QED</a> <a id="1142" class="Symbol">|</a> <a id="1144" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a> <a id="1147" href="Protocol.Streamlet.Invariants.Uniqueness.html#1147" class="Bound">p≢</a> <a id="1150" class="Keyword">rewrite</a> <a id="1158" href="Protocol.Streamlet.Global.Step.html#5246" class="Function">lookup✖′</a> <a id="1167" href="Protocol.Streamlet.Invariants.Uniqueness.html#1147" class="Bound">p≢</a> <a id="1170" class="Symbol">=</a> <a id="1172" href="Protocol.Streamlet.Invariants.Uniqueness.html#672" class="Bound">IH</a>
  <a id="1177" href="Protocol.Streamlet.Invariants.Uniqueness.html#1070" class="Function">QED</a> <a id="1181" class="Symbol">|</a> <a id="1183" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="1187" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
    <a id="1196" class="Keyword">with</a> <a id="1201" href="Prelude.Init.html#7442" class="InductiveConstructor Operator">⟫</a> <a id="1203" href="Protocol.Streamlet.Invariants.Uniqueness.html#994" class="Bound">ls→</a>
  <a id="1209" href="Protocol.Streamlet.Invariants.Uniqueness.html#1070" class="Function">QED</a> <a id="1213" class="Symbol">|</a> <a id="1215" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="1219" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1224" class="Symbol">|</a> <a id="1226" href="Prelude.Init.html#7442" class="InductiveConstructor Operator">⟫</a> <a id="1228" href="Protocol.Streamlet.Local.Step.html#1314" class="InductiveConstructor">ProposeBlock</a> <a id="1241" class="Symbol">{</a><a id="1242" href="Protocol.Streamlet.Invariants.Uniqueness.html#1242" class="Bound">ch</a><a id="1244" class="Symbol">}</a> <a id="1246" class="Symbol">{</a><a id="1247" href="Protocol.Streamlet.Invariants.Uniqueness.html#1247" class="Bound">txs</a><a id="1250" class="Symbol">}</a> <a id="1252" href="Protocol.Streamlet.Invariants.Uniqueness.html#1252" class="Bound">ready</a> <a id="1258" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1263" class="Symbol">_</a> <a id="1265" class="Symbol">_</a>
    <a id="1271" class="Keyword">rewrite</a> <a id="1279" href="Protocol.Streamlet.Global.Step.html#4963" class="Function">lookup✓</a>
    <a id="1291" class="Symbol">=</a> <a id="1293" href="Data.List.Relation.Unary.All.Properties.html#3353" class="Function">L.All.¬Any⇒All¬</a> <a id="1309" class="Symbol">_</a> <a id="1311" href="Protocol.Streamlet.Invariants.Uniqueness.html#1587" class="Function">SB∉</a> <a id="1315" href="Data.List.Relation.Unary.AllPairs.Core.html#1015" class="InductiveConstructor Operator">∷</a> <a id="1317" href="Protocol.Streamlet.Invariants.Uniqueness.html#672" class="Bound">IH</a>
    <a id="1324" class="Keyword">where</a>
    <a id="1334" class="Keyword">open</a> <a id="1339" href="Protocol.Streamlet.Global.Step.html#3153" class="Module">∣ProposeBlock∣</a> <a id="1354" href="Protocol.Streamlet.Invariants.Uniqueness.html#981" class="Bound">p′</a> <a id="1357" class="Symbol">⦃</a> <a id="1359" class="Bound">hp</a> <a id="1362" class="Symbol">⦄</a> <a id="1364" class="Bound">s</a> <a id="1366" href="Protocol.Streamlet.Invariants.Uniqueness.html#1242" class="Bound">ch</a> <a id="1369" href="Protocol.Streamlet.Invariants.Uniqueness.html#1247" class="Bound">txs</a> <a id="1373" class="Keyword">hiding</a> <a id="1380" class="Symbol">(</a><a id="1381" href="Protocol.Streamlet.Global.Step.html#3352" class="Function">M</a><a id="1382" class="Symbol">;</a> <a id="1384" href="Protocol.Streamlet.Global.Step.html#3371" class="Function">≪db</a><a id="1387" class="Symbol">)</a>
    <a id="1393" href="Protocol.Streamlet.Invariants.Uniqueness.html#1393" class="Function">Mᵖ</a> <a id="1396" class="Symbol">=</a> <a id="1398" href="Protocol.Streamlet.Message.html#321" class="InductiveConstructor">Propose</a> <a id="1406" href="Protocol.Streamlet.Global.Step.html#3330" class="Function">SB</a>
    <a id="1413" href="Protocol.Streamlet.Invariants.Uniqueness.html#1413" class="Function">M</a>  <a id="1416" class="Symbol">=</a> <a id="1418" href="Protocol.Streamlet.Message.html#329" class="InductiveConstructor">Vote</a>    <a id="1426" href="Protocol.Streamlet.Global.Step.html#3330" class="Function">SB</a>

    <a id="1434" href="Protocol.Streamlet.Invariants.Uniqueness.html#1434" class="Function">mp∉</a>   <a id="1440" class="Symbol">:</a> <a id="1442" href="Protocol.Streamlet.Invariants.Uniqueness.html#1393" class="Function">Mᵖ</a> <a id="1445" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="1447" href="Protocol.Streamlet.Invariants.Uniqueness.html#1049" class="Function">≪db</a>
    <a id="1455" href="Protocol.Streamlet.Invariants.Uniqueness.html#1434" class="Function">mp∉</a>   <a id="1461" class="Symbol">=</a> <a id="1463" href="Protocol.Streamlet.Invariants.Votes.html#6462" class="Function">noFutureOwnVotes</a> <a id="1480" href="Protocol.Streamlet.Invariants.Uniqueness.html#647" class="Bound">Rs</a> <a id="1483" class="Symbol">⦃</a> <a id="1485" class="Bound">hp</a> <a id="1488" class="Symbol">⦄</a> <a id="1490" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1495" href="Protocol.Streamlet.Invariants.Uniqueness.html#1252" class="Bound">ready</a> <a id="1501" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

    <a id="1511" href="Protocol.Streamlet.Invariants.Uniqueness.html#1511" class="Function">mv∉</a>   <a id="1517" class="Symbol">:</a> <a id="1519" href="Protocol.Streamlet.Invariants.Uniqueness.html#1413" class="Function">M</a> <a id="1521" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="1523" href="Protocol.Streamlet.Invariants.Uniqueness.html#1049" class="Function">≪db</a>
    <a id="1531" href="Protocol.Streamlet.Invariants.Uniqueness.html#1511" class="Function">mv∉</a>   <a id="1537" class="Symbol">=</a> <a id="1539" href="Protocol.Streamlet.Invariants.Votes.html#6462" class="Function">noFutureOwnVotes</a> <a id="1556" href="Protocol.Streamlet.Invariants.Uniqueness.html#647" class="Bound">Rs</a> <a id="1559" class="Symbol">⦃</a> <a id="1561" class="Bound">hp</a> <a id="1564" class="Symbol">⦄</a> <a id="1566" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1571" href="Protocol.Streamlet.Invariants.Uniqueness.html#1252" class="Bound">ready</a> <a id="1577" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

    <a id="1587" href="Protocol.Streamlet.Invariants.Uniqueness.html#1587" class="Function">SB∉</a> <a id="1591" class="Symbol">:</a> <a id="1593" href="Protocol.Streamlet.Global.Step.html#3330" class="Function">SB</a> <a id="1596" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="1598" href="Data.List.Base.html#1631" class="Function">map</a> <a id="1602" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="1616" href="Protocol.Streamlet.Invariants.Uniqueness.html#1049" class="Function">≪db</a>
    <a id="1624" href="Protocol.Streamlet.Invariants.Uniqueness.html#1587" class="Function">SB∉</a>  <a id="1629" href="Protocol.Streamlet.Invariants.Uniqueness.html#1629" class="Bound">SB∈</a> <a id="1633" class="Keyword">with</a> <a id="1638" href="Data.List.Membership.Propositional.Properties.html#3880" class="Function">L.Mem.∈-map⁻</a> <a id="1651" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="1665" href="Protocol.Streamlet.Invariants.Uniqueness.html#1629" class="Bound">SB∈</a>
    <a id="1673" class="Symbol">...</a> <a id="1677" class="Symbol">|</a> <a id="1679" href="Protocol.Streamlet.Message.html#321" class="InductiveConstructor">Propose</a> <a id="1687" class="Symbol">_</a> <a id="1689" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1691" href="Protocol.Streamlet.Invariants.Uniqueness.html#1691" class="Bound">m∈≪db</a> <a id="1697" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1699" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1704" class="Symbol">=</a> <a id="1706" href="Protocol.Streamlet.Invariants.Uniqueness.html#1434" class="Function">mp∉</a> <a id="1710" href="Protocol.Streamlet.Invariants.Uniqueness.html#1691" class="Bound">m∈≪db</a>
    <a id="1720" class="Symbol">...</a> <a id="1724" class="Symbol">|</a> <a id="1726" href="Protocol.Streamlet.Message.html#329" class="InductiveConstructor">Vote</a> <a id="1731" class="Symbol">_</a> <a id="1733" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1735" href="Protocol.Streamlet.Invariants.Uniqueness.html#1735" class="Bound">m∈≪db</a> <a id="1741" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="1743" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1748" class="Symbol">=</a> <a id="1750" href="Protocol.Streamlet.Invariants.Uniqueness.html#1511" class="Function">mv∉</a> <a id="1754" href="Protocol.Streamlet.Invariants.Uniqueness.html#1735" class="Bound">m∈≪db</a>
  <a id="1762" href="Protocol.Streamlet.Invariants.Uniqueness.html#1070" class="Function">QED</a> <a id="1766" class="Symbol">|</a> <a id="1768" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="1772" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="1777" class="Symbol">|</a> <a id="1779" href="Prelude.Init.html#7442" class="InductiveConstructor Operator">⟫</a> <a id="1781" href="Protocol.Streamlet.Local.Step.html#1710" class="InductiveConstructor">VoteBlock</a> <a id="1791" class="Symbol">{</a><a id="1792" href="Protocol.Streamlet.Invariants.Uniqueness.html#1792" class="Bound">H</a><a id="1793" class="Symbol">}</a> <a id="1795" class="Symbol">{</a><a id="1796" href="Protocol.Streamlet.Invariants.Uniqueness.html#1796" class="Bound">txs</a><a id="1799" class="Symbol">}</a> <a id="1801" class="Symbol">_</a> <a id="1803" href="Protocol.Streamlet.Invariants.Uniqueness.html#1803" class="Bound">sp∉</a> <a id="1807" href="Protocol.Streamlet.Invariants.Uniqueness.html#1807" class="Bound">ready</a> <a id="1813" href="Protocol.Streamlet.Invariants.Uniqueness.html#1813" class="Bound">¬L</a> <a id="1816" class="Symbol">_</a> <a id="1818" class="Symbol">_</a>
    <a id="1824" class="Keyword">rewrite</a> <a id="1832" href="Protocol.Streamlet.Global.Step.html#4963" class="Function">lookup✓</a>
    <a id="1844" class="Symbol">=</a> <a id="1846" href="Data.List.Relation.Unary.All.Properties.html#3353" class="Function">L.All.¬Any⇒All¬</a> <a id="1862" class="Symbol">_</a> <a id="1864" href="Protocol.Streamlet.Invariants.Uniqueness.html#2308" class="Function">sv∉∷</a>
    <a id="1873" href="Data.List.Relation.Unary.AllPairs.Core.html#1015" class="InductiveConstructor Operator">∷</a> <a id="1875" href="Data.List.Relation.Unary.All.Properties.html#3353" class="Function">L.All.¬Any⇒All¬</a> <a id="1891" class="Symbol">_</a> <a id="1893" href="Protocol.Streamlet.Invariants.Uniqueness.html#1803" class="Bound">sp∉</a>
    <a id="1901" href="Data.List.Relation.Unary.AllPairs.Core.html#1015" class="InductiveConstructor Operator">∷</a> <a id="1903" href="Protocol.Streamlet.Invariants.Uniqueness.html#672" class="Bound">IH</a>
    <a id="1910" class="Keyword">where</a>
    <a id="1920" class="Keyword">open</a> <a id="1925" href="Protocol.Streamlet.Global.Step.html#3396" class="Module">∣VoteBlock∣</a> <a id="1937" class="Bound">p</a> <a id="1939" class="Symbol">⦃</a> <a id="1941" class="Bound">hp</a> <a id="1944" class="Symbol">⦄</a> <a id="1946" class="Bound">s</a> <a id="1948" href="Protocol.Streamlet.Invariants.Uniqueness.html#1792" class="Bound">H</a> <a id="1950" href="Protocol.Streamlet.Invariants.Uniqueness.html#1796" class="Bound">txs</a> <a id="1954" class="Keyword">hiding</a> <a id="1961" class="Symbol">(</a><a id="1962" href="Protocol.Streamlet.Global.Step.html#3604" class="Function">≪db</a><a id="1965" class="Symbol">)</a>

    <a id="1972" href="Protocol.Streamlet.Invariants.Uniqueness.html#1972" class="Function">mv∉</a> <a id="1976" class="Symbol">:</a> <a id="1978" href="Protocol.Streamlet.Global.Step.html#3565" class="Function">M</a> <a id="1980" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="1982" href="Protocol.Streamlet.Invariants.Uniqueness.html#1049" class="Function">≪db</a>
    <a id="1990" href="Protocol.Streamlet.Invariants.Uniqueness.html#1972" class="Function">mv∉</a> <a id="1994" class="Symbol">=</a> <a id="1996" href="Protocol.Streamlet.Invariants.Votes.html#6462" class="Function">noFutureOwnVotes</a> <a id="2013" href="Protocol.Streamlet.Invariants.Uniqueness.html#647" class="Bound">Rs</a> <a id="2016" class="Symbol">⦃</a> <a id="2018" class="Bound">hp</a> <a id="2021" class="Symbol">⦄</a> <a id="2023" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2028" href="Protocol.Streamlet.Invariants.Uniqueness.html#1807" class="Bound">ready</a> <a id="2034" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

    <a id="2044" href="Protocol.Streamlet.Invariants.Uniqueness.html#2044" class="Function">mvp∉</a> <a id="2049" class="Symbol">:</a> <a id="2051" href="Protocol.Streamlet.Message.html#321" class="InductiveConstructor">Propose</a> <a id="2059" href="Protocol.Streamlet.Global.Step.html#3521" class="Function">SB</a> <a id="2062" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="2064" href="Protocol.Streamlet.Invariants.Uniqueness.html#1049" class="Function">≪db</a>
    <a id="2072" href="Protocol.Streamlet.Invariants.Uniqueness.html#2044" class="Function">mvp∉</a> <a id="2077" class="Symbol">=</a> <a id="2079" href="Protocol.Streamlet.Invariants.Votes.html#6462" class="Function">noFutureOwnVotes</a> <a id="2096" href="Protocol.Streamlet.Invariants.Uniqueness.html#647" class="Bound">Rs</a> <a id="2099" class="Symbol">⦃</a> <a id="2101" class="Bound">hp</a> <a id="2104" class="Symbol">⦄</a> <a id="2106" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2111" href="Protocol.Streamlet.Invariants.Uniqueness.html#1807" class="Bound">ready</a> <a id="2117" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

    <a id="2127" href="Protocol.Streamlet.Invariants.Uniqueness.html#2127" class="Function">sv∉</a> <a id="2131" class="Symbol">:</a> <a id="2133" href="Protocol.Streamlet.Global.Step.html#3521" class="Function">SB</a> <a id="2136" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="2138" href="Data.List.Base.html#1631" class="Function">map</a> <a id="2142" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="2156" href="Protocol.Streamlet.Invariants.Uniqueness.html#1049" class="Function">≪db</a>
    <a id="2164" href="Protocol.Streamlet.Invariants.Uniqueness.html#2127" class="Function">sv∉</a> <a id="2168" href="Protocol.Streamlet.Invariants.Uniqueness.html#2168" class="Bound">sv∈</a> <a id="2172" class="Keyword">with</a> <a id="2177" href="Data.List.Membership.Propositional.Properties.html#3880" class="Function">L.Mem.∈-map⁻</a> <a id="2190" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="2204" href="Protocol.Streamlet.Invariants.Uniqueness.html#2168" class="Bound">sv∈</a>
    <a id="2212" class="Symbol">...</a> <a id="2216" class="Symbol">|</a> <a id="2218" href="Protocol.Streamlet.Message.html#321" class="InductiveConstructor">Propose</a> <a id="2226" class="Symbol">_</a> <a id="2228" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2230" href="Protocol.Streamlet.Invariants.Uniqueness.html#2230" class="Bound">m∈≪db</a> <a id="2236" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2238" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2243" class="Symbol">=</a> <a id="2245" href="Protocol.Streamlet.Invariants.Uniqueness.html#2044" class="Function">mvp∉</a> <a id="2250" href="Protocol.Streamlet.Invariants.Uniqueness.html#2230" class="Bound">m∈≪db</a>
    <a id="2260" class="Symbol">...</a> <a id="2264" class="Symbol">|</a> <a id="2266" href="Protocol.Streamlet.Message.html#329" class="InductiveConstructor">Vote</a> <a id="2271" class="Symbol">_</a>    <a id="2276" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2278" href="Protocol.Streamlet.Invariants.Uniqueness.html#2278" class="Bound">m∈≪db</a> <a id="2284" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2286" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2291" class="Symbol">=</a> <a id="2293" href="Protocol.Streamlet.Invariants.Uniqueness.html#1972" class="Function">mv∉</a> <a id="2297" href="Protocol.Streamlet.Invariants.Uniqueness.html#2278" class="Bound">m∈≪db</a>

    <a id="2308" href="Protocol.Streamlet.Invariants.Uniqueness.html#2308" class="Function">sv∉∷</a> <a id="2313" class="Symbol">:</a> <a id="2315" href="Protocol.Streamlet.Global.Step.html#3521" class="Function">SB</a> <a id="2318" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="2320" href="Protocol.Streamlet.Global.Step.html#3543" class="Function">SBᵖ</a> <a id="2324" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2326" href="Data.List.Base.html#1631" class="Function">map</a> <a id="2330" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="2344" href="Protocol.Streamlet.Invariants.Uniqueness.html#1049" class="Function">≪db</a>
    <a id="2352" href="Protocol.Streamlet.Invariants.Uniqueness.html#2308" class="Function">sv∉∷</a> <a id="2357" class="Symbol">=</a> <a id="2359" href="Protocol.Streamlet.Invariants.Uniqueness.html#2127" class="Function">sv∉</a> <a id="2363" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="2365" href="Data.List.Relation.Unary.Any.html#1542" class="Function">L.Any.tail</a> <a id="2376" class="Symbol">(</a><a id="2377" href="Protocol.Streamlet.Invariants.Uniqueness.html#1813" class="Bound">¬L</a> <a id="2380" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="2382" href="Relation.Binary.PropositionalEquality.Core.html#1158" class="Function">cong</a> <a id="2387" href="Protocol.Streamlet.Block.html#2305" class="Field Operator">_∙pid</a><a id="2392" class="Symbol">)</a>
  <a id="2396" href="Protocol.Streamlet.Invariants.Uniqueness.html#1070" class="Function">QED</a> <a id="2400" class="Symbol">|</a> <a id="2402" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="2406" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2411" class="Symbol">|</a> <a id="2413" href="Prelude.Init.html#7442" class="InductiveConstructor Operator">⟫</a> <a id="2415" href="Protocol.Streamlet.Local.Step.html#2361" class="InductiveConstructor">RegisterVote</a> <a id="2428" class="Symbol">{</a><a id="2429" href="Protocol.Streamlet.Invariants.Uniqueness.html#2429" class="Bound">sb</a><a id="2431" class="Symbol">}</a> <a id="2433" href="Protocol.Streamlet.Invariants.Uniqueness.html#2433" class="Bound">m∈inbox</a> <a id="2441" href="Protocol.Streamlet.Invariants.Uniqueness.html#2441" class="Bound">sb∉db</a>
    <a id="2451" class="Keyword">rewrite</a> <a id="2459" href="Protocol.Streamlet.Global.Step.html#4963" class="Function">lookup✓</a> <a id="2467" class="Symbol">=</a> <a id="2469" href="Data.List.Relation.Unary.All.Properties.html#3353" class="Function">L.All.¬Any⇒All¬</a> <a id="2485" class="Symbol">_</a> <a id="2487" href="Protocol.Streamlet.Invariants.Uniqueness.html#2441" class="Bound">sb∉db</a> <a id="2493" href="Data.List.Relation.Unary.AllPairs.Core.html#1015" class="InductiveConstructor Operator">∷</a> <a id="2495" href="Protocol.Streamlet.Invariants.Uniqueness.html#672" class="Bound">IH</a>
  <a id="2500" href="Protocol.Streamlet.Invariants.Uniqueness.html#1070" class="Function">QED</a> <a id="2504" class="Symbol">|</a> <a id="2506" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="2510" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2515" class="Symbol">|</a> <a id="2517" href="Prelude.Init.html#7442" class="InductiveConstructor Operator">⟫</a> <a id="2519" href="Protocol.Streamlet.Local.Step.html#2751" class="InductiveConstructor">FinalizeBlock</a> <a id="2533" href="Protocol.Streamlet.Invariants.Uniqueness.html#2533" class="Bound">ch</a> <a id="2536" class="Symbol">_</a> <a id="2538" class="Symbol">_</a> <a id="2540" class="Symbol">_</a>
    <a id="2546" class="Keyword">rewrite</a> <a id="2554" href="Protocol.Streamlet.Global.Step.html#4963" class="Function">lookup✓</a> <a id="2562" class="Symbol">=</a> <a id="2564" href="Protocol.Streamlet.Invariants.Uniqueness.html#672" class="Bound">IH</a>
<a id="2567" class="Symbol">...</a> <a id="2571" class="Symbol">|</a> <a id="2573" href="Protocol.Streamlet.Global.Step.html#2028" class="InductiveConstructor">DishonestLocalStep</a> <a id="2592" class="Symbol">{</a><a id="2593" class="Argument">p</a> <a id="2595" class="Symbol">=</a> <a id="2597" href="Protocol.Streamlet.Invariants.Uniqueness.html#2597" class="Bound">p′</a><a id="2599" class="Symbol">}{</a><a id="2601" href="Protocol.Streamlet.Invariants.Uniqueness.html#2601" class="Bound">mm</a><a id="2603" class="Symbol">}</a> <a id="2605" href="Protocol.Streamlet.Invariants.Uniqueness.html#2605" class="Bound">¬hp′</a> <a id="2610" href="Protocol.Streamlet.Invariants.Uniqueness.html#2610" class="Bound">h⇒m∈</a>
  <a id="2617" class="Symbol">=</a> <a id="2619" href="Relation.Binary.PropositionalEquality.Core.html#1808" class="Function">subst</a> <a id="2625" class="Symbol">(</a><a id="2626" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a> <a id="2633" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="2635" href="Data.List.Base.html#1631" class="Function">map</a> <a id="2639" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a><a id="2652" class="Symbol">)</a> <a id="2654" href="Protocol.Streamlet.Global.Step.html#5539" class="Function">db≡</a> <a id="2658" href="Protocol.Streamlet.Invariants.Uniqueness.html#672" class="Bound">IH</a>
  <a id="2663" class="Keyword">where</a>
  <a id="2671" class="Keyword">open</a> <a id="2676" href="Protocol.Streamlet.Global.Step.html#5375" class="Module">∣DishonestLocalStep∣</a> <a id="2697" class="Bound">p</a> <a id="2699" href="Protocol.Streamlet.Invariants.Uniqueness.html#2597" class="Bound">p′</a> <a id="2702" href="Protocol.Streamlet.Invariants.Uniqueness.html#2605" class="Bound">¬hp′</a> <a id="2707" class="Bound">s</a> <a id="2709" href="Protocol.Streamlet.Invariants.Uniqueness.html#2601" class="Bound">mm</a>
</pre>
## Unique Vote Ids

<pre class="Agda"><a id="UniqueVoteIds"></a><a id="2741" href="Protocol.Streamlet.Invariants.Uniqueness.html#2741" class="Function">UniqueVoteIds</a> <a id="2755" class="Symbol">:</a> <a id="2757" href="Protocol.Streamlet.Global.Traces.html#966" class="Function">StateProperty</a>
<a id="2771" href="Protocol.Streamlet.Invariants.Uniqueness.html#2741" class="Function">UniqueVoteIds</a> <a id="2785" href="Protocol.Streamlet.Invariants.Uniqueness.html#2785" class="Bound">s</a> <a id="2787" class="Symbol">=</a> <a id="2789" class="Symbol">∀</a> <a id="2791" class="Symbol">{</a><a id="2792" href="Protocol.Streamlet.Invariants.Uniqueness.html#2792" class="Bound">p</a> <a id="2794" href="Protocol.Streamlet.Invariants.Uniqueness.html#2794" class="Bound">b</a><a id="2795" class="Symbol">}</a> <a id="2797" class="Symbol">⦃</a> <a id="2799" href="Protocol.Streamlet.Invariants.Uniqueness.html#2799" class="Bound">_</a> <a id="2801" class="Symbol">:</a> <a id="2803" href="Protocol.Streamlet.Assumptions.html#1062" class="Field">Honest</a> <a id="2810" href="Protocol.Streamlet.Invariants.Uniqueness.html#2792" class="Bound">p</a> <a id="2812" class="Symbol">⦄</a> <a id="2814" class="Symbol">→</a>
  <a id="2818" href="Prelude.InferenceRules.html#45257" class="Function Operator">────────────────────────────────</a>
  <a id="2853" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a> <a id="2860" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="2862" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="2870" class="Symbol">((</a><a id="2872" href="Protocol.Streamlet.Invariants.Uniqueness.html#2785" class="Bound">s</a> <a id="2874" href="Protocol.Streamlet.Global.State.html#1568" class="Function Operator">＠</a> <a id="2876" href="Protocol.Streamlet.Invariants.Uniqueness.html#2792" class="Bound">p</a><a id="2877" class="Symbol">)</a> <a id="2879" class="Symbol">.</a><a id="2880" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a><a id="2882" class="Symbol">)</a> <a id="2884" href="Protocol.Streamlet.Invariants.Uniqueness.html#2794" class="Bound">b</a>

<a id="uniqueVoteIds"></a><a id="2887" href="Protocol.Streamlet.Invariants.Uniqueness.html#2887" class="Function">uniqueVoteIds</a> <a id="2901" class="Symbol">:</a> <a id="2903" href="Prelude.Closures.html#3717" class="Function">Invariant</a> <a id="2913" href="Protocol.Streamlet.Invariants.Uniqueness.html#2741" class="Function">UniqueVoteIds</a>
<a id="2927" href="Protocol.Streamlet.Invariants.Uniqueness.html#2887" class="Function">uniqueVoteIds</a> <a id="2941" class="Symbol">(_</a> <a id="2944" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2946" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="2951" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="2953" class="Symbol">(_</a> <a id="2956" href="Prelude.Closures.html#689" class="InductiveConstructor Operator">∎</a><a id="2957" class="Symbol">))</a> <a id="2960" class="Symbol">{</a><a id="2961" href="Protocol.Streamlet.Invariants.Uniqueness.html#2961" class="Bound">p</a><a id="2962" class="Symbol">}</a>
  <a id="2966" class="Keyword">rewrite</a> <a id="2974" class="Keyword">let</a> <a id="2978" class="Keyword">open</a> <a id="2983" href="Protocol.Streamlet.Global.Step.html#3796" class="Module">∣Base∣</a> <a id="2990" href="Protocol.Streamlet.Invariants.Uniqueness.html#2961" class="Bound">p</a> <a id="2992" class="Keyword">in</a> <a id="2995" href="Protocol.Streamlet.Global.Step.html#3830" class="Function">lookup✓</a>
  <a id="3005" class="Symbol">=</a> <a id="3007" href="Data.List.Relation.Unary.AllPairs.Core.html#995" class="InductiveConstructor">[]</a>
<a id="3010" href="Protocol.Streamlet.Invariants.Uniqueness.html#2887" class="Function">uniqueVoteIds</a> <a id="3024" class="Symbol">{</a><a id="3025" href="Protocol.Streamlet.Invariants.Uniqueness.html#3025" class="Bound">s′</a><a id="3027" class="Symbol">}</a> <a id="3029" class="Symbol">(_</a> <a id="3032" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3034" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="3039" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a>  <a id="3042" class="Symbol">(_</a> <a id="3045" href="Prelude.Closures.html#830" class="InductiveConstructor Operator">⟨</a> <a id="3047" href="Protocol.Streamlet.Invariants.Uniqueness.html#3047" class="Bound">s→</a> <a id="3050" href="Prelude.Closures.html#830" class="InductiveConstructor Operator">∣</a> <a id="3052" href="Protocol.Streamlet.Invariants.Uniqueness.html#3052" class="Bound">s</a> <a id="3054" href="Prelude.Closures.html#830" class="InductiveConstructor Operator">⟩←—</a> <a id="3058" href="Protocol.Streamlet.Invariants.Uniqueness.html#3058" class="Bound">tr</a><a id="3060" class="Symbol">))</a>
  <a id="3065" class="Symbol">{</a><a id="3066" href="Protocol.Streamlet.Invariants.Uniqueness.html#3066" class="Bound">p</a><a id="3067" class="Symbol">}{</a><a id="3069" href="Protocol.Streamlet.Invariants.Uniqueness.html#3069" class="Bound">b</a><a id="3070" class="Symbol">}</a> <a id="3072" class="Symbol">⦃</a> <a id="3074" href="Protocol.Streamlet.Invariants.Uniqueness.html#3074" class="Bound">hp</a> <a id="3077" class="Symbol">⦄</a>
  <a id="3081" class="Keyword">with</a> <a id="3086" href="Protocol.Streamlet.Invariants.Uniqueness.html#3086" class="Bound">Rs</a> ← <a id="3091" href="Data.Product.Base.html#1932" class="Function Operator">-,</a> <a id="3094" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="3099" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3101" href="Protocol.Streamlet.Invariants.Uniqueness.html#3058" class="Bound">tr</a>
  <a id="3106" class="Keyword">with</a> <a id="3111" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a> ← <a id="3116" href="Protocol.Streamlet.Invariants.Uniqueness.html#2887" class="Function">uniqueVoteIds</a> <a id="3130" href="Protocol.Streamlet.Invariants.Uniqueness.html#3086" class="Bound">Rs</a> <a id="3133" class="Symbol">{</a><a id="3134" class="Argument">b</a> <a id="3136" class="Symbol">=</a> <a id="3138" href="Protocol.Streamlet.Invariants.Uniqueness.html#3069" class="Bound">b</a><a id="3139" class="Symbol">}</a> <a id="3141" class="Symbol">⦃</a> <a id="3143" href="Function.Base.html#4736" class="Function">it</a> <a id="3146" class="Symbol">⦄</a>
  <a id="3150" class="Keyword">with</a> <a id="3155" href="Protocol.Streamlet.Invariants.Uniqueness.html#3047" class="Bound">s→</a>
<a id="3158" class="Symbol">...</a> <a id="3162" class="Symbol">|</a> <a id="3164" href="Protocol.Streamlet.Global.Step.html#2366" class="InductiveConstructor">Deliver</a> <a id="3172" class="Symbol">{</a><a id="3173" class="Argument">env</a> <a id="3177" class="Symbol">=</a> <a id="3179" href="Protocol.Streamlet.Message.html#919" class="InductiveConstructor Operator">[</a> <a id="3181" href="Protocol.Streamlet.Invariants.Uniqueness.html#3181" class="Bound">p′</a> <a id="3184" href="Protocol.Streamlet.Message.html#919" class="InductiveConstructor Operator">∣</a> <a id="3186" href="Protocol.Streamlet.Invariants.Uniqueness.html#3186" class="Bound">m′</a> <a id="3189" href="Protocol.Streamlet.Message.html#919" class="InductiveConstructor Operator">⟩</a><a id="3190" class="Symbol">}</a> <a id="3192" href="Protocol.Streamlet.Invariants.Uniqueness.html#3192" class="Bound">env∈</a>
  <a id="3199" class="Symbol">=</a> <a id="3201" href="Protocol.Streamlet.Invariants.Uniqueness.html#3242" class="Function">QED</a>
  <a id="3207" class="Keyword">where</a>
  <a id="3215" class="Keyword">open</a> <a id="3220" href="Protocol.Streamlet.Global.Step.html#3985" class="Module">∣Deliver∣</a> <a id="3230" class="Bound">p</a> <a id="3232" class="Bound">s</a> <a id="3234" href="Protocol.Streamlet.Invariants.Uniqueness.html#3192" class="Bound">env∈</a>

  <a id="3242" href="Protocol.Streamlet.Invariants.Uniqueness.html#3242" class="Function">QED</a> <a id="3246" class="Symbol">:</a>  <a id="3249" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a> <a id="3256" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3258" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="3266" class="Symbol">((</a><a id="3268" class="Bound">s′</a> <a id="3271" href="Protocol.Streamlet.Global.State.html#1568" class="Function Operator">＠</a> <a id="3273" class="Bound">p</a><a id="3274" class="Symbol">)</a> <a id="3276" class="Symbol">.</a><a id="3277" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a><a id="3279" class="Symbol">)</a> <a id="3281" class="Bound">b</a>
  <a id="3285" href="Protocol.Streamlet.Invariants.Uniqueness.html#3242" class="Function">QED</a> <a id="3289" class="Keyword">rewrite</a> <a id="3297" href="Protocol.Streamlet.Global.Step.html#4348" class="Function">db≡</a> <a id="3301" class="Symbol">=</a> <a id="3303" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a>
<a id="3306" class="Symbol">...</a> <a id="3310" class="Symbol">|</a> <a id="3312" href="Protocol.Streamlet.Global.Step.html#2518" class="InductiveConstructor">AdvanceEpoch</a>
  <a id="3327" class="Keyword">rewrite</a> <a id="3335" class="Keyword">let</a> <a id="3339" class="Keyword">open</a> <a id="3344" href="Protocol.Streamlet.Global.Step.html#3883" class="Module">∣AdvanceEpoch∣</a> <a id="3359" class="Bound">p</a> <a id="3361" class="Bound">s</a> <a id="3363" class="Keyword">in</a> <a id="3366" href="Protocol.Streamlet.Global.Step.html#3927" class="Function">lookup✓</a>
  <a id="3376" class="Symbol">=</a> <a id="3378" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a>
<a id="3381" class="Symbol">...</a> <a id="3385" class="Symbol">|</a> <a id="3387" href="Protocol.Streamlet.Global.Step.html#2625" class="InductiveConstructor">Drop</a> <a id="3392" href="Protocol.Streamlet.Invariants.Uniqueness.html#3392" class="Bound">env∈</a>
  <a id="3399" class="Symbol">=</a> <a id="3401" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a>
<a id="3404" class="Symbol">...</a> <a id="3408" class="Symbol">|</a> <a id="3410" href="Protocol.Streamlet.Global.Step.html#1649" class="InductiveConstructor">LocalStep</a> <a id="3420" class="Symbol">{</a><a id="3421" class="Argument">p</a> <a id="3423" class="Symbol">=</a> <a id="3425" href="Protocol.Streamlet.Invariants.Uniqueness.html#3425" class="Bound">p′</a><a id="3427" class="Symbol">}{</a><a id="3429" href="Protocol.Streamlet.Invariants.Uniqueness.html#3429" class="Bound">mm</a><a id="3431" class="Symbol">}{</a><a id="3433" href="Protocol.Streamlet.Invariants.Uniqueness.html#3433" class="Bound">ls′</a><a id="3436" class="Symbol">}</a> <a id="3438" href="Protocol.Streamlet.Invariants.Uniqueness.html#3438" class="Bound">ls→</a>
  <a id="3444" class="Symbol">=</a> <a id="3446" href="Protocol.Streamlet.Invariants.Uniqueness.html#3797" class="Function">QED</a>
  <a id="3452" class="Keyword">where</a>
  <a id="3460" class="Keyword">open</a> <a id="3465" href="Protocol.Streamlet.Global.Step.html#4791" class="Module">∣LocalStep∣</a> <a id="3477" class="Bound">p</a> <a id="3479" href="Protocol.Streamlet.Invariants.Uniqueness.html#3425" class="Bound">p′</a> <a id="3482" class="Bound">s</a> <a id="3484" href="Protocol.Streamlet.Invariants.Uniqueness.html#3429" class="Bound">mm</a> <a id="3487" href="Protocol.Streamlet.Invariants.Uniqueness.html#3433" class="Bound">ls′</a>
  <a id="3493" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a> <a id="3497" class="Symbol">=</a> <a id="3499" class="Symbol">(</a><a id="3500" class="Bound">s</a> <a id="3502" href="Protocol.Streamlet.Global.State.html#1568" class="Function Operator">＠</a> <a id="3504" class="Bound">p</a><a id="3505" class="Symbol">)</a> <a id="3507" class="Symbol">.</a><a id="3508" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a>

  <a id="3514" href="Protocol.Streamlet.Invariants.Uniqueness.html#3514" class="Function">voteIds-lemma</a> <a id="3528" class="Symbol">:</a> <a id="3530" class="Symbol">∀</a> <a id="3532" href="Protocol.Streamlet.Invariants.Uniqueness.html#3532" class="Bound">b</a> <a id="3534" href="Protocol.Streamlet.Invariants.Uniqueness.html#3534" class="Bound">p</a> <a id="3536" class="Symbol">{</a><a id="3537" href="Protocol.Streamlet.Invariants.Uniqueness.html#3537" class="Bound">ms</a><a id="3539" class="Symbol">}</a> <a id="3541" class="Symbol">→</a>
    <a id="3547" href="Protocol.Streamlet.Invariants.Uniqueness.html#3532" class="Bound">b</a> <a id="3549" href="Protocol.Streamlet.Block.html#1227" class="InductiveConstructor Operator">signed-by</a> <a id="3559" href="Protocol.Streamlet.Invariants.Uniqueness.html#3534" class="Bound">p</a> <a id="3561" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="3563" href="Data.List.Base.html#1631" class="Function">map</a> <a id="3567" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="3581" href="Protocol.Streamlet.Invariants.Uniqueness.html#3537" class="Bound">ms</a>
    <a id="3588" href="Prelude.InferenceRules.html#13558" class="Function Operator">────────────────────────────────────</a>
    <a id="3629" href="Protocol.Streamlet.Invariants.Uniqueness.html#3534" class="Bound">p</a> <a id="3631" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="3633" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="3641" href="Protocol.Streamlet.Invariants.Uniqueness.html#3537" class="Bound">ms</a> <a id="3644" href="Protocol.Streamlet.Invariants.Uniqueness.html#3532" class="Bound">b</a>
  <a id="3648" href="Protocol.Streamlet.Invariants.Uniqueness.html#3514" class="Function">voteIds-lemma</a> <a id="3662" href="Protocol.Streamlet.Invariants.Uniqueness.html#3662" class="Bound">b</a> <a id="3664" href="Protocol.Streamlet.Invariants.Uniqueness.html#3664" class="Bound">p</a> <a id="3666" class="Symbol">{</a><a id="3667" href="Protocol.Streamlet.Invariants.Uniqueness.html#3667" class="Bound">ms</a><a id="3669" class="Symbol">}</a> <a id="3671" href="Protocol.Streamlet.Invariants.Uniqueness.html#3671" class="Bound">sb∉</a> <a id="3675" href="Protocol.Streamlet.Invariants.Uniqueness.html#3675" class="Bound">p∈</a> <a id="3678" class="Symbol">=</a>
    <a id="3684" class="Keyword">let</a> <a id="3688" href="Protocol.Streamlet.Invariants.Uniqueness.html#3688" class="Bound">m</a> <a id="3690" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3692" href="Protocol.Streamlet.Invariants.Uniqueness.html#3692" class="Bound">m∈</a> <a id="3695" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="3697" href="Protocol.Streamlet.Invariants.Uniqueness.html#3697" class="Bound">eq</a> <a id="3700" class="Symbol">=</a> <a id="3702" href="Protocol.Streamlet.Local.State.html#6732" class="Function">voteIds⁻</a> <a id="3711" class="Symbol">{</a><a id="3712" class="Argument">ms</a> <a id="3715" class="Symbol">=</a> <a id="3717" href="Protocol.Streamlet.Invariants.Uniqueness.html#3667" class="Bound">ms</a><a id="3719" class="Symbol">}</a> <a id="3721" class="Symbol">{</a><a id="3722" class="Argument">b</a> <a id="3724" class="Symbol">=</a> <a id="3726" href="Protocol.Streamlet.Invariants.Uniqueness.html#3662" class="Bound">b</a><a id="3727" class="Symbol">}</a> <a id="3729" href="Protocol.Streamlet.Invariants.Uniqueness.html#3675" class="Bound">p∈</a>
    <a id="3736" class="Keyword">in</a>  <a id="3740" href="Protocol.Streamlet.Invariants.Uniqueness.html#3671" class="Bound">sb∉</a> <a id="3744" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3746" href="Relation.Binary.PropositionalEquality.Core.html#1808" class="Function">subst</a> <a id="3752" class="Symbol">(</a><a id="3753" href="Data.List.Membership.Setoid.html#950" class="Function Operator">_∈</a> <a id="3756" class="Symbol">_)</a> <a id="3759" href="Protocol.Streamlet.Invariants.Uniqueness.html#3697" class="Bound">eq</a> <a id="3762" class="Symbol">(</a><a id="3763" href="Data.List.Membership.Propositional.Properties.html#3766" class="Function">L.Mem.∈-map⁺</a> <a id="3776" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="3790" href="Protocol.Streamlet.Invariants.Uniqueness.html#3692" class="Bound">m∈</a><a id="3792" class="Symbol">)</a>

  <a id="3797" href="Protocol.Streamlet.Invariants.Uniqueness.html#3797" class="Function">QED</a> <a id="3801" class="Symbol">:</a> <a id="3803" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a> <a id="3810" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="3812" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="3820" class="Symbol">((</a><a id="3822" class="Bound">s′</a> <a id="3825" href="Protocol.Streamlet.Global.State.html#1568" class="Function Operator">＠</a> <a id="3827" class="Bound">p</a><a id="3828" class="Symbol">)</a> <a id="3830" class="Symbol">.</a><a id="3831" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a><a id="3833" class="Symbol">)</a> <a id="3835" class="Bound">b</a>
  <a id="3839" href="Protocol.Streamlet.Invariants.Uniqueness.html#3797" class="Function">QED</a>
    <a id="3847" class="Keyword">with</a> <a id="3852" class="Bound">p</a> <a id="3854" href="Prelude.DecEq.html#123" class="Field Operator">≟</a> <a id="3856" href="Protocol.Streamlet.Invariants.Uniqueness.html#3425" class="Bound">p′</a>
  <a id="3861" href="Protocol.Streamlet.Invariants.Uniqueness.html#3797" class="Function">QED</a> <a id="3865" class="Symbol">|</a> <a id="3867" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a>  <a id="3871" href="Protocol.Streamlet.Invariants.Uniqueness.html#3871" class="Bound">p≢</a> <a id="3874" class="Keyword">rewrite</a> <a id="3882" href="Protocol.Streamlet.Global.Step.html#5246" class="Function">lookup✖′</a> <a id="3891" href="Protocol.Streamlet.Invariants.Uniqueness.html#3871" class="Bound">p≢</a> <a id="3894" class="Symbol">=</a> <a id="3896" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a>
  <a id="3901" href="Protocol.Streamlet.Invariants.Uniqueness.html#3797" class="Function">QED</a> <a id="3905" class="Symbol">|</a> <a id="3907" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="3911" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
    <a id="3920" class="Keyword">with</a> <a id="3925" href="Prelude.Init.html#7442" class="InductiveConstructor Operator">⟫</a> <a id="3927" href="Protocol.Streamlet.Invariants.Uniqueness.html#3438" class="Bound">ls→</a>
  <a id="3933" href="Protocol.Streamlet.Invariants.Uniqueness.html#3797" class="Function">QED</a> <a id="3937" class="Symbol">|</a> <a id="3939" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="3943" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="3948" class="Symbol">|</a> <a id="3950" href="Prelude.Init.html#7442" class="InductiveConstructor Operator">⟫</a> <a id="3952" href="Protocol.Streamlet.Local.Step.html#1314" class="InductiveConstructor">ProposeBlock</a> <a id="3965" class="Symbol">{</a><a id="3966" href="Protocol.Streamlet.Invariants.Uniqueness.html#3966" class="Bound">ch</a><a id="3968" class="Symbol">}</a> <a id="3970" class="Symbol">{</a><a id="3971" href="Protocol.Streamlet.Invariants.Uniqueness.html#3971" class="Bound">txs</a><a id="3974" class="Symbol">}</a> <a id="3976" href="Protocol.Streamlet.Invariants.Uniqueness.html#3976" class="Bound">ready</a> <a id="3982" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="3987" class="Symbol">_</a> <a id="3989" class="Symbol">_</a>
    <a id="3995" class="Keyword">rewrite</a> <a id="4003" href="Protocol.Streamlet.Global.Step.html#4963" class="Function">lookup✓</a>
    <a id="4015" class="Symbol">=</a> <a id="4017" href="Protocol.Streamlet.Invariants.Uniqueness.html#4093" class="Function">QED′</a>
    <a id="4026" class="Keyword">where</a>
    <a id="4036" class="Keyword">open</a> <a id="4041" href="Protocol.Streamlet.Global.Step.html#3153" class="Module">∣ProposeBlock∣</a> <a id="4056" href="Protocol.Streamlet.Invariants.Uniqueness.html#3425" class="Bound">p′</a> <a id="4059" class="Symbol">⦃</a> <a id="4061" class="Bound">hp</a> <a id="4064" class="Symbol">⦄</a> <a id="4066" class="Bound">s</a> <a id="4068" href="Protocol.Streamlet.Invariants.Uniqueness.html#3966" class="Bound">ch</a> <a id="4071" href="Protocol.Streamlet.Invariants.Uniqueness.html#3971" class="Bound">txs</a> <a id="4075" class="Keyword">hiding</a> <a id="4082" class="Symbol">(</a><a id="4083" href="Protocol.Streamlet.Global.Step.html#3371" class="Function">≪db</a><a id="4086" class="Symbol">)</a>

    <a id="4093" href="Protocol.Streamlet.Invariants.Uniqueness.html#4093" class="Function">QED′</a> <a id="4098" class="Symbol">:</a> <a id="4100" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a> <a id="4107" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4109" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="4117" class="Symbol">(</a><a id="4118" href="Protocol.Streamlet.Global.Step.html#3352" class="Function">M</a> <a id="4120" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4122" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a><a id="4125" class="Symbol">)</a> <a id="4127" class="Bound">b</a>
    <a id="4133" href="Protocol.Streamlet.Invariants.Uniqueness.html#4093" class="Function">QED′</a>
      <a id="4144" class="Keyword">with</a> <a id="4149" href="Protocol.Streamlet.Global.Step.html#3244" class="Function">B</a> <a id="4151" href="Prelude.DecEq.html#123" class="Field Operator">≟</a> <a id="4153" class="Bound">b</a>
    <a id="4159" href="Protocol.Streamlet.Invariants.Uniqueness.html#4093" class="Function">...</a> <a id="4163" class="Symbol">|</a> <a id="4165" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="4169" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
      <a id="4180" class="Keyword">rewrite</a> <a id="4188" href="Protocol.Streamlet.Local.State.html#5745" class="Function">votes-accept</a> <a id="4201" href="Protocol.Streamlet.Global.Step.html#3352" class="Function">M</a> <a id="4203" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a> <a id="4207" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
      <a id="4218" class="Symbol">=</a> <a id="4220" href="Data.List.Relation.Unary.All.Properties.html#3353" class="Function">L.All.¬Any⇒All¬</a> <a id="4236" class="Symbol">_</a> <a id="4238" href="Protocol.Streamlet.Invariants.Uniqueness.html#4618" class="Function">L∉</a>
      <a id="4247" href="Data.List.Relation.Unary.AllPairs.Core.html#1015" class="InductiveConstructor Operator">∷</a> <a id="4249" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a>
      <a id="4258" class="Keyword">where</a>
      <a id="4270" href="Protocol.Streamlet.Invariants.Uniqueness.html#4270" class="Function">mv∉</a> <a id="4274" class="Symbol">:</a> <a id="4276" href="Protocol.Streamlet.Message.html#329" class="InductiveConstructor">Vote</a> <a id="4281" href="Protocol.Streamlet.Global.Step.html#3330" class="Function">SB</a> <a id="4284" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="4286" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a>
      <a id="4296" href="Protocol.Streamlet.Invariants.Uniqueness.html#4270" class="Function">mv∉</a> <a id="4300" class="Symbol">=</a> <a id="4302" href="Protocol.Streamlet.Invariants.Votes.html#6462" class="Function">noFutureOwnVotes</a> <a id="4319" href="Protocol.Streamlet.Invariants.Uniqueness.html#3086" class="Bound">Rs</a> <a id="4322" class="Symbol">⦃</a> <a id="4324" class="Bound">hp</a> <a id="4327" class="Symbol">⦄</a> <a id="4329" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4334" href="Protocol.Streamlet.Invariants.Uniqueness.html#3976" class="Bound">ready</a> <a id="4340" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

      <a id="4352" href="Protocol.Streamlet.Invariants.Uniqueness.html#4352" class="Function">mp∉</a> <a id="4356" class="Symbol">:</a> <a id="4358" href="Protocol.Streamlet.Global.Step.html#3352" class="Function">M</a> <a id="4360" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="4362" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a>
      <a id="4372" href="Protocol.Streamlet.Invariants.Uniqueness.html#4352" class="Function">mp∉</a> <a id="4376" class="Symbol">=</a> <a id="4378" href="Protocol.Streamlet.Invariants.Votes.html#6462" class="Function">noFutureOwnVotes</a> <a id="4395" href="Protocol.Streamlet.Invariants.Uniqueness.html#3086" class="Bound">Rs</a> <a id="4398" class="Symbol">⦃</a> <a id="4400" class="Bound">hp</a> <a id="4403" class="Symbol">⦄</a> <a id="4405" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4410" href="Protocol.Streamlet.Invariants.Uniqueness.html#3976" class="Bound">ready</a> <a id="4416" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

      <a id="4428" href="Protocol.Streamlet.Invariants.Uniqueness.html#4428" class="Function">SB∉</a> <a id="4432" class="Symbol">:</a> <a id="4434" href="Protocol.Streamlet.Global.Step.html#3330" class="Function">SB</a> <a id="4437" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="4439" href="Data.List.Base.html#1631" class="Function">map</a> <a id="4443" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="4457" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a>
      <a id="4467" href="Protocol.Streamlet.Invariants.Uniqueness.html#4428" class="Function">SB∉</a> <a id="4471" href="Protocol.Streamlet.Invariants.Uniqueness.html#4471" class="Bound">svp∈</a> <a id="4476" class="Keyword">with</a> <a id="4481" href="Data.List.Membership.Propositional.Properties.html#3880" class="Function">L.Mem.∈-map⁻</a> <a id="4494" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="4508" href="Protocol.Streamlet.Invariants.Uniqueness.html#4471" class="Bound">svp∈</a>
      <a id="4519" class="Symbol">...</a> <a id="4523" class="Symbol">|</a> <a id="4525" href="Protocol.Streamlet.Message.html#321" class="InductiveConstructor">Propose</a> <a id="4533" class="Symbol">_</a> <a id="4535" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4537" href="Protocol.Streamlet.Invariants.Uniqueness.html#4537" class="Bound">m∈≪db</a> <a id="4543" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4545" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4550" class="Symbol">=</a> <a id="4552" href="Protocol.Streamlet.Invariants.Uniqueness.html#4352" class="Function">mp∉</a> <a id="4556" href="Protocol.Streamlet.Invariants.Uniqueness.html#4537" class="Bound">m∈≪db</a>
      <a id="4568" class="Symbol">...</a> <a id="4572" class="Symbol">|</a> <a id="4574" href="Protocol.Streamlet.Message.html#329" class="InductiveConstructor">Vote</a>    <a id="4582" class="Symbol">_</a> <a id="4584" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4586" href="Protocol.Streamlet.Invariants.Uniqueness.html#4586" class="Bound">m∈≪db</a> <a id="4592" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4594" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4599" class="Symbol">=</a> <a id="4601" href="Protocol.Streamlet.Invariants.Uniqueness.html#4270" class="Function">mv∉</a> <a id="4605" href="Protocol.Streamlet.Invariants.Uniqueness.html#4586" class="Bound">m∈≪db</a>

      <a id="4618" href="Protocol.Streamlet.Invariants.Uniqueness.html#4618" class="Function">L∉</a> <a id="4621" class="Symbol">:</a> <a id="4623" href="Protocol.Streamlet.Global.Step.html#3221" class="Function">L</a> <a id="4625" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="4627" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="4635" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a> <a id="4639" href="Protocol.Streamlet.Global.Step.html#3244" class="Function">B</a>
      <a id="4647" href="Protocol.Streamlet.Invariants.Uniqueness.html#4618" class="Function">L∉</a> <a id="4650" class="Symbol">=</a> <a id="4652" href="Protocol.Streamlet.Invariants.Uniqueness.html#3514" class="Function">voteIds-lemma</a> <a id="4666" href="Protocol.Streamlet.Global.Step.html#3244" class="Function">B</a> <a id="4668" href="Protocol.Streamlet.Global.Step.html#3221" class="Function">L</a> <a id="4670" href="Protocol.Streamlet.Invariants.Uniqueness.html#4428" class="Function">SB∉</a>
    <a id="4678" href="Protocol.Streamlet.Invariants.Uniqueness.html#4093" class="Function">...</a> <a id="4682" class="Symbol">|</a> <a id="4684" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a> <a id="4687" href="Protocol.Streamlet.Invariants.Uniqueness.html#4687" class="Bound">¬q</a>
      <a id="4696" class="Keyword">rewrite</a> <a id="4704" href="Protocol.Streamlet.Local.State.html#5879" class="Function">votes-reject</a> <a id="4717" href="Protocol.Streamlet.Global.Step.html#3352" class="Function">M</a> <a id="4719" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a> <a id="4723" href="Protocol.Streamlet.Invariants.Uniqueness.html#4687" class="Bound">¬q</a>
      <a id="4732" class="Symbol">=</a> <a id="4734" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a>
  <a id="4739" href="Protocol.Streamlet.Invariants.Uniqueness.html#3797" class="Function">QED</a> <a id="4743" class="Symbol">|</a> <a id="4745" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="4749" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4754" class="Symbol">|</a> <a id="4756" href="Prelude.Init.html#7442" class="InductiveConstructor Operator">⟫</a> <a id="4758" href="Protocol.Streamlet.Local.Step.html#1710" class="InductiveConstructor">VoteBlock</a> <a id="4768" class="Symbol">{</a><a id="4769" href="Protocol.Streamlet.Invariants.Uniqueness.html#4769" class="Bound">H</a><a id="4770" class="Symbol">}</a> <a id="4772" class="Symbol">{</a><a id="4773" href="Protocol.Streamlet.Invariants.Uniqueness.html#4773" class="Bound">txs</a><a id="4776" class="Symbol">}</a> <a id="4778" href="Protocol.Streamlet.Invariants.Uniqueness.html#4778" class="Bound">m∈</a> <a id="4781" href="Protocol.Streamlet.Invariants.Uniqueness.html#4781" class="Bound">sb∉</a> <a id="4785" href="Protocol.Streamlet.Invariants.Uniqueness.html#4785" class="Bound">ready</a> <a id="4791" href="Protocol.Streamlet.Invariants.Uniqueness.html#4791" class="Bound">¬L</a> <a id="4794" class="Symbol">_</a> <a id="4796" class="Symbol">_</a>
    <a id="4802" class="Keyword">rewrite</a> <a id="4810" href="Protocol.Streamlet.Global.Step.html#4963" class="Function">lookup✓</a>
    <a id="4822" class="Symbol">=</a> <a id="4824" href="Protocol.Streamlet.Invariants.Uniqueness.html#4917" class="Function">QED′</a>
    <a id="4833" class="Keyword">where</a>
    <a id="4843" class="Keyword">open</a> <a id="4848" href="Protocol.Streamlet.Global.Step.html#3396" class="Module">∣VoteBlock∣</a> <a id="4860" href="Protocol.Streamlet.Invariants.Uniqueness.html#3425" class="Bound">p′</a> <a id="4863" class="Symbol">⦃</a> <a id="4865" class="Bound">hp</a> <a id="4868" class="Symbol">⦄</a> <a id="4870" class="Bound">s</a> <a id="4872" href="Protocol.Streamlet.Invariants.Uniqueness.html#4769" class="Bound">H</a> <a id="4874" href="Protocol.Streamlet.Invariants.Uniqueness.html#4773" class="Bound">txs</a> <a id="4878" class="Keyword">hiding</a> <a id="4885" class="Symbol">(</a><a id="4886" href="Protocol.Streamlet.Global.Step.html#3604" class="Function">≪db</a><a id="4889" class="Symbol">)</a>
    <a id="4895" href="Protocol.Streamlet.Invariants.Uniqueness.html#4895" class="Function">Mᵖ′</a> <a id="4899" class="Symbol">=</a> <a id="4901" href="Protocol.Streamlet.Message.html#321" class="InductiveConstructor">Propose</a> <a id="4909" href="Protocol.Streamlet.Global.Step.html#3521" class="Function">SB</a>

    <a id="4917" href="Protocol.Streamlet.Invariants.Uniqueness.html#4917" class="Function">QED′</a> <a id="4922" class="Symbol">:</a> <a id="4924" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a> <a id="4931" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="4933" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="4941" class="Symbol">(</a><a id="4942" href="Protocol.Streamlet.Global.Step.html#3565" class="Function">M</a> <a id="4944" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4946" href="Protocol.Streamlet.Global.Step.html#3584" class="Function">Mᵖ</a> <a id="4949" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="4951" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a><a id="4954" class="Symbol">)</a> <a id="4956" class="Bound">b</a>
    <a id="4962" href="Protocol.Streamlet.Invariants.Uniqueness.html#4917" class="Function">QED′</a> <a id="4967" class="Keyword">with</a> <a id="4972" href="Protocol.Streamlet.Global.Step.html#3494" class="Function">B</a> <a id="4974" href="Prelude.DecEq.html#123" class="Field Operator">≟</a> <a id="4976" class="Bound">b</a>
    <a id="4982" href="Protocol.Streamlet.Invariants.Uniqueness.html#4917" class="Function">...</a> <a id="4986" class="Symbol">|</a> <a id="4988" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="4992" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
      <a id="5003" class="Keyword">rewrite</a> <a id="5011" href="Protocol.Streamlet.Local.State.html#5745" class="Function">votes-accept</a> <a id="5024" href="Protocol.Streamlet.Global.Step.html#3565" class="Function">M</a> <a id="5026" class="Symbol">(</a><a id="5027" href="Protocol.Streamlet.Global.Step.html#3584" class="Function">Mᵖ</a> <a id="5030" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5032" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a><a id="5035" class="Symbol">)</a> <a id="5037" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5042" class="Symbol">|</a> <a id="5044" href="Protocol.Streamlet.Local.State.html#5745" class="Function">votes-accept</a> <a id="5057" href="Protocol.Streamlet.Global.Step.html#3584" class="Function">Mᵖ</a> <a id="5060" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a> <a id="5064" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
      <a id="5075" class="Symbol">=</a> <a id="5077" href="Data.List.Relation.Unary.All.Properties.html#3353" class="Function">L.All.¬Any⇒All¬</a> <a id="5093" class="Symbol">_</a> <a id="5095" href="Protocol.Streamlet.Invariants.Uniqueness.html#5609" class="Function">p∉∷</a> <a id="5099" href="Data.List.Relation.Unary.AllPairs.Core.html#1015" class="InductiveConstructor Operator">∷</a> <a id="5101" href="Data.List.Relation.Unary.All.Properties.html#3353" class="Function">L.All.¬Any⇒All¬</a> <a id="5117" class="Symbol">_</a> <a id="5119" href="Protocol.Streamlet.Invariants.Uniqueness.html#5721" class="Function">L∉</a> <a id="5122" href="Data.List.Relation.Unary.AllPairs.Core.html#1015" class="InductiveConstructor Operator">∷</a> <a id="5124" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a>
      <a id="5133" class="Keyword">where</a>
      <a id="5145" href="Protocol.Streamlet.Invariants.Uniqueness.html#5145" class="Function">mv∉</a> <a id="5149" class="Symbol">:</a> <a id="5151" href="Protocol.Streamlet.Global.Step.html#3565" class="Function">M</a> <a id="5153" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="5155" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a>
      <a id="5165" href="Protocol.Streamlet.Invariants.Uniqueness.html#5145" class="Function">mv∉</a> <a id="5169" class="Symbol">=</a> <a id="5171" href="Protocol.Streamlet.Invariants.Votes.html#6462" class="Function">noFutureOwnVotes</a> <a id="5188" href="Protocol.Streamlet.Invariants.Uniqueness.html#3086" class="Bound">Rs</a> <a id="5191" class="Symbol">⦃</a> <a id="5193" class="Bound">hp</a> <a id="5196" class="Symbol">⦄</a> <a id="5198" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5203" href="Protocol.Streamlet.Invariants.Uniqueness.html#4785" class="Bound">ready</a> <a id="5209" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

      <a id="5221" href="Protocol.Streamlet.Invariants.Uniqueness.html#5221" class="Function">mp∉∷</a> <a id="5226" class="Symbol">:</a> <a id="5228" href="Protocol.Streamlet.Global.Step.html#3565" class="Function">M</a> <a id="5230" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="5232" href="Protocol.Streamlet.Global.Step.html#3584" class="Function">Mᵖ</a> <a id="5235" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5237" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a>
      <a id="5247" href="Protocol.Streamlet.Invariants.Uniqueness.html#5221" class="Function">mp∉∷</a> <a id="5252" class="Symbol">(</a><a id="5253" href="Data.List.Relation.Unary.Any.html#1279" class="InductiveConstructor">there</a> <a id="5259" href="Protocol.Streamlet.Invariants.Uniqueness.html#5259" class="Bound">mv∈</a><a id="5262" class="Symbol">)</a> <a id="5264" class="Symbol">=</a> <a id="5266" href="Protocol.Streamlet.Invariants.Uniqueness.html#5145" class="Function">mv∉</a> <a id="5270" href="Protocol.Streamlet.Invariants.Uniqueness.html#5259" class="Bound">mv∈</a>

      <a id="5281" href="Protocol.Streamlet.Invariants.Uniqueness.html#5281" class="Function">mp∉</a> <a id="5285" class="Symbol">:</a> <a id="5287" href="Protocol.Streamlet.Invariants.Uniqueness.html#4895" class="Function">Mᵖ′</a> <a id="5291" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="5293" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a>
      <a id="5303" href="Protocol.Streamlet.Invariants.Uniqueness.html#5281" class="Function">mp∉</a> <a id="5307" class="Symbol">=</a> <a id="5309" href="Protocol.Streamlet.Invariants.Votes.html#6462" class="Function">noFutureOwnVotes</a> <a id="5326" href="Protocol.Streamlet.Invariants.Uniqueness.html#3086" class="Bound">Rs</a> <a id="5329" class="Symbol">⦃</a> <a id="5331" class="Bound">hp</a> <a id="5334" class="Symbol">⦄</a> <a id="5336" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5341" href="Protocol.Streamlet.Invariants.Uniqueness.html#4785" class="Bound">ready</a> <a id="5347" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

      <a id="5359" href="Protocol.Streamlet.Invariants.Uniqueness.html#5359" class="Function">SB∉</a> <a id="5363" class="Symbol">:</a> <a id="5365" href="Protocol.Streamlet.Global.Step.html#3521" class="Function">SB</a> <a id="5368" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="5370" href="Data.List.Base.html#1631" class="Function">map</a> <a id="5374" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="5388" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a>
      <a id="5398" href="Protocol.Streamlet.Invariants.Uniqueness.html#5359" class="Function">SB∉</a> <a id="5402" href="Protocol.Streamlet.Invariants.Uniqueness.html#5402" class="Bound">svp∈</a> <a id="5407" class="Keyword">with</a> <a id="5412" href="Data.List.Membership.Propositional.Properties.html#3880" class="Function">L.Mem.∈-map⁻</a> <a id="5425" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="5439" href="Protocol.Streamlet.Invariants.Uniqueness.html#5402" class="Bound">svp∈</a>
      <a id="5450" class="Symbol">...</a> <a id="5454" class="Symbol">|</a> <a id="5456" href="Protocol.Streamlet.Message.html#321" class="InductiveConstructor">Propose</a> <a id="5464" class="Symbol">_</a> <a id="5466" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5468" href="Protocol.Streamlet.Invariants.Uniqueness.html#5468" class="Bound">m∈≪db</a> <a id="5474" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5476" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5481" class="Symbol">=</a> <a id="5483" href="Protocol.Streamlet.Invariants.Uniqueness.html#5281" class="Function">mp∉</a> <a id="5487" href="Protocol.Streamlet.Invariants.Uniqueness.html#5468" class="Bound">m∈≪db</a>
      <a id="5499" class="Symbol">...</a> <a id="5503" class="Symbol">|</a> <a id="5505" href="Protocol.Streamlet.Message.html#329" class="InductiveConstructor">Vote</a> <a id="5510" class="Symbol">_</a> <a id="5512" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5514" href="Protocol.Streamlet.Invariants.Uniqueness.html#5514" class="Bound">m∈≪db</a> <a id="5520" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5522" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5527" class="Symbol">=</a> <a id="5529" href="Protocol.Streamlet.Invariants.Uniqueness.html#5145" class="Function">mv∉</a> <a id="5533" href="Protocol.Streamlet.Invariants.Uniqueness.html#5514" class="Bound">m∈≪db</a>

      <a id="5546" href="Protocol.Streamlet.Invariants.Uniqueness.html#5546" class="Function">p∉</a> <a id="5549" class="Symbol">:</a> <a id="5551" class="Bound">p</a> <a id="5553" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="5555" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="5563" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a> <a id="5567" href="Protocol.Streamlet.Global.Step.html#3494" class="Function">B</a>
      <a id="5575" href="Protocol.Streamlet.Invariants.Uniqueness.html#5546" class="Function">p∉</a> <a id="5578" class="Symbol">=</a> <a id="5580" href="Protocol.Streamlet.Invariants.Uniqueness.html#3514" class="Function">voteIds-lemma</a> <a id="5594" href="Protocol.Streamlet.Global.Step.html#3494" class="Function">B</a> <a id="5596" class="Bound">p</a> <a id="5598" href="Protocol.Streamlet.Invariants.Uniqueness.html#5359" class="Function">SB∉</a>

      <a id="5609" href="Protocol.Streamlet.Invariants.Uniqueness.html#5609" class="Function">p∉∷</a> <a id="5613" class="Symbol">:</a> <a id="5615" class="Bound">p</a> <a id="5617" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="5619" href="Protocol.Streamlet.Global.Step.html#3471" class="Function">L</a> <a id="5621" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5623" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="5631" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a> <a id="5635" href="Protocol.Streamlet.Global.Step.html#3494" class="Function">B</a>
      <a id="5643" href="Protocol.Streamlet.Invariants.Uniqueness.html#5609" class="Function">p∉∷</a> <a id="5647" class="Symbol">(</a><a id="5648" href="Data.List.Relation.Unary.Any.html#1226" class="InductiveConstructor">here</a> <a id="5653" href="Protocol.Streamlet.Invariants.Uniqueness.html#5653" class="Bound">p≡L</a><a id="5656" class="Symbol">)</a> <a id="5658" class="Symbol">=</a> <a id="5660" href="Data.Empty.html#1050" class="Function">⊥-elim</a> <a id="5667" class="Symbol">(</a><a id="5668" href="Protocol.Streamlet.Invariants.Uniqueness.html#4791" class="Bound">¬L</a> <a id="5671" href="Protocol.Streamlet.Invariants.Uniqueness.html#5653" class="Bound">p≡L</a><a id="5674" class="Symbol">)</a>
      <a id="5682" href="Protocol.Streamlet.Invariants.Uniqueness.html#5609" class="Function">p∉∷</a> <a id="5686" class="Symbol">(</a><a id="5687" href="Data.List.Relation.Unary.Any.html#1279" class="InductiveConstructor">there</a> <a id="5693" href="Protocol.Streamlet.Invariants.Uniqueness.html#5693" class="Bound">p∈</a><a id="5695" class="Symbol">)</a> <a id="5697" class="Symbol">=</a> <a id="5699" href="Data.Empty.html#1050" class="Function">⊥-elim</a> <a id="5706" class="Symbol">(</a><a id="5707" href="Protocol.Streamlet.Invariants.Uniqueness.html#5546" class="Function">p∉</a> <a id="5710" href="Protocol.Streamlet.Invariants.Uniqueness.html#5693" class="Bound">p∈</a><a id="5712" class="Symbol">)</a>

      <a id="5721" href="Protocol.Streamlet.Invariants.Uniqueness.html#5721" class="Function">L∉</a> <a id="5724" class="Symbol">:</a> <a id="5726" href="Protocol.Streamlet.Global.Step.html#3471" class="Function">L</a> <a id="5728" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="5730" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="5738" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a> <a id="5742" href="Protocol.Streamlet.Global.Step.html#3494" class="Function">B</a>
      <a id="5750" href="Protocol.Streamlet.Invariants.Uniqueness.html#5721" class="Function">L∉</a> <a id="5753" class="Symbol">=</a> <a id="5755" href="Protocol.Streamlet.Invariants.Uniqueness.html#3514" class="Function">voteIds-lemma</a> <a id="5769" href="Protocol.Streamlet.Global.Step.html#3494" class="Function">B</a> <a id="5771" href="Protocol.Streamlet.Global.Step.html#3471" class="Function">L</a> <a id="5773" class="Symbol">{</a><a id="5774" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a><a id="5777" class="Symbol">}</a> <a id="5779" href="Protocol.Streamlet.Invariants.Uniqueness.html#4781" class="Bound">sb∉</a>
    <a id="5787" href="Protocol.Streamlet.Invariants.Uniqueness.html#4917" class="Function">...</a> <a id="5791" class="Symbol">|</a> <a id="5793" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a> <a id="5796" href="Protocol.Streamlet.Invariants.Uniqueness.html#5796" class="Bound">¬q</a>
      <a id="5805" class="Keyword">rewrite</a> <a id="5813" href="Protocol.Streamlet.Local.State.html#5879" class="Function">votes-reject</a> <a id="5826" href="Protocol.Streamlet.Global.Step.html#3565" class="Function">M</a> <a id="5828" class="Symbol">(</a><a id="5829" href="Protocol.Streamlet.Global.Step.html#3584" class="Function">Mᵖ</a> <a id="5832" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="5834" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a><a id="5837" class="Symbol">)</a> <a id="5839" href="Protocol.Streamlet.Invariants.Uniqueness.html#5796" class="Bound">¬q</a> <a id="5842" class="Symbol">|</a> <a id="5844" href="Protocol.Streamlet.Local.State.html#5879" class="Function">votes-reject</a> <a id="5857" href="Protocol.Streamlet.Global.Step.html#3584" class="Function">Mᵖ</a> <a id="5860" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a> <a id="5864" href="Protocol.Streamlet.Invariants.Uniqueness.html#5796" class="Bound">¬q</a>
      <a id="5873" class="Symbol">=</a> <a id="5875" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a>
  <a id="5880" href="Protocol.Streamlet.Invariants.Uniqueness.html#3797" class="Function">QED</a> <a id="5884" class="Symbol">|</a> <a id="5886" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="5890" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="5895" class="Symbol">|</a> <a id="5897" href="Prelude.Init.html#7442" class="InductiveConstructor Operator">⟫</a> <a id="5899" href="Protocol.Streamlet.Local.Step.html#2361" class="InductiveConstructor">RegisterVote</a> <a id="5912" class="Symbol">{</a><a id="5913" href="Protocol.Streamlet.Invariants.Uniqueness.html#5913" class="Bound">sb</a><a id="5915" class="Symbol">}</a> <a id="5917" href="Protocol.Streamlet.Invariants.Uniqueness.html#5917" class="Bound">m∈inbox</a> <a id="5925" href="Protocol.Streamlet.Invariants.Uniqueness.html#5925" class="Bound">sb∉db</a>
    <a id="5935" class="Keyword">rewrite</a> <a id="5943" href="Protocol.Streamlet.Global.Step.html#4963" class="Function">lookup✓</a>
    <a id="5955" class="Keyword">with</a> <a id="5960" href="Protocol.Streamlet.Invariants.Uniqueness.html#5913" class="Bound">sb</a> <a id="5963" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="5970" href="Prelude.DecEq.html#123" class="Field Operator">≟</a> <a id="5972" class="Bound">b</a>
  <a id="5976" href="Protocol.Streamlet.Invariants.Uniqueness.html#3797" class="Function">...</a> <a id="5980" class="Symbol">|</a> <a id="5982" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="5986" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
    <a id="5995" class="Keyword">rewrite</a> <a id="6003" href="Protocol.Streamlet.Local.State.html#5745" class="Function">votes-accept</a> <a id="6016" class="Symbol">(</a><a id="6017" href="Protocol.Streamlet.Message.html#329" class="InductiveConstructor">Vote</a> <a id="6022" class="Bound">sb</a><a id="6024" class="Symbol">)</a> <a id="6026" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a> <a id="6030" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
    <a id="6039" class="Symbol">=</a> <a id="6041" href="Data.List.Relation.Unary.All.Properties.html#3353" class="Function">L.All.¬Any⇒All¬</a> <a id="6057" class="Symbol">_</a> <a id="6059" href="Protocol.Streamlet.Invariants.Uniqueness.html#6085" class="Function">p∉</a>
    <a id="6066" href="Data.List.Relation.Unary.AllPairs.Core.html#1015" class="InductiveConstructor Operator">∷</a> <a id="6068" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a>
    <a id="6075" class="Keyword">where</a>
    <a id="6085" href="Protocol.Streamlet.Invariants.Uniqueness.html#6085" class="Function">p∉</a> <a id="6088" class="Symbol">:</a> <a id="6090" class="Symbol">_</a> <a id="6092" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="6094" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="6102" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a> <a id="6106" class="Symbol">(</a><a id="6107" class="Bound">sb</a> <a id="6110" class="Symbol">.</a><a id="6111" href="Protocol.Streamlet.Block.html#1247" class="Field">block</a><a id="6116" class="Symbol">)</a>
    <a id="6122" href="Protocol.Streamlet.Invariants.Uniqueness.html#6085" class="Function">p∉</a> <a id="6125" class="Symbol">=</a> <a id="6127" href="Protocol.Streamlet.Invariants.Uniqueness.html#3514" class="Function">voteIds-lemma</a> <a id="6141" class="Symbol">_</a> <a id="6143" class="Symbol">_</a> <a id="6145" class="Bound">sb∉db</a>
  <a id="6153" href="Protocol.Streamlet.Invariants.Uniqueness.html#3797" class="Function">...</a> <a id="6157" class="Symbol">|</a> <a id="6159" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a> <a id="6162" href="Protocol.Streamlet.Invariants.Uniqueness.html#6162" class="Bound">¬q</a>
    <a id="6169" class="Keyword">rewrite</a> <a id="6177" href="Protocol.Streamlet.Local.State.html#5879" class="Function">votes-reject</a> <a id="6190" class="Symbol">(</a><a id="6191" href="Protocol.Streamlet.Message.html#329" class="InductiveConstructor">Vote</a> <a id="6196" class="Bound">sb</a><a id="6198" class="Symbol">)</a> <a id="6200" href="Protocol.Streamlet.Invariants.Uniqueness.html#3493" class="Function">≪db</a> <a id="6204" href="Protocol.Streamlet.Invariants.Uniqueness.html#6162" class="Bound">¬q</a>
    <a id="6211" class="Symbol">=</a> <a id="6213" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a>
  <a id="6218" href="Protocol.Streamlet.Invariants.Uniqueness.html#3797" class="Function">QED</a> <a id="6222" class="Symbol">|</a> <a id="6224" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="6228" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6233" class="Symbol">|</a> <a id="6235" href="Prelude.Init.html#7442" class="InductiveConstructor Operator">⟫</a> <a id="6237" href="Protocol.Streamlet.Local.Step.html#2751" class="InductiveConstructor">FinalizeBlock</a> <a id="6251" href="Protocol.Streamlet.Invariants.Uniqueness.html#6251" class="Bound">ch</a> <a id="6254" class="Symbol">_</a> <a id="6256" class="Symbol">_</a> <a id="6258" class="Symbol">_</a>
    <a id="6264" class="Keyword">rewrite</a> <a id="6272" href="Protocol.Streamlet.Global.Step.html#4963" class="Function">lookup✓</a>
    <a id="6284" class="Symbol">=</a> <a id="6286" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a>
<a id="6289" class="Symbol">...</a> <a id="6293" class="Symbol">|</a> <a id="6295" href="Protocol.Streamlet.Global.Step.html#2028" class="InductiveConstructor">DishonestLocalStep</a> <a id="6314" class="Symbol">{</a><a id="6315" class="Argument">p</a> <a id="6317" class="Symbol">=</a> <a id="6319" href="Protocol.Streamlet.Invariants.Uniqueness.html#6319" class="Bound">p′</a><a id="6321" class="Symbol">}{</a><a id="6323" href="Protocol.Streamlet.Invariants.Uniqueness.html#6323" class="Bound">mm</a><a id="6325" class="Symbol">}</a> <a id="6327" href="Protocol.Streamlet.Invariants.Uniqueness.html#6327" class="Bound">¬hp′</a> <a id="6332" class="Symbol">_</a>
  <a id="6336" class="Symbol">=</a> <a id="6338" href="Relation.Binary.PropositionalEquality.Core.html#1808" class="Function">subst</a> <a id="6344" class="Symbol">(λ</a> <a id="6347" href="Protocol.Streamlet.Invariants.Uniqueness.html#6347" class="Bound">◆</a> <a id="6349" class="Symbol">→</a> <a id="6351" href="Data.List.Relation.Unary.Unique.Setoid.html#785" class="Datatype">Unique</a> <a id="6358" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6360" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="6368" href="Protocol.Streamlet.Invariants.Uniqueness.html#6347" class="Bound">◆</a> <a id="6370" class="Bound">b</a><a id="6371" class="Symbol">)</a> <a id="6373" href="Protocol.Streamlet.Global.Step.html#5539" class="Function">db≡</a> <a id="6377" href="Protocol.Streamlet.Invariants.Uniqueness.html#3111" class="Bound">IH</a>
  <a id="6382" class="Keyword">where</a>
  <a id="6390" class="Keyword">open</a> <a id="6395" href="Protocol.Streamlet.Global.Step.html#5375" class="Module">∣DishonestLocalStep∣</a> <a id="6416" class="Bound">p</a> <a id="6418" href="Protocol.Streamlet.Invariants.Uniqueness.html#6319" class="Bound">p′</a> <a id="6421" href="Protocol.Streamlet.Invariants.Uniqueness.html#6327" class="Bound">¬hp′</a> <a id="6426" class="Bound">s</a> <a id="6428" href="Protocol.Streamlet.Invariants.Uniqueness.html#6323" class="Bound">mm</a>
</pre>