<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Protocol.Streamlet.Local.State</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="Agda.css" />
</head>
<body>
<h1 id="local-state-from-the-view-of-a-single-node.">Local state from
the view of a single node.</h1>
<!--
<pre class="Agda"><a id="62" class="Symbol">{-#</a> <a id="66" class="Keyword">OPTIONS</a> <a id="74" class="Pragma">--safe</a> <a id="81" class="Symbol">#-}</a>
<a id="85" class="Keyword">open</a> <a id="90" class="Keyword">import</a> <a id="97" href="Prelude.html" class="Module">Prelude</a>
<a id="105" class="Keyword">open</a> <a id="110" class="Keyword">import</a> <a id="117" href="Hash.html" class="Module">Hash</a>

<a id="123" class="Keyword">open</a> <a id="128" class="Keyword">import</a> <a id="135" href="Protocol.Streamlet.Base.html" class="Module">Protocol.Streamlet.Base</a>
<a id="159" class="Keyword">open</a> <a id="164" class="Keyword">import</a> <a id="171" href="Protocol.Streamlet.Assumptions.html" class="Module">Protocol.Streamlet.Assumptions</a>

<a id="203" class="Keyword">module</a> <a id="210" href="Protocol.Streamlet.Local.State.html" class="Module">Protocol.Streamlet.Local.State</a> <a id="241" class="Symbol">(</a><a id="242" href="Protocol.Streamlet.Local.State.html#242" class="Bound">⋯</a> <a id="244" class="Symbol">:</a> <a id="246" class="Symbol">_)</a> <a id="249" class="Symbol">(</a><a id="250" class="Keyword">open</a> <a id="255" href="Protocol.Streamlet.Assumptions.html#222" class="Module">Assumptions</a> <a id="267" href="Protocol.Streamlet.Local.State.html#242" class="Bound">⋯</a><a id="268" class="Symbol">)</a> <a id="270" class="Keyword">where</a>

<a id="277" class="Keyword">open</a> <a id="282" class="Keyword">import</a> <a id="289" href="Protocol.Streamlet.Block.html" class="Module">Protocol.Streamlet.Block</a> <a id="314" href="Protocol.Streamlet.Local.State.html#242" class="Bound">⋯</a>
<a id="316" class="Keyword">open</a> <a id="321" class="Keyword">import</a> <a id="328" href="Protocol.Streamlet.Message.html" class="Module">Protocol.Streamlet.Message</a> <a id="355" href="Protocol.Streamlet.Local.State.html#242" class="Bound">⋯</a>
<a id="357" class="Keyword">open</a> <a id="362" class="Keyword">import</a> <a id="369" href="Protocol.Streamlet.Local.Chain.html" class="Module">Protocol.Streamlet.Local.Chain</a> <a id="400" href="Protocol.Streamlet.Local.State.html#242" class="Bound">⋯</a>
</pre>-->
Each node records whether it can proposed or voted in the current epoch:
<pre class="Agda"><a id="492" class="Keyword">data</a> <a id="Phase"></a><a id="497" href="Protocol.Streamlet.Local.State.html#497" class="Datatype">Phase</a> <a id="503" class="Symbol">:</a> <a id="505" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="510" class="Keyword">where</a>
  <a id="Phase.Ready"></a><a id="518" href="Protocol.Streamlet.Local.State.html#518" class="InductiveConstructor">Ready</a> <a id="Phase.Voted"></a><a id="524" href="Protocol.Streamlet.Local.State.html#524" class="InductiveConstructor">Voted</a> <a id="530" class="Symbol">:</a> <a id="532" href="Protocol.Streamlet.Local.State.html#497" class="Datatype">Phase</a>
</pre>
<!--
<pre class="Agda"><a id="555" class="Keyword">instance</a>
  <a id="DecEq-Phase"></a><a id="566" href="Protocol.Streamlet.Local.State.html#566" class="Function">DecEq-Phase</a> <a id="578" class="Symbol">:</a> <a id="580" href="Prelude.DecEq.html#85" class="Record">DecEq</a> <a id="586" href="Protocol.Streamlet.Local.State.html#497" class="Datatype">Phase</a>
  <a id="594" href="Protocol.Streamlet.Local.State.html#566" class="Function">DecEq-Phase</a> <a id="606" class="Symbol">.</a><a id="607" href="Prelude.DecEq.html#123" class="Field Operator">_≟_</a> <a id="611" class="Symbol">=</a> <a id="613" class="Symbol">λ</a> <a id="615" class="Keyword">where</a>
    <a id="625" href="Protocol.Streamlet.Local.State.html#518" class="InductiveConstructor">Ready</a> <a id="631" href="Protocol.Streamlet.Local.State.html#518" class="InductiveConstructor">Ready</a> <a id="637" class="Symbol">→</a> <a id="639" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="643" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
    <a id="652" href="Protocol.Streamlet.Local.State.html#518" class="InductiveConstructor">Ready</a> <a id="658" href="Protocol.Streamlet.Local.State.html#524" class="InductiveConstructor">Voted</a> <a id="664" class="Symbol">→</a> <a id="666" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a> <a id="669" class="Symbol">λ</a> <a id="671" class="Symbol">()</a>
    <a id="678" href="Protocol.Streamlet.Local.State.html#524" class="InductiveConstructor">Voted</a> <a id="684" href="Protocol.Streamlet.Local.State.html#518" class="InductiveConstructor">Ready</a> <a id="690" class="Symbol">→</a> <a id="692" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a> <a id="695" class="Symbol">λ</a> <a id="697" class="Symbol">()</a>
    <a id="704" href="Protocol.Streamlet.Local.State.html#524" class="InductiveConstructor">Voted</a> <a id="710" href="Protocol.Streamlet.Local.State.html#524" class="InductiveConstructor">Voted</a> <a id="716" class="Symbol">→</a> <a id="718" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="722" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
</pre>-->
<p>Furthermore, the local state stores a database of blocks and votes,
an inbox for unread messages, and the current finalized chain.</p>
<pre class="Agda"><a id="876" class="Keyword">record</a> <a id="LocalState"></a><a id="883" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a> <a id="894" class="Symbol">:</a> <a id="896" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="901" class="Keyword">where</a>
  <a id="909" class="Keyword">constructor</a> <a id="⦅_,_,_,_⦆"></a><a id="921" href="Protocol.Streamlet.Local.State.html#921" class="InductiveConstructor Operator">⦅_,_,_,_⦆</a>
  <a id="933" class="Keyword">field</a> <a id="LocalState.phase"></a><a id="939" href="Protocol.Streamlet.Local.State.html#939" class="Field">phase</a> <a id="945" class="Symbol">:</a> <a id="947" href="Protocol.Streamlet.Local.State.html#497" class="Datatype">Phase</a>
        <a id="LocalState.db"></a><a id="961" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a>    <a id="967" class="Symbol">:</a> <a id="969" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="974" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a>
        <a id="LocalState.inbox"></a><a id="990" href="Protocol.Streamlet.Local.State.html#990" class="Field">inbox</a> <a id="996" class="Symbol">:</a> <a id="998" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1003" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a>
        <a id="LocalState.final"></a><a id="1019" href="Protocol.Streamlet.Local.State.html#1019" class="Field">final</a> <a id="1025" class="Symbol">:</a> <a id="1027" href="Protocol.Streamlet.Local.Chain.html#525" class="Function">Chain</a>
</pre>
<!--
<pre class="Agda"><a id="1050" class="Keyword">open</a> <a id="1055" href="Protocol.Streamlet.Local.State.html#883" class="Module">LocalState</a> <a id="1066" class="Keyword">public</a>

<a id="1074" class="Keyword">variable</a> <a id="1083" href="Protocol.Streamlet.Local.State.html#1083" class="Generalizable">ls</a> <a id="1086" href="Protocol.Streamlet.Local.State.html#1086" class="Generalizable">ls′</a> <a id="1090" href="Protocol.Streamlet.Local.State.html#1090" class="Generalizable">ls″</a> <a id="1094" class="Symbol">:</a> <a id="1096" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a>
</pre>-->
The initial local state is the empty one:
<pre class="Agda"><a id="initLocalState"></a><a id="1166" href="Protocol.Streamlet.Local.State.html#1166" class="Function">initLocalState</a> <a id="1181" class="Symbol">:</a> <a id="1183" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a>
<a id="1194" href="Protocol.Streamlet.Local.State.html#1166" class="Function">initLocalState</a> <a id="1209" class="Symbol">=</a> <a id="1211" href="Protocol.Streamlet.Local.State.html#921" class="InductiveConstructor Operator">⦅</a> <a id="1213" href="Protocol.Streamlet.Local.State.html#518" class="InductiveConstructor">Ready</a> <a id="1219" href="Protocol.Streamlet.Local.State.html#921" class="InductiveConstructor Operator">,</a> <a id="1221" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1224" href="Protocol.Streamlet.Local.State.html#921" class="InductiveConstructor Operator">,</a> <a id="1226" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="1229" href="Protocol.Streamlet.Local.State.html#921" class="InductiveConstructor Operator">,</a> <a id="1231" href="Protocol.Streamlet.Local.Chain.html#736" class="Function">genesisChain</a> <a id="1244" href="Protocol.Streamlet.Local.State.html#921" class="InductiveConstructor Operator">⦆</a>
</pre>
<!--
<pre class="Agda"><a id="1263" class="Keyword">instance</a>
  <a id="Def-LocalState"></a><a id="1274" href="Protocol.Streamlet.Local.State.html#1274" class="Function">Def-LocalState</a>  <a id="1290" class="Symbol">=</a> <a id="1292" href="Prelude.Default.html#123" class="Record">Default</a> <a id="1300" class="Symbol">_</a> <a id="1302" href="Function.Base.html#4486" class="Function Operator">∋</a> <a id="1304" class="Symbol">λ</a> <a id="1306" class="Keyword">where</a> <a id="1312" class="Symbol">.</a><a id="1313" href="Prelude.Default.html#163" class="Field">def</a> <a id="1317" class="Symbol">→</a> <a id="1319" href="Protocol.Streamlet.Local.State.html#1166" class="Function">initLocalState</a>
  <a id="Init-LocalState"></a><a id="1336" href="Protocol.Streamlet.Local.State.html#1336" class="Function">Init-LocalState</a> <a id="1352" class="Symbol">=</a> <a id="1354" href="Prelude.Initial.html#87" class="Record">HasInitial</a> <a id="1365" class="Symbol">_</a> <a id="1367" href="Function.Base.html#4486" class="Function Operator">∋</a> <a id="1369" class="Symbol">λ</a> <a id="1371" class="Keyword">where</a> <a id="1377" class="Symbol">.</a><a id="1378" href="Prelude.Initial.html#141" class="Field">Initial</a> <a id="1386" class="Symbol">→</a> <a id="1388" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">_≡</a> <a id="1391" href="Protocol.Streamlet.Local.State.html#1166" class="Function">initLocalState</a>
</pre>-->
<h2 id="chains-contained-within-messages">Chains contained within
messages</h2>
<p>We define different Predicates on chains wrt to lists of
messages.</p>
<h3 id="chain-membership">Chain membership</h3>
<p>The following predicate indicates that the chain has been “seen” (i.
e. it is in the database).</p>
<pre class="Agda"><a id="1647" class="Keyword">data</a> <a id="_chain-∈_"></a><a id="1652" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">_chain-∈_</a> <a id="1662" class="Symbol">:</a> <a id="1664" href="Protocol.Streamlet.Local.Chain.html#525" class="Function">Chain</a> <a id="1670" class="Symbol">→</a> <a id="1672" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="1677" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a> <a id="1685" class="Symbol">→</a> <a id="1687" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1692" class="Keyword">where</a>
  <a id="_chain-∈_.[]"></a><a id="1700" href="Protocol.Streamlet.Local.State.html#1700" class="InductiveConstructor">[]</a> <a id="1703" class="Symbol">:</a>
      <a id="1711" href="Prelude.InferenceRules.html#46310" class="Function Operator">───────────────────────</a>
      <a id="1741" href="Protocol.Streamlet.Local.Chain.html#736" class="Function">genesisChain</a> <a id="1754" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="1762" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>

  <a id="_chain-∈_._∷_⊣_"></a><a id="1768" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">_∷_⊣_</a> <a id="1774" class="Symbol">:</a>
    <a id="1780" class="Symbol">∀</a> <a id="1782" class="Symbol">(</a><a id="1783" href="Protocol.Streamlet.Local.State.html#1783" class="Bound">m∈</a> <a id="1786" class="Symbol">:</a> <a id="1788" href="Prelude.Anyable.html#184" class="Field">Any</a> <a id="1792" class="Symbol">((</a><a id="1794" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="1796" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡_</a><a id="1798" class="Symbol">)</a> <a id="1800" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="1802" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">_∙block</a><a id="1809" class="Symbol">)</a> <a id="1811" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="1813" class="Symbol">)</a> <a id="1815" class="Symbol">→</a>
    <a id="1821" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="1823" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="1826" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="1834" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
    <a id="1841" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="1843" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="1845" href="Protocol.Streamlet.Local.Chain.html#1024" class="Record Operator">-connects-to-</a> <a id="1859" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
      <a id="1868" href="Prelude.InferenceRules.html#13716" class="Function Operator">────────────────────────────────</a>
      <a id="1907" class="Symbol">(</a><a id="1908" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="1910" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1912" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a><a id="1914" class="Symbol">)</a> <a id="1916" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="1924" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
</pre>
<!--
<pre class="Agda"><a id="chain-∈⇒Valid"></a><a id="1944" href="Protocol.Streamlet.Local.State.html#1944" class="Function">chain-∈⇒Valid</a> <a id="1958" class="Symbol">:</a> <a id="1960" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="1963" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="1971" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="1974" class="Symbol">→</a> <a id="1976" href="Protocol.Streamlet.Local.Chain.html#1198" class="Datatype">ValidChain</a> <a id="1987" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
<a id="1990" href="Protocol.Streamlet.Local.State.html#1944" class="Function">chain-∈⇒Valid</a> <a id="2004" href="Protocol.Streamlet.Local.State.html#1700" class="InductiveConstructor">[]</a> <a id="2007" class="Symbol">=</a> <a id="2009" href="Protocol.Streamlet.Local.Chain.html#1232" class="InductiveConstructor">[]</a>
<a id="2012" href="Protocol.Streamlet.Local.State.html#1944" class="Function">chain-∈⇒Valid</a> <a id="2026" class="Symbol">(_</a> <a id="2029" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">∷</a> <a id="2031" href="Protocol.Streamlet.Local.State.html#2031" class="Bound">ch∈</a> <a id="2035" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">⊣</a> <a id="2037" href="Protocol.Streamlet.Local.State.html#2037" class="Bound">b→ch</a><a id="2041" class="Symbol">)</a> <a id="2043" class="Symbol">=</a> <a id="2045" class="Symbol">_</a> <a id="2047" href="Protocol.Streamlet.Local.Chain.html#1300" class="InductiveConstructor Operator">∷</a> <a id="2049" href="Protocol.Streamlet.Local.State.html#1944" class="Function">chain-∈⇒Valid</a> <a id="2063" href="Protocol.Streamlet.Local.State.html#2031" class="Bound">ch∈</a> <a id="2067" href="Protocol.Streamlet.Local.Chain.html#1300" class="InductiveConstructor Operator">⊣</a> <a id="2069" href="Protocol.Streamlet.Local.State.html#2037" class="Bound">b→ch</a>

<a id="uncons-ch∈"></a><a id="2075" href="Protocol.Streamlet.Local.State.html#2075" class="Function">uncons-ch∈</a> <a id="2086" class="Symbol">:</a> <a id="2088" class="Symbol">(</a><a id="2089" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="2091" class="InductiveConstructor Operator">∷</a> <a id="2093" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a><a id="2095" class="Symbol">)</a> <a id="2097" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="2105" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="2108" class="Symbol">→</a> <a id="2110" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="2113" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="2121" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
<a id="2124" href="Protocol.Streamlet.Local.State.html#2075" class="Function">uncons-ch∈</a> <a id="2135" class="Symbol">(_</a> <a id="2138" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">∷</a> <a id="2140" href="Protocol.Streamlet.Local.State.html#2140" class="Bound">ch∈</a> <a id="2144" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">⊣</a> <a id="2146" class="Symbol">_)</a> <a id="2149" class="Symbol">=</a> <a id="2151" href="Protocol.Streamlet.Local.State.html#2140" class="Bound">ch∈</a>

<a id="⊆-ch∈"></a><a id="2156" href="Protocol.Streamlet.Local.State.html#2156" class="Function">⊆-ch∈</a> <a id="2162" class="Symbol">:</a>
  <a id="2166" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="2168" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="2171" href="Data.List.Relation.Binary.Subset.Setoid.html#825" class="Function Operator">⊆ˢ</a> <a id="2174" href="Protocol.Streamlet.Message.html#406" class="Generalizable">ms′</a>
  <a id="2180" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="2182" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="2185" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="2193" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
    <a id="2200" href="Prelude.InferenceRules.html#14229" class="Function Operator">──────────────</a>
    <a id="2219" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="2222" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="2230" href="Protocol.Streamlet.Message.html#406" class="Generalizable">ms′</a>
<a id="2234" href="Protocol.Streamlet.Local.State.html#2156" class="Function">⊆-ch∈</a> <a id="2240" href="Protocol.Streamlet.Local.State.html#2240" class="Bound">ms⊆</a> <a id="2244" class="Symbol">=</a> <a id="2246" class="Symbol">λ</a> <a id="2248" class="Keyword">where</a>
  <a id="2256" href="Protocol.Streamlet.Local.State.html#1700" class="InductiveConstructor">[]</a> <a id="2259" class="Symbol">→</a> <a id="2261" href="Protocol.Streamlet.Local.State.html#1700" class="InductiveConstructor">[]</a>
  <a id="2266" class="Symbol">(</a><a id="2267" href="Protocol.Streamlet.Local.State.html#2267" class="Bound">m∈</a> <a id="2270" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">∷</a> <a id="2272" href="Protocol.Streamlet.Local.State.html#2272" class="Bound">ch∈</a> <a id="2276" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">⊣</a> <a id="2278" href="Protocol.Streamlet.Local.State.html#2278" class="Bound">p</a><a id="2279" class="Symbol">)</a> <a id="2281" class="Symbol">→</a> <a id="2283" href="Data.List.Relation.Binary.Subset.Propositional.Properties.html#4068" class="Function">L.SubS.Any-resp-⊆</a> <a id="2301" href="Protocol.Streamlet.Local.State.html#2240" class="Bound">ms⊆</a> <a id="2305" href="Protocol.Streamlet.Local.State.html#2267" class="Bound">m∈</a> <a id="2308" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">∷</a> <a id="2310" href="Protocol.Streamlet.Local.State.html#2156" class="Function">⊆-ch∈</a> <a id="2316" href="Protocol.Streamlet.Local.State.html#2240" class="Bound">ms⊆</a> <a id="2320" href="Protocol.Streamlet.Local.State.html#2272" class="Bound">ch∈</a> <a id="2324" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">⊣</a> <a id="2326" href="Protocol.Streamlet.Local.State.html#2278" class="Bound">p</a>

<a id="chain-∈-∷"></a><a id="2329" href="Protocol.Streamlet.Local.State.html#2329" class="Function">chain-∈-∷</a> <a id="2339" class="Symbol">:</a>
  <a id="2343" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="2346" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="2354" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
  <a id="2359" href="Prelude.InferenceRules.html#14119" class="Function Operator">───────────────────</a>
  <a id="2381" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="2384" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="2392" class="Symbol">(</a><a id="2393" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="2395" class="InductiveConstructor Operator">∷</a> <a id="2397" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="2399" class="Symbol">)</a>
<a id="2401" href="Protocol.Streamlet.Local.State.html#2329" class="Function">chain-∈-∷</a> <a id="2411" class="Symbol">=</a> <a id="2413" class="Symbol">λ</a> <a id="2415" class="Keyword">where</a>
  <a id="2423" href="Protocol.Streamlet.Local.State.html#1700" class="InductiveConstructor">[]</a> <a id="2426" class="Symbol">→</a> <a id="2428" href="Protocol.Streamlet.Local.State.html#1700" class="InductiveConstructor">[]</a>
  <a id="2433" class="Symbol">(</a><a id="2434" href="Protocol.Streamlet.Local.State.html#2434" class="Bound">m∈</a> <a id="2437" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">∷</a> <a id="2439" href="Protocol.Streamlet.Local.State.html#2439" class="Bound">ch∈</a> <a id="2443" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">⊣</a> <a id="2445" href="Protocol.Streamlet.Local.State.html#2445" class="Bound">x</a><a id="2446" class="Symbol">)</a> <a id="2448" class="Symbol">→</a> <a id="2450" href="Data.List.Relation.Unary.Any.html#1279" class="InductiveConstructor">there</a> <a id="2456" href="Protocol.Streamlet.Local.State.html#2434" class="Bound">m∈</a> <a id="2459" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">∷</a> <a id="2461" href="Protocol.Streamlet.Local.State.html#2329" class="Function">chain-∈-∷</a> <a id="2471" href="Protocol.Streamlet.Local.State.html#2439" class="Bound">ch∈</a> <a id="2475" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">⊣</a> <a id="2477" href="Protocol.Streamlet.Local.State.html#2445" class="Bound">x</a>

<a id="Suffix-ch∈"></a><a id="2480" href="Protocol.Streamlet.Local.State.html#2480" class="Function">Suffix-ch∈</a> <a id="2491" class="Symbol">:</a>
  <a id="2495" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="2497" href="Prelude.Lists.html#14682" class="Function">Suffix≡</a> <a id="2505" href="Protocol.Streamlet.Local.Chain.html#573" class="Generalizable">ch′</a> <a id="2509" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
  <a id="2514" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="2516" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>  <a id="2520" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="2528" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
    <a id="2535" href="Prelude.InferenceRules.html#14229" class="Function Operator">──────────────</a>
    <a id="2554" href="Protocol.Streamlet.Local.Chain.html#573" class="Generalizable">ch′</a> <a id="2558" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="2566" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
<a id="2569" href="Protocol.Streamlet.Local.State.html#2480" class="Function">Suffix-ch∈</a> <a id="2580" class="Symbol">(</a><a id="2581" href="Data.List.Relation.Binary.Suffix.Heterogeneous.html#712" class="InductiveConstructor">here</a> <a id="2586" href="Protocol.Streamlet.Local.State.html#2586" class="Bound">eq</a><a id="2588" class="Symbol">)</a> <a id="2590" href="Protocol.Streamlet.Local.State.html#2590" class="Bound">p</a> <a id="2592" class="Keyword">rewrite</a> <a id="2600" href="Data.List.Relation.Binary.Pointwise.html#10074" class="Function">L.PW.Pointwise-≡⇒≡</a> <a id="2619" href="Protocol.Streamlet.Local.State.html#2586" class="Bound">eq</a> <a id="2622" class="Symbol">=</a> <a id="2624" href="Protocol.Streamlet.Local.State.html#2590" class="Bound">p</a>
<a id="2626" href="Protocol.Streamlet.Local.State.html#2480" class="Function">Suffix-ch∈</a> <a id="2637" class="Symbol">(</a><a id="2638" href="Data.List.Relation.Binary.Suffix.Heterogeneous.html#769" class="InductiveConstructor">there</a> <a id="2644" href="Protocol.Streamlet.Local.State.html#2644" class="Bound">suf</a><a id="2647" class="Symbol">)</a> <a id="2649" class="Symbol">(</a><a id="2650" href="Protocol.Streamlet.Local.State.html#2650" class="Bound">m∈</a> <a id="2653" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">∷</a> <a id="2655" href="Protocol.Streamlet.Local.State.html#2655" class="Bound">p</a> <a id="2657" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">⊣</a> <a id="2659" href="Protocol.Streamlet.Local.State.html#2659" class="Bound">x</a><a id="2660" class="Symbol">)</a> <a id="2662" class="Symbol">=</a> <a id="2664" href="Protocol.Streamlet.Local.State.html#2480" class="Function">Suffix-ch∈</a> <a id="2675" href="Protocol.Streamlet.Local.State.html#2644" class="Bound">suf</a> <a id="2679" href="Protocol.Streamlet.Local.State.html#2655" class="Bound">p</a>
</pre>-->
<h3 id="notarized-chains">Notarized Chains</h3>
<p>A block is <em>notarized</em> when it has been voted by the
majority.</p>
<pre class="Agda"><a id="2784" class="Keyword">module</a> <a id="2791" href="Protocol.Streamlet.Local.State.html#2791" class="Module">_</a> <a id="2793" class="Symbol">(</a><a id="2794" href="Protocol.Streamlet.Local.State.html#2794" class="Bound">ms</a> <a id="2797" class="Symbol">:</a> <a id="2799" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2804" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a><a id="2811" class="Symbol">)</a> <a id="2813" class="Keyword">where</a>
  <a id="2821" class="Keyword">module</a> <a id="2828" href="Protocol.Streamlet.Local.State.html#2828" class="Module">_</a> <a id="2830" class="Symbol">(</a><a id="2831" href="Protocol.Streamlet.Local.State.html#2831" class="Bound">b</a> <a id="2833" class="Symbol">:</a> <a id="2835" href="Protocol.Streamlet.Block.html#257" class="Record">Block</a><a id="2840" class="Symbol">)</a> <a id="2842" class="Keyword">where</a>
    <a id="2852" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a> <a id="2858" class="Symbol">:</a> <a id="2860" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2865" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a>
    <a id="2877" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a> <a id="2883" class="Symbol">=</a> <a id="2885" href="Data.List.Base.html#10878" class="Function">filter</a> <a id="2892" class="Symbol">((</a><a id="2894" href="Protocol.Streamlet.Local.State.html#2831" class="Bound">b</a> <a id="2896" href="Prelude.DecEq.html#123" class="Field Operator">≟_</a><a id="2898" class="Symbol">)</a> <a id="2900" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="2902" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">_∙block</a><a id="2909" class="Symbol">)</a> <a id="2911" href="Protocol.Streamlet.Local.State.html#2794" class="Bound">ms</a>

    <a id="2919" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="2927" class="Symbol">:</a> <a id="2929" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="2934" href="Protocol.Streamlet.Assumptions.html#512" class="Function">Pid</a>
    <a id="2942" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="2950" class="Symbol">=</a> <a id="2952" href="Data.List.Base.html#1631" class="Function">map</a> <a id="2956" href="Protocol.Streamlet.Block.html#2305" class="Field Operator">_∙pid</a> <a id="2962" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a>

    <a id="2973" href="Protocol.Streamlet.Local.State.html#2973" class="Function">voteRightBlock</a> <a id="2988" class="Symbol">:</a> <a id="2990" href="Prelude.Allable.html#210" class="Field">All</a> <a id="2994" class="Symbol">((</a><a id="2996" href="Protocol.Streamlet.Local.State.html#2831" class="Bound">b</a> <a id="2998" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡_</a><a id="3000" class="Symbol">)</a> <a id="3002" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3004" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">_∙block</a><a id="3011" class="Symbol">)</a> <a id="3013" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a>
    <a id="3023" href="Protocol.Streamlet.Local.State.html#2973" class="Function">voteRightBlock</a> <a id="3038" class="Symbol">=</a> <a id="3040" href="Data.List.Relation.Unary.All.Properties.html#21360" class="Function">L.All.all-filter</a> <a id="3057" class="Symbol">((</a><a id="3059" href="Protocol.Streamlet.Local.State.html#2831" class="Bound">b</a> <a id="3061" href="Prelude.DecEq.html#123" class="Field Operator">≟_</a><a id="3063" class="Symbol">)</a> <a id="3065" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3067" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">_∙block</a><a id="3074" class="Symbol">)</a> <a id="3076" href="Protocol.Streamlet.Local.State.html#2794" class="Bound">ms</a>

    <a id="3084" href="Protocol.Streamlet.Local.State.html#3084" class="Function">seenVotes</a> <a id="3094" class="Symbol">:</a> <a id="3096" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a> <a id="3102" href="Data.List.Relation.Binary.Subset.Setoid.html#825" class="Function Operator">⊆ˢ</a> <a id="3105" href="Protocol.Streamlet.Local.State.html#2794" class="Bound">ms</a>
    <a id="3112" href="Protocol.Streamlet.Local.State.html#3084" class="Function">seenVotes</a> <a id="3122" class="Symbol">=</a> <a id="3124" href="Data.List.Relation.Binary.Subset.Propositional.Properties.html#7821" class="Function">L.SubS.filter-⊆</a> <a id="3140" class="Symbol">((</a><a id="3142" href="Protocol.Streamlet.Local.State.html#2831" class="Bound">b</a> <a id="3144" href="Prelude.DecEq.html#123" class="Field Operator">≟_</a><a id="3146" class="Symbol">)</a> <a id="3148" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="3150" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">_∙block</a><a id="3157" class="Symbol">)</a> <a id="3159" href="Protocol.Streamlet.Local.State.html#2794" class="Bound">ms</a>

    <a id="3167" class="Keyword">record</a> <a id="3174" href="Protocol.Streamlet.Local.State.html#3174" class="Record">NotarizedBlock</a> <a id="3189" class="Symbol">:</a> <a id="3191" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3196" class="Keyword">where</a>

      <a id="3209" class="Keyword">field</a> <a id="3215" href="Protocol.Streamlet.Local.State.html#3215" class="Field">enoughVotes</a> <a id="3227" class="Symbol">:</a> <a id="3229" href="Protocol.Streamlet.Assumptions.html#880" class="Function">IsMajority</a> <a id="3240" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a>


      <a id="3254" href="Protocol.Streamlet.Local.State.html#3254" class="Function">enoughVoteIds</a> <a id="3268" class="Symbol">:</a> <a id="3270" href="Protocol.Streamlet.Assumptions.html#880" class="Function">IsMajority</a> <a id="3281" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a>
      <a id="3295" href="Protocol.Streamlet.Local.State.html#3254" class="Function">enoughVoteIds</a> <a id="3309" class="Keyword">rewrite</a> <a id="3317" href="Data.List.Properties.html#4003" class="Function">L.length-map</a> <a id="3330" href="Protocol.Streamlet.Block.html#2305" class="Field Operator">_∙pid</a> <a id="3336" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a> <a id="3342" class="Symbol">=</a> <a id="3344" href="Protocol.Streamlet.Local.State.html#3215" class="Field">enoughVotes</a>

      <a id="3363" href="Protocol.Streamlet.Local.State.html#3363" class="Function">votesNonempty</a> <a id="3377" class="Symbol">:</a> <a id="3379" href="Data.List.Base.html#5083" class="Function">length</a> <a id="3386" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a> <a id="3392" href="Data.Nat.Base.html#2289" class="Function Operator">&gt;</a> <a id="3394" class="Number">0</a>
      <a id="3402" href="Protocol.Streamlet.Local.State.html#3363" class="Function">votesNonempty</a> <a id="3416" class="Keyword">with</a> <a id="3421" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a> <a id="3427" class="Keyword">in</a> <a id="3430" class="Argument">eq</a>
      <a id="3439" href="Protocol.Streamlet.Local.State.html#3363" class="Function">...</a> <a id="3443" class="Symbol">|</a> <a id="3445" href="Agda.Builtin.List.html#184" class="InductiveConstructor">[]</a> <a id="3448" class="Symbol">=</a> <a id="3450" href="Data.Empty.html#1050" class="Function">⊥-elim</a> <a id="3457" class="Symbol">(</a><a id="3458" href="Protocol.Streamlet.Assumptions.html#1676" class="Function">majority⁺</a> <a id="3468" class="Symbol">(</a><a id="3469" href="Relation.Binary.PropositionalEquality.Core.html#1808" class="Function">subst</a> <a id="3475" href="Protocol.Streamlet.Assumptions.html#880" class="Function">IsMajority</a> <a id="3486" href="Protocol.Streamlet.Local.State.html#3430" class="Bound">eq</a> <a id="3489" href="Protocol.Streamlet.Local.State.html#3215" class="Field">enoughVotes</a><a id="3500" class="Symbol">))</a>
      <a id="3509" href="Protocol.Streamlet.Local.State.html#3363" class="Function">...</a> <a id="3513" class="Symbol">|</a> <a id="3515" href="Protocol.Streamlet.Local.State.html#3515" class="Bound">x</a> <a id="3517" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3519" href="Protocol.Streamlet.Local.State.html#3519" class="Bound">xs</a> <a id="3522" class="Symbol">=</a> <a id="3524" href="Data.Nat.Base.html#1756" class="InductiveConstructor">Nat.s≤s</a> <a id="3532" href="Data.Nat.Base.html#1714" class="InductiveConstructor">Nat.z≤n</a>

    <a id="3545" class="Keyword">open</a> <a id="3550" href="Protocol.Streamlet.Local.State.html#3174" class="Module">NotarizedBlock</a> <a id="3565" class="Keyword">public</a>
      <a id="3578" class="Comment">-- NB: Proposals count as votes</a>

  <a id="3613" href="Protocol.Streamlet.Local.State.html#3613" class="Function">NotarizedChain</a> <a id="3628" class="Symbol">:</a> <a id="3630" href="Protocol.Streamlet.Local.Chain.html#525" class="Function">Chain</a> <a id="3636" class="Symbol">→</a> <a id="3638" href="Agda.Primitive.html#388" class="Primitive">Type</a>
  <a id="3645" href="Protocol.Streamlet.Local.State.html#3613" class="Function">NotarizedChain</a> <a id="3660" class="Symbol">=</a> <a id="3662" href="Prelude.Allable.html#210" class="Field">All</a> <a id="3666" href="Protocol.Streamlet.Local.State.html#3174" class="Record">NotarizedBlock</a>

  <a id="3684" class="Keyword">data</a> <a id="3689" href="Protocol.Streamlet.Local.State.html#3689" class="Datatype">FinalizedChain</a> <a id="3704" class="Symbol">:</a> <a id="3706" href="Protocol.Streamlet.Local.Chain.html#525" class="Function">Chain</a> <a id="3712" class="Symbol">→</a> <a id="3714" href="Protocol.Streamlet.Block.html#257" class="Record">Block</a> <a id="3720" class="Symbol">→</a> <a id="3722" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="3727" class="Keyword">where</a>
    <a id="3737" href="Protocol.Streamlet.Local.State.html#3737" class="InductiveConstructor">Finalize</a> <a id="3746" class="Symbol">:</a> <a id="3748" class="Symbol">∀</a> <a id="3750" class="Symbol">{</a><a id="3751" href="Protocol.Streamlet.Local.State.html#3751" class="Bound">ch</a> <a id="3754" href="Protocol.Streamlet.Local.State.html#3754" class="Bound">b₁</a> <a id="3757" href="Protocol.Streamlet.Local.State.html#3757" class="Bound">b₂</a> <a id="3760" href="Protocol.Streamlet.Local.State.html#3760" class="Bound">b₃</a><a id="3762" class="Symbol">}</a> <a id="3764" class="Symbol">→</a>
      <a id="3772" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="3774" href="Protocol.Streamlet.Local.State.html#3613" class="Function">NotarizedChain</a> <a id="3789" class="Symbol">(</a><a id="3790" href="Protocol.Streamlet.Local.State.html#3760" class="Bound">b₃</a> <a id="3793" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3795" href="Protocol.Streamlet.Local.State.html#3757" class="Bound">b₂</a> <a id="3798" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3800" href="Protocol.Streamlet.Local.State.html#3754" class="Bound">b₁</a> <a id="3803" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3805" href="Protocol.Streamlet.Local.State.html#3751" class="Bound">ch</a><a id="3807" class="Symbol">)</a>
      <a id="3815" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="3817" href="Protocol.Streamlet.Local.State.html#3760" class="Bound">b₃</a> <a id="3820" class="Symbol">.</a><a id="3821" href="Protocol.Streamlet.Block.html#332" class="Field">epoch</a> <a id="3827" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3829" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="3833" class="Symbol">(</a><a id="3834" href="Protocol.Streamlet.Local.State.html#3757" class="Bound">b₂</a> <a id="3837" class="Symbol">.</a><a id="3838" href="Protocol.Streamlet.Block.html#332" class="Field">epoch</a><a id="3843" class="Symbol">)</a>
      <a id="3851" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="3853" href="Protocol.Streamlet.Local.State.html#3757" class="Bound">b₂</a> <a id="3856" class="Symbol">.</a><a id="3857" href="Protocol.Streamlet.Block.html#332" class="Field">epoch</a> <a id="3863" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="3865" href="Agda.Builtin.Nat.html#234" class="InductiveConstructor">suc</a> <a id="3869" class="Symbol">(</a><a id="3870" href="Protocol.Streamlet.Local.State.html#3754" class="Bound">b₁</a> <a id="3873" class="Symbol">.</a><a id="3874" href="Protocol.Streamlet.Block.html#332" class="Field">epoch</a><a id="3879" class="Symbol">)</a>
        <a id="3889" href="Prelude.InferenceRules.html#13599" class="Function Operator">───────────────────────────────────</a>
        <a id="3933" href="Protocol.Streamlet.Local.State.html#3689" class="Datatype">FinalizedChain</a> <a id="3948" class="Symbol">(</a><a id="3949" href="Protocol.Streamlet.Local.State.html#3757" class="Bound">b₂</a> <a id="3952" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3954" href="Protocol.Streamlet.Local.State.html#3754" class="Bound">b₁</a> <a id="3957" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="3959" href="Protocol.Streamlet.Local.State.html#3751" class="Bound">ch</a><a id="3961" class="Symbol">)</a> <a id="3963" href="Protocol.Streamlet.Local.State.html#3760" class="Bound">b₃</a>

<a id="_notarized-chain-∈_"></a><a id="3967" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">_notarized-chain-∈_</a> <a id="3987" class="Symbol">:</a> <a id="3989" href="Protocol.Streamlet.Local.Chain.html#525" class="Function">Chain</a> <a id="3995" class="Symbol">→</a> <a id="3997" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4002" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a> <a id="4010" class="Symbol">→</a> <a id="4012" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="4017" href="Protocol.Streamlet.Local.State.html#4017" class="Bound">ch</a> <a id="4020" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="4038" href="Protocol.Streamlet.Local.State.html#4038" class="Bound">ms</a>
  <a id="4043" class="Symbol">=</a> <a id="4045" class="Symbol">(</a><a id="4046" href="Protocol.Streamlet.Local.State.html#4017" class="Bound">ch</a> <a id="4049" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="4057" href="Protocol.Streamlet.Local.State.html#4038" class="Bound">ms</a><a id="4059" class="Symbol">)</a>
  <a id="4063" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4065" href="Protocol.Streamlet.Local.State.html#3613" class="Function">NotarizedChain</a> <a id="4080" href="Protocol.Streamlet.Local.State.html#4038" class="Bound">ms</a> <a id="4083" href="Protocol.Streamlet.Local.State.html#4017" class="Bound">ch</a>
</pre>
<!--
<pre class="Agda"><a id="_notarized-block-∈_"></a><a id="4103" href="Protocol.Streamlet.Local.State.html#4103" class="Function Operator">_notarized-block-∈_</a> <a id="4123" class="Symbol">:</a> <a id="4125" href="Protocol.Streamlet.Block.html#257" class="Record">Block</a> <a id="4131" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4133" href="Protocol.Streamlet.Local.Chain.html#525" class="Function">Chain</a> <a id="4139" class="Symbol">→</a> <a id="4141" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="4146" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a> <a id="4154" class="Symbol">→</a> <a id="4156" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="4161" class="Symbol">(</a><a id="4162" href="Protocol.Streamlet.Local.State.html#4162" class="Bound">b</a> <a id="4164" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4166" href="Protocol.Streamlet.Local.State.html#4166" class="Bound">ch</a><a id="4168" class="Symbol">)</a> <a id="4170" href="Protocol.Streamlet.Local.State.html#4103" class="Function Operator">notarized-block-∈</a> <a id="4188" href="Protocol.Streamlet.Local.State.html#4188" class="Bound">ms</a>
  <a id="4193" class="Symbol">=</a> <a id="4195" href="Protocol.Streamlet.Local.State.html#4162" class="Bound">b</a> <a id="4197" href="Protocol.Streamlet.Local.Chain.html#1024" class="Record Operator">-connects-to-</a> <a id="4211" href="Protocol.Streamlet.Local.State.html#4166" class="Bound">ch</a>
  <a id="4216" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="4218" href="Protocol.Streamlet.Local.State.html#3174" class="Record">NotarizedBlock</a> <a id="4233" href="Protocol.Streamlet.Local.State.html#4188" class="Bound">ms</a> <a id="4236" href="Protocol.Streamlet.Local.State.html#4162" class="Bound">b</a>

<a id="notarized-chain-∈⇒Valid"></a><a id="4239" href="Protocol.Streamlet.Local.State.html#4239" class="Function">notarized-chain-∈⇒Valid</a> <a id="4263" class="Symbol">:</a> <a id="4265" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="4268" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="4286" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="4289" class="Symbol">→</a> <a id="4291" href="Protocol.Streamlet.Local.Chain.html#1198" class="Datatype">ValidChain</a> <a id="4302" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
<a id="4305" href="Protocol.Streamlet.Local.State.html#4239" class="Function">notarized-chain-∈⇒Valid</a> <a id="4329" class="Symbol">=</a> <a id="4331" href="Protocol.Streamlet.Local.State.html#1944" class="Function">chain-∈⇒Valid</a> <a id="4345" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="4347" href="Data.Product.Base.html#636" class="Field">proj₁</a>

<a id="NotarizedBlock-⊆"></a><a id="4354" href="Protocol.Streamlet.Local.State.html#4354" class="Function">NotarizedBlock-⊆</a> <a id="4371" class="Symbol">:</a>
  <a id="4375" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="4377" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="4380" href="Data.List.Relation.Binary.Sublist.Setoid.html#1567" class="Function Operator">⊆</a> <a id="4382" href="Protocol.Streamlet.Message.html#406" class="Generalizable">ms′</a>
  <a id="4388" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="4390" href="Protocol.Streamlet.Local.State.html#3174" class="Record">NotarizedBlock</a> <a id="4405" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="4408" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a>
    <a id="4414" href="Prelude.InferenceRules.html#14094" class="Function Operator">────────────────────</a>
    <a id="4439" href="Protocol.Streamlet.Local.State.html#3174" class="Record">NotarizedBlock</a> <a id="4454" href="Protocol.Streamlet.Message.html#406" class="Generalizable">ms′</a> <a id="4458" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a>
<a id="4460" href="Protocol.Streamlet.Local.State.html#4354" class="Function">NotarizedBlock-⊆</a> <a id="4477" class="Symbol">{</a><a id="4478" class="Argument">b</a> <a id="4480" class="Symbol">=</a> <a id="4482" href="Protocol.Streamlet.Local.State.html#4482" class="Bound">b</a><a id="4483" class="Symbol">}</a> <a id="4485" href="Protocol.Streamlet.Local.State.html#4485" class="Bound">ms⊆</a> <a id="4489" href="Protocol.Streamlet.Local.State.html#4489" class="Bound">nb</a> <a id="4492" class="Symbol">.</a><a id="4493" href="Protocol.Streamlet.Local.State.html#3215" class="Field">enoughVotes</a> <a id="4505" class="Symbol">=</a>
  <a id="4509" href="Protocol.Streamlet.Assumptions.html#2149" class="Function">majority-⊆</a> <a id="4520" class="Symbol">(</a><a id="4521" href="Data.List.Relation.Binary.Sublist.Setoid.Properties.html#6353" class="Function">L.SubL.filter⁺</a> <a id="4536" class="Symbol">_</a> <a id="4538" href="Prelude.Decidable.html#657" class="Function">dec¹</a> <a id="4543" class="Symbol">(λ</a> <a id="4546" class="Keyword">where</a> <a id="4552" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4557" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="4562" class="Symbol">→</a> <a id="4564" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="4568" class="Symbol">)</a> <a id="4570" href="Protocol.Streamlet.Local.State.html#4485" class="Bound">ms⊆</a><a id="4573" class="Symbol">)</a> <a id="4575" class="Symbol">(</a><a id="4576" href="Protocol.Streamlet.Local.State.html#4489" class="Bound">nb</a> <a id="4579" class="Symbol">.</a><a id="4580" href="Protocol.Streamlet.Local.State.html#3215" class="Field">enoughVotes</a><a id="4591" class="Symbol">)</a>

<a id="NotarizedChain-⊆"></a><a id="4594" href="Protocol.Streamlet.Local.State.html#4594" class="Function">NotarizedChain-⊆</a> <a id="4611" class="Symbol">:</a>
  <a id="4615" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="4617" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="4620" href="Data.List.Relation.Binary.Sublist.Setoid.html#1567" class="Function Operator">⊆</a> <a id="4622" href="Protocol.Streamlet.Message.html#406" class="Generalizable">ms′</a>
  <a id="4628" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="4630" href="Protocol.Streamlet.Local.State.html#3613" class="Function">NotarizedChain</a> <a id="4645" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="4648" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
    <a id="4655" href="Prelude.InferenceRules.html#14068" class="Function Operator">─────────────────────</a>
    <a id="4681" href="Protocol.Streamlet.Local.State.html#3613" class="Function">NotarizedChain</a> <a id="4696" href="Protocol.Streamlet.Message.html#406" class="Generalizable">ms′</a> <a id="4700" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
<a id="4703" href="Protocol.Streamlet.Local.State.html#4594" class="Function">NotarizedChain-⊆</a> <a id="4720" href="Protocol.Streamlet.Local.State.html#4720" class="Bound">ms⊆</a> <a id="4724" class="Symbol">=</a> <a id="4726" href="Data.List.Relation.Unary.All.html#3121" class="Function">L.All.map</a> <a id="4736" class="Symbol">(</a><a id="4737" href="Protocol.Streamlet.Local.State.html#4354" class="Function">NotarizedBlock-⊆</a> <a id="4754" href="Protocol.Streamlet.Local.State.html#4720" class="Bound">ms⊆</a><a id="4757" class="Symbol">)</a>

<a id="⊆-nch∈"></a><a id="4760" href="Protocol.Streamlet.Local.State.html#4760" class="Function">⊆-nch∈</a> <a id="4767" class="Symbol">:</a>
  <a id="4771" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="4773" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="4776" href="Data.List.Relation.Binary.Sublist.Setoid.html#1567" class="Function Operator">⊆</a> <a id="4778" href="Protocol.Streamlet.Message.html#406" class="Generalizable">ms′</a>
  <a id="4784" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="4786" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="4789" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="4807" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
    <a id="4814" href="Prelude.InferenceRules.html#13984" class="Function Operator">────────────────────────</a>
    <a id="4843" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="4846" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="4864" href="Protocol.Streamlet.Message.html#406" class="Generalizable">ms′</a>
<a id="4868" href="Protocol.Streamlet.Local.State.html#4760" class="Function">⊆-nch∈</a> <a id="4875" href="Protocol.Streamlet.Local.State.html#4875" class="Bound">ms⊆</a> <a id="4879" class="Symbol">(</a><a id="4880" href="Protocol.Streamlet.Local.State.html#4880" class="Bound">ch∈</a> <a id="4884" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4886" href="Protocol.Streamlet.Local.State.html#4886" class="Bound">nch</a><a id="4889" class="Symbol">)</a> <a id="4891" class="Symbol">=</a> <a id="4893" href="Protocol.Streamlet.Local.State.html#2156" class="Function">⊆-ch∈</a> <a id="4899" class="Symbol">(</a><a id="4900" href="Prelude.Lists.html#11491" class="Function">⊆⇒⊆ˢ</a> <a id="4905" href="Protocol.Streamlet.Local.State.html#4875" class="Bound">ms⊆</a><a id="4908" class="Symbol">)</a> <a id="4910" href="Protocol.Streamlet.Local.State.html#4880" class="Bound">ch∈</a> <a id="4914" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="4916" href="Protocol.Streamlet.Local.State.html#4594" class="Function">NotarizedChain-⊆</a> <a id="4933" href="Protocol.Streamlet.Local.State.html#4875" class="Bound">ms⊆</a> <a id="4937" href="Protocol.Streamlet.Local.State.html#4886" class="Bound">nch</a>

<a id="Suffix-nch∈"></a><a id="4942" href="Protocol.Streamlet.Local.State.html#4942" class="Function">Suffix-nch∈</a> <a id="4954" class="Symbol">:</a>
  <a id="4958" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="4960" href="Prelude.Lists.html#14682" class="Function">Suffix≡</a> <a id="4968" href="Protocol.Streamlet.Local.Chain.html#573" class="Generalizable">ch′</a> <a id="4972" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
  <a id="4977" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="4979" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="4982" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="5000" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
    <a id="5007" href="Prelude.InferenceRules.html#13984" class="Function Operator">────────────────────────</a>
    <a id="5036" href="Protocol.Streamlet.Local.Chain.html#573" class="Generalizable">ch′</a> <a id="5040" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="5058" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
<a id="5061" href="Protocol.Streamlet.Local.State.html#4942" class="Function">Suffix-nch∈</a> <a id="5073" href="Protocol.Streamlet.Local.State.html#5073" class="Bound">suf</a> <a id="5077" class="Symbol">(</a><a id="5078" href="Protocol.Streamlet.Local.State.html#5078" class="Bound">ch∈</a> <a id="5082" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5084" href="Protocol.Streamlet.Local.State.html#5084" class="Bound">nch</a><a id="5087" class="Symbol">)</a>
  <a id="5091" class="Symbol">=</a> <a id="5093" href="Protocol.Streamlet.Local.State.html#2480" class="Function">Suffix-ch∈</a> <a id="5104" href="Protocol.Streamlet.Local.State.html#5073" class="Bound">suf</a> <a id="5108" href="Protocol.Streamlet.Local.State.html#5078" class="Bound">ch∈</a>
  <a id="5114" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="5116" href="Prelude.Lists.html#15042" class="Function">Suffix⇒All</a> <a id="5127" href="Protocol.Streamlet.Local.State.html#5073" class="Bound">suf</a> <a id="5131" href="Protocol.Streamlet.Local.State.html#5084" class="Bound">nch</a>
</pre>-->
Often we will need to talk about the <em>longest</em> notarized chain
seen so far.
<pre class="Agda"><a id="_≤ᶜʰ_"></a><a id="5228" href="Protocol.Streamlet.Local.State.html#5228" class="Function Operator">_≤ᶜʰ_</a> <a id="_≼_"></a><a id="5234" href="Protocol.Streamlet.Local.State.html#5234" class="Function Operator">_≼_</a> <a id="5238" class="Symbol">:</a> <a id="5240" href="Protocol.Streamlet.Local.Chain.html#525" class="Function">Chain</a> <a id="5246" class="Symbol">→</a> <a id="5248" href="Protocol.Streamlet.Local.Chain.html#525" class="Function">Chain</a> <a id="5254" class="Symbol">→</a> <a id="5256" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="5261" href="Protocol.Streamlet.Local.State.html#5228" class="Function Operator">_≤ᶜʰ_</a> <a id="5267" class="Symbol">=</a> <a id="5269" href="Data.Nat.Base.html#1691" class="Datatype Operator">_≤_</a> <a id="5273" href="Function.Base.html#6209" class="Function Operator">on</a> <a id="5276" href="Data.List.Base.html#5083" class="Function">length</a>
<a id="5283" href="Protocol.Streamlet.Local.State.html#5234" class="Function Operator">_≼_</a>   <a id="5289" class="Symbol">=</a> <a id="5291" href="Prelude.Lists.html#14682" class="Function">Suffix≡</a>

<a id="5300" class="Keyword">data</a> <a id="Longest∈"></a><a id="5305" href="Protocol.Streamlet.Local.State.html#5305" class="Datatype">Longest∈</a> <a id="5314" class="Symbol">(</a><a id="5315" href="Protocol.Streamlet.Local.State.html#5315" class="Bound">ch</a> <a id="5318" class="Symbol">:</a> <a id="5320" href="Protocol.Streamlet.Local.Chain.html#525" class="Function">Chain</a><a id="5325" class="Symbol">)</a> <a id="5327" class="Symbol">(</a><a id="5328" href="Protocol.Streamlet.Local.State.html#5328" class="Bound">ms</a> <a id="5331" class="Symbol">:</a> <a id="5333" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5338" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a><a id="5345" class="Symbol">)</a> <a id="5347" class="Symbol">:</a> <a id="5349" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="5354" class="Keyword">where</a>
  <a id="Longest∈.mkLongest∈"></a><a id="5362" href="Protocol.Streamlet.Local.State.html#5362" class="InductiveConstructor">mkLongest∈</a> <a id="5373" class="Symbol">:</a>
    <a id="5379" class="Symbol">(∀</a> <a id="5382" class="Symbol">{</a><a id="5383" href="Protocol.Streamlet.Local.State.html#5383" class="Bound">ch′</a><a id="5386" class="Symbol">}</a> <a id="5388" class="Symbol">→</a> <a id="5390" href="Protocol.Streamlet.Local.State.html#5383" class="Bound">ch′</a> <a id="5394" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="5412" href="Protocol.Streamlet.Local.State.html#5328" class="Bound">ms</a> <a id="5415" class="Symbol">→</a> <a id="5417" href="Protocol.Streamlet.Local.State.html#5383" class="Bound">ch′</a> <a id="5421" href="Protocol.Streamlet.Local.State.html#5228" class="Function Operator">≤ᶜʰ</a> <a id="5425" href="Protocol.Streamlet.Local.State.html#5315" class="Bound">ch</a><a id="5427" class="Symbol">)</a>
    <a id="5433" href="Prelude.InferenceRules.html#12934" class="Function Operator">─────────────────────────────────────────────────</a>
    <a id="5487" href="Protocol.Streamlet.Local.State.html#5305" class="Datatype">Longest∈</a> <a id="5496" href="Protocol.Streamlet.Local.State.html#5315" class="Bound">ch</a> <a id="5499" href="Protocol.Streamlet.Local.State.html#5328" class="Bound">ms</a>

<a id="_longest-notarized-chain-∈_"></a><a id="5503" href="Protocol.Streamlet.Local.State.html#5503" class="Function Operator">_longest-notarized-chain-∈_</a> <a id="5531" class="Symbol">:</a> <a id="5533" href="Protocol.Streamlet.Local.Chain.html#525" class="Function">Chain</a> <a id="5539" class="Symbol">→</a> <a id="5541" href="Agda.Builtin.List.html#147" class="Datatype">List</a> <a id="5546" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a> <a id="5554" class="Symbol">→</a> <a id="5556" href="Agda.Primitive.html#388" class="Primitive">Type</a>
<a id="5561" href="Protocol.Streamlet.Local.State.html#5561" class="Bound">ch</a> <a id="5564" href="Protocol.Streamlet.Local.State.html#5503" class="Function Operator">longest-notarized-chain-∈</a> <a id="5590" href="Protocol.Streamlet.Local.State.html#5590" class="Bound">ms</a>
  <a id="5595" class="Symbol">=</a> <a id="5597" href="Protocol.Streamlet.Local.State.html#5561" class="Bound">ch</a> <a id="5600" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="5618" href="Protocol.Streamlet.Local.State.html#5590" class="Bound">ms</a>
  <a id="5623" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="5625" href="Protocol.Streamlet.Local.State.html#5305" class="Datatype">Longest∈</a> <a id="5634" href="Protocol.Streamlet.Local.State.html#5561" class="Bound">ch</a> <a id="5637" href="Protocol.Streamlet.Local.State.html#5590" class="Bound">ms</a>
</pre>
<!--
<pre class="Agda">
<a id="5659" class="Comment">-- ** Utilities related to votes/notarization</a>

<a id="5706" class="Keyword">open</a> <a id="5711" href="Prelude.Init.html#3265" class="Module">L.All</a> <a id="5717" class="Keyword">using</a> <a id="5723" class="Symbol">(</a><a id="5724" href="Data.List.Relation.Unary.All.Properties.html#3353" class="Function">¬Any⇒All¬</a><a id="5733" class="Symbol">)</a>

<a id="5736" class="Comment">-- votes</a>
<a id="votes-accept"></a><a id="5745" href="Protocol.Streamlet.Local.State.html#5745" class="Function">votes-accept</a> <a id="5758" class="Symbol">:</a> <a id="5760" class="Symbol">∀</a> <a id="5762" href="Protocol.Streamlet.Local.State.html#5762" class="Bound">m</a> <a id="5764" href="Protocol.Streamlet.Local.State.html#5764" class="Bound">ms</a> <a id="5767" class="Symbol">→</a> <a id="5769" href="Protocol.Streamlet.Local.State.html#5762" class="Bound">m</a> <a id="5771" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="5778" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5780" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="5782" class="Symbol">→</a> <a id="5784" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a> <a id="5790" class="Symbol">(</a><a id="5791" href="Protocol.Streamlet.Local.State.html#5762" class="Bound">m</a> <a id="5793" class="InductiveConstructor Operator">∷</a> <a id="5795" href="Protocol.Streamlet.Local.State.html#5764" class="Bound">ms</a><a id="5797" class="Symbol">)</a> <a id="5799" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="5801" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5803" href="Protocol.Streamlet.Local.State.html#5762" class="Bound">m</a> <a id="5805" class="InductiveConstructor Operator">∷</a> <a id="5807" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a> <a id="5813" href="Protocol.Streamlet.Local.State.html#5764" class="Bound">ms</a> <a id="5816" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a>
<a id="5818" href="Protocol.Streamlet.Local.State.html#5745" class="Function">votes-accept</a> <a id="5831" class="Symbol">_</a> <a id="5833" class="Symbol">_</a> <a id="5835" class="Symbol">=</a> <a id="5837" href="Data.List.Properties.html#36660" class="Function">L.filter-accept</a> <a id="5853" class="Symbol">((_</a> <a id="5857" href="Prelude.DecEq.html#123" class="Field Operator">≟_</a><a id="5859" class="Symbol">)</a> <a id="5861" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5863" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">_∙block</a><a id="5870" class="Symbol">)</a> <a id="5872" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5874" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a>

<a id="votes-reject"></a><a id="5879" href="Protocol.Streamlet.Local.State.html#5879" class="Function">votes-reject</a> <a id="5892" class="Symbol">:</a> <a id="5894" class="Symbol">∀</a> <a id="5896" href="Protocol.Streamlet.Local.State.html#5896" class="Bound">m</a> <a id="5898" href="Protocol.Streamlet.Local.State.html#5898" class="Bound">ms</a> <a id="5901" class="Symbol">→</a> <a id="5903" href="Protocol.Streamlet.Local.State.html#5896" class="Bound">m</a> <a id="5905" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="5912" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="5914" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="5916" class="Symbol">→</a> <a id="5918" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a> <a id="5924" class="Symbol">(</a><a id="5925" href="Protocol.Streamlet.Local.State.html#5896" class="Bound">m</a> <a id="5927" class="InductiveConstructor Operator">∷</a> <a id="5929" href="Protocol.Streamlet.Local.State.html#5898" class="Bound">ms</a><a id="5931" class="Symbol">)</a> <a id="5933" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="5935" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="5937" href="Protocol.Streamlet.Local.State.html#2852" class="Function">votes</a> <a id="5943" href="Protocol.Streamlet.Local.State.html#5898" class="Bound">ms</a> <a id="5946" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a>
<a id="5948" href="Protocol.Streamlet.Local.State.html#5879" class="Function">votes-reject</a> <a id="5961" class="Symbol">{</a><a id="5962" href="Protocol.Streamlet.Local.State.html#5962" class="Bound">b</a><a id="5963" class="Symbol">}</a> <a id="5965" class="Symbol">_</a> <a id="5967" class="Symbol">_</a> <a id="5969" class="Symbol">=</a> <a id="5971" href="Data.List.Properties.html#36845" class="Function">L.filter-reject</a> <a id="5987" class="Symbol">((</a><a id="5989" href="Protocol.Streamlet.Local.State.html#5962" class="Bound">b</a> <a id="5991" href="Prelude.DecEq.html#123" class="Field Operator">≟_</a><a id="5993" class="Symbol">)</a> <a id="5995" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="5997" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">_∙block</a><a id="6004" class="Symbol">)</a> <a id="6006" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6008" href="Relation.Binary.PropositionalEquality.Core.html#2329" class="Function">Eq.≢-sym</a>

<a id="6018" class="Comment">-- voteIds</a>
<a id="voteIds-∷˘"></a><a id="6029" href="Protocol.Streamlet.Local.State.html#6029" class="Function">voteIds-∷˘</a> <a id="6040" class="Symbol">:</a> <a id="6042" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="6044" href="Protocol.Streamlet.Block.html#2305" class="Field Operator">∙pid</a> <a id="6049" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="6051" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a> <a id="6053" class="Symbol">→</a> <a id="6055" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a> <a id="6057" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="6059" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="6067" class="Symbol">(</a><a id="6068" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="6070" class="InductiveConstructor Operator">∷</a> <a id="6072" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="6074" class="Symbol">)</a> <a id="6076" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="6078" class="Symbol">→</a> <a id="6080" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a> <a id="6082" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="6084" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="6092" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="6095" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a>
<a id="6097" href="Protocol.Streamlet.Local.State.html#6029" class="Function">voteIds-∷˘</a> <a id="6108" class="Symbol">{</a><a id="6109" class="Argument">m</a> <a id="6111" class="Symbol">=</a> <a id="6113" href="Protocol.Streamlet.Local.State.html#6113" class="Bound">m</a><a id="6114" class="Symbol">}</a> <a id="6116" class="Symbol">{</a><a id="6117" class="Argument">b</a> <a id="6119" class="Symbol">=</a> <a id="6121" href="Protocol.Streamlet.Local.State.html#6121" class="Bound">b</a><a id="6122" class="Symbol">}</a> <a id="6124" href="Protocol.Streamlet.Local.State.html#6124" class="Bound">p≢</a> <a id="6127" href="Protocol.Streamlet.Local.State.html#6127" class="Bound">p∈</a> <a id="6130" class="Keyword">with</a> <a id="6135" href="Protocol.Streamlet.Local.State.html#6121" class="Bound">b</a> <a id="6137" href="Prelude.DecEq.html#123" class="Field Operator">≟</a> <a id="6139" href="Protocol.Streamlet.Local.State.html#6113" class="Bound">m</a> <a id="6141" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="6148" class="Symbol">|</a> <a id="6150" href="Protocol.Streamlet.Local.State.html#6127" class="Bound">p∈</a>
<a id="6153" class="Symbol">...</a> <a id="6157" class="Symbol">|</a> <a id="6159" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="6163" class="Symbol">_</a> <a id="6165" class="Symbol">|</a> <a id="6167" href="Data.List.Relation.Unary.Any.html#1226" class="InductiveConstructor">here</a> <a id="6172" href="Protocol.Streamlet.Local.State.html#6172" class="Bound">≡p</a> <a id="6175" class="Symbol">=</a> <a id="6177" href="Data.Empty.html#1050" class="Function">⊥-elim</a> <a id="6184" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6186" class="Bound">p≢</a> <a id="6189" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6191" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a> <a id="6195" href="Protocol.Streamlet.Local.State.html#6172" class="Bound">≡p</a>
<a id="6198" class="Symbol">...</a> <a id="6202" class="Symbol">|</a> <a id="6204" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="6208" class="Symbol">_</a> <a id="6210" class="Symbol">|</a> <a id="6212" href="Data.List.Relation.Unary.Any.html#1279" class="InductiveConstructor">there</a> <a id="6218" href="Protocol.Streamlet.Local.State.html#6218" class="Bound">p</a> <a id="6220" class="Symbol">=</a> <a id="6222" href="Protocol.Streamlet.Local.State.html#6218" class="Bound">p</a>
<a id="6224" class="Symbol">...</a> <a id="6228" class="Symbol">|</a> <a id="6230" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a>  <a id="6234" class="Symbol">_</a> <a id="6236" class="Symbol">|</a> <a id="6238" href="Protocol.Streamlet.Local.State.html#6238" class="Bound">p</a>       <a id="6246" class="Symbol">=</a> <a id="6248" href="Protocol.Streamlet.Local.State.html#6238" class="Bound">p</a>

<a id="voteIds-∷˘′"></a><a id="6251" href="Protocol.Streamlet.Local.State.html#6251" class="Function">voteIds-∷˘′</a> <a id="6263" class="Symbol">:</a> <a id="6265" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="6267" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="6274" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="6276" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="6278" class="Symbol">→</a> <a id="6280" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a> <a id="6282" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="6284" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="6292" class="Symbol">(</a><a id="6293" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="6295" class="InductiveConstructor Operator">∷</a> <a id="6297" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="6299" class="Symbol">)</a> <a id="6301" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="6303" class="Symbol">→</a> <a id="6305" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a> <a id="6307" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="6309" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="6317" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="6320" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a>
<a id="6322" href="Protocol.Streamlet.Local.State.html#6251" class="Function">voteIds-∷˘′</a> <a id="6334" class="Symbol">=</a> <a id="6336" href="Relation.Binary.PropositionalEquality.Core.html#1808" class="Function">subst</a> <a id="6342" class="Symbol">((_</a> <a id="6346" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈_</a><a id="6348" class="Symbol">)</a> <a id="6350" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6352" href="Data.List.Base.html#1631" class="Function">map</a> <a id="6356" class="Symbol">_)</a> <a id="6359" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="6361" href="Protocol.Streamlet.Local.State.html#5879" class="Function">votes-reject</a> <a id="6374" class="Symbol">_</a> <a id="6376" class="Symbol">_</a>

<a id="voteIds-head"></a><a id="6379" href="Protocol.Streamlet.Local.State.html#6379" class="Function">voteIds-head</a> <a id="6392" class="Symbol">:</a> <a id="6394" class="Symbol">∀</a> <a id="6396" href="Protocol.Streamlet.Local.State.html#6396" class="Bound">b</a> <a id="6398" class="Symbol">→</a> <a id="6400" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a> <a id="6402" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="6404" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="6412" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="6415" href="Protocol.Streamlet.Local.State.html#6396" class="Bound">b</a> <a id="6417" class="Symbol">→</a> <a id="6419" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a> <a id="6421" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="6423" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="6431" class="Symbol">(</a><a id="6432" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="6434" class="InductiveConstructor Operator">∷</a> <a id="6436" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="6438" class="Symbol">)</a> <a id="6440" href="Protocol.Streamlet.Local.State.html#6396" class="Bound">b</a>
             <a id="6455" class="Symbol">→</a> <a id="6457" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="6459" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="6466" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6468" href="Protocol.Streamlet.Local.State.html#6396" class="Bound">b</a> <a id="6470" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6472" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="6474" href="Protocol.Streamlet.Block.html#2305" class="Field Operator">∙pid</a> <a id="6479" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6481" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a>
<a id="6483" href="Protocol.Streamlet.Local.State.html#6379" class="Function">voteIds-head</a> <a id="6496" class="Symbol">{</a><a id="6497" class="Argument">p</a> <a id="6499" class="Symbol">=</a> <a id="6501" href="Protocol.Streamlet.Local.State.html#6501" class="Bound">p</a><a id="6502" class="Symbol">}</a> <a id="6504" class="Symbol">{</a><a id="6505" class="Argument">m</a> <a id="6507" class="Symbol">=</a> <a id="6509" href="Protocol.Streamlet.Local.State.html#6509" class="Bound">m</a><a id="6510" class="Symbol">}</a> <a id="6512" href="Protocol.Streamlet.Local.State.html#6512" class="Bound">b</a> <a id="6514" href="Protocol.Streamlet.Local.State.html#6514" class="Bound">p∉</a> <a id="6517" href="Protocol.Streamlet.Local.State.html#6517" class="Bound">p∈</a> <a id="6520" class="Symbol">=</a>
  <a id="6524" href="Function.Base.html#4042" class="Function Operator">case</a> <a id="6529" class="Symbol">(</a><a id="6530" href="Protocol.Streamlet.Local.State.html#6509" class="Bound">m</a> <a id="6532" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="6539" href="Prelude.DecEq.html#123" class="Field Operator">≟</a> <a id="6541" href="Protocol.Streamlet.Local.State.html#6512" class="Bound">b</a><a id="6542" class="Symbol">)</a> <a id="6544" href="Data.Product.Base.html#1686" class="Function Operator">,′</a> <a id="6547" class="Symbol">(</a><a id="6548" href="Protocol.Streamlet.Local.State.html#6509" class="Bound">m</a> <a id="6550" href="Protocol.Streamlet.Block.html#2305" class="Field Operator">∙pid</a> <a id="6555" href="Prelude.DecEq.html#123" class="Field Operator">≟</a> <a id="6557" href="Protocol.Streamlet.Local.State.html#6501" class="Bound">p</a><a id="6558" class="Symbol">)</a> <a id="6560" href="Function.Base.html#4042" class="Function Operator">of</a> <a id="6563" class="Symbol">λ</a> <a id="6565" class="Keyword">where</a>
    <a id="6575" class="Symbol">(</a><a id="6576" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="6580" href="Protocol.Streamlet.Local.State.html#6580" class="Bound">b≡</a> <a id="6583" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6585" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="6589" href="Protocol.Streamlet.Local.State.html#6589" class="Bound">p≡</a><a id="6591" class="Symbol">)</a> <a id="6593" class="Symbol">→</a> <a id="6595" href="Protocol.Streamlet.Local.State.html#6580" class="Bound">b≡</a> <a id="6598" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6600" href="Protocol.Streamlet.Local.State.html#6589" class="Bound">p≡</a>
    <a id="6607" class="Symbol">(</a><a id="6608" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="6612" class="Symbol">_</a>  <a id="6615" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6617" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a>  <a id="6621" href="Protocol.Streamlet.Local.State.html#6621" class="Bound">p≢</a><a id="6623" class="Symbol">)</a> <a id="6625" class="Symbol">→</a> <a id="6627" href="Data.Empty.html#1050" class="Function">⊥-elim</a> <a id="6634" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6636" href="Protocol.Streamlet.Local.State.html#6514" class="Bound">p∉</a> <a id="6639" class="Symbol">(</a><a id="6640" href="Protocol.Streamlet.Local.State.html#6029" class="Function">voteIds-∷˘</a>  <a id="6652" class="Symbol">{</a><a id="6653" class="Argument">b</a> <a id="6655" class="Symbol">=</a> <a id="6657" href="Protocol.Streamlet.Local.State.html#6512" class="Bound">b</a><a id="6658" class="Symbol">}</a> <a id="6660" href="Protocol.Streamlet.Local.State.html#6621" class="Bound">p≢</a> <a id="6663" href="Protocol.Streamlet.Local.State.html#6517" class="Bound">p∈</a><a id="6665" class="Symbol">)</a>
    <a id="6671" class="Symbol">(</a><a id="6672" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a>  <a id="6676" href="Protocol.Streamlet.Local.State.html#6676" class="Bound">b≢</a> <a id="6679" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6681" class="Symbol">_)</a>      <a id="6689" class="Symbol">→</a> <a id="6691" href="Data.Empty.html#1050" class="Function">⊥-elim</a> <a id="6698" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6700" href="Protocol.Streamlet.Local.State.html#6514" class="Bound">p∉</a> <a id="6703" class="Symbol">(</a><a id="6704" href="Protocol.Streamlet.Local.State.html#6251" class="Function">voteIds-∷˘′</a> <a id="6716" class="Symbol">{</a><a id="6717" class="Argument">b</a> <a id="6719" class="Symbol">=</a> <a id="6721" href="Protocol.Streamlet.Local.State.html#6512" class="Bound">b</a><a id="6722" class="Symbol">}</a> <a id="6724" href="Protocol.Streamlet.Local.State.html#6676" class="Bound">b≢</a> <a id="6727" href="Protocol.Streamlet.Local.State.html#6517" class="Bound">p∈</a><a id="6729" class="Symbol">)</a>

<a id="voteIds⁻"></a><a id="6732" href="Protocol.Streamlet.Local.State.html#6732" class="Function">voteIds⁻</a> <a id="6741" class="Symbol">:</a> <a id="6743" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a> <a id="6745" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="6747" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="6755" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="6758" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="6760" class="Symbol">→</a> <a id="6762" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="6764" class="Symbol">(λ</a> <a id="6767" href="Protocol.Streamlet.Local.State.html#6767" class="Bound">m</a> <a id="6769" class="Symbol">→</a> <a id="6771" href="Protocol.Streamlet.Local.State.html#6767" class="Bound">m</a> <a id="6773" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="6775" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="6778" href="Data.Product.Base.html#1618" class="Function Operator">×</a> <a id="6780" href="Protocol.Streamlet.Local.State.html#6767" class="Bound">m</a> <a id="6782" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">∙signedBlock</a> <a id="6795" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="6797" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="6799" href="Protocol.Streamlet.Block.html#1227" class="InductiveConstructor Operator">signed-by</a> <a id="6809" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a><a id="6810" class="Symbol">)</a>
<a id="6812" href="Protocol.Streamlet.Local.State.html#6732" class="Function">voteIds⁻</a> <a id="6821" class="Symbol">{</a><a id="6822" href="Protocol.Streamlet.Local.State.html#6822" class="Bound">p</a><a id="6823" class="Symbol">}{</a><a id="6825" href="Protocol.Streamlet.Local.State.html#6825" class="Bound">m</a> <a id="6827" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="6829" href="Protocol.Streamlet.Local.State.html#6829" class="Bound">ms</a><a id="6831" class="Symbol">}{</a><a id="6833" href="Protocol.Streamlet.Local.State.html#6833" class="Bound">b</a><a id="6834" class="Symbol">}</a> <a id="6836" href="Protocol.Streamlet.Local.State.html#6836" class="Bound">p∈</a>
  <a id="6841" class="Keyword">with</a> <a id="6846" href="Protocol.Streamlet.Local.State.html#6825" class="Bound">m</a> <a id="6848" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="6855" href="Prelude.DecEq.html#123" class="Field Operator">≟</a> <a id="6857" href="Protocol.Streamlet.Local.State.html#6833" class="Bound">b</a>
<a id="6859" class="Symbol">...</a> <a id="6863" class="Symbol">|</a> <a id="6865" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a> <a id="6868" href="Protocol.Streamlet.Local.State.html#6868" class="Bound">m≢</a> <a id="6871" class="Symbol">=</a>
  <a id="6875" class="Keyword">let</a> <a id="6879" href="Protocol.Streamlet.Local.State.html#6879" class="Bound">m&#39;</a> <a id="6882" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6884" href="Protocol.Streamlet.Local.State.html#6884" class="Bound">m&#39;∈</a> <a id="6888" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6890" href="Protocol.Streamlet.Local.State.html#6890" class="Bound">eq</a> <a id="6893" class="Symbol">=</a> <a id="6895" href="Protocol.Streamlet.Local.State.html#6732" class="Function">voteIds⁻</a> <a id="6904" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="6906" href="Protocol.Streamlet.Local.State.html#6251" class="Function">voteIds-∷˘′</a> <a id="6918" href="Protocol.Streamlet.Local.State.html#6868" class="Bound">m≢</a> <a id="6921" class="Bound">p∈</a>
  <a id="6926" class="Keyword">in</a>  <a id="6930" href="Protocol.Streamlet.Local.State.html#6879" class="Bound">m&#39;</a> <a id="6933" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6935" href="Data.List.Relation.Unary.Any.html#1279" class="InductiveConstructor">there</a> <a id="6941" href="Protocol.Streamlet.Local.State.html#6884" class="Bound">m&#39;∈</a> <a id="6945" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="6947" href="Protocol.Streamlet.Local.State.html#6890" class="Bound">eq</a>
<a id="6950" class="Symbol">...</a> <a id="6954" class="Symbol">|</a> <a id="6956" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="6960" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="6967" class="Keyword">with</a> <a id="6972" class="Bound">m</a> <a id="6974" href="Protocol.Streamlet.Block.html#2305" class="Field Operator">∙pid</a> <a id="6979" href="Prelude.DecEq.html#123" class="Field Operator">≟</a> <a id="6981" class="Bound">p</a>
<a id="6983" class="Symbol">...</a> <a id="6987" class="Symbol">|</a> <a id="6989" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="6993" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="6998" class="Symbol">=</a> <a id="7000" class="Bound">m</a> <a id="7002" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7004" href="Data.List.Relation.Unary.Any.html#1226" class="InductiveConstructor">here</a> <a id="7009" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7014" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7016" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
<a id="7021" class="Symbol">...</a> <a id="7025" class="Symbol">|</a> <a id="7027" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a> <a id="7030" href="Protocol.Streamlet.Local.State.html#7030" class="Bound">p≢</a> <a id="7033" class="Symbol">=</a>
  <a id="7037" class="Keyword">let</a> <a id="7041" href="Protocol.Streamlet.Local.State.html#7041" class="Bound">m&#39;</a> <a id="7044" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7046" href="Protocol.Streamlet.Local.State.html#7046" class="Bound">m&#39;∈</a> <a id="7050" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7052" href="Protocol.Streamlet.Local.State.html#7052" class="Bound">eq</a> <a id="7055" class="Symbol">=</a> <a id="7057" href="Protocol.Streamlet.Local.State.html#6732" class="Function">voteIds⁻</a> <a id="7066" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="7068" href="Protocol.Streamlet.Local.State.html#6029" class="Function">voteIds-∷˘</a> <a id="7079" class="Symbol">{</a><a id="7080" class="Argument">b</a> <a id="7082" class="Symbol">=</a> <a id="7084" class="Bound">b</a><a id="7085" class="Symbol">}</a> <a id="7087" href="Protocol.Streamlet.Local.State.html#7030" class="Bound">p≢</a> <a id="7090" class="Bound">p∈</a>
  <a id="7095" class="Keyword">in</a>  <a id="7099" href="Protocol.Streamlet.Local.State.html#7041" class="Bound">m&#39;</a> <a id="7102" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7104" href="Data.List.Relation.Unary.Any.html#1279" class="InductiveConstructor">there</a> <a id="7110" href="Protocol.Streamlet.Local.State.html#7046" class="Bound">m&#39;∈</a> <a id="7114" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="7116" href="Protocol.Streamlet.Local.State.html#7052" class="Bound">eq</a>

<a id="voteIds-here"></a><a id="7120" href="Protocol.Streamlet.Local.State.html#7120" class="Function">voteIds-here</a> <a id="7133" class="Symbol">:</a> <a id="7135" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="7137" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7139" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="7141" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="7148" class="Symbol">→</a> <a id="7150" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a> <a id="7152" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7154" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="7156" href="Protocol.Streamlet.Block.html#2305" class="Field Operator">∙pid</a> <a id="7161" class="Symbol">→</a> <a id="7163" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a> <a id="7165" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="7167" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="7175" class="Symbol">(</a><a id="7176" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="7178" class="InductiveConstructor Operator">∷</a> <a id="7180" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="7182" class="Symbol">)</a> <a id="7184" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a>
<a id="7186" href="Protocol.Streamlet.Local.State.html#7120" class="Function">voteIds-here</a> <a id="7199" class="Symbol">{</a><a id="7200" class="Argument">m</a> <a id="7202" class="Symbol">=</a> <a id="7204" href="Protocol.Streamlet.Local.State.html#7204" class="Bound">m</a><a id="7205" class="Symbol">}</a> <a id="7207" class="Symbol">{</a><a id="7208" class="Argument">ms</a> <a id="7211" class="Symbol">=</a> <a id="7213" href="Protocol.Streamlet.Local.State.html#7213" class="Bound">ms</a><a id="7215" class="Symbol">}</a> <a id="7217" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a> <a id="7222" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="7229" class="Keyword">rewrite</a> <a id="7237" href="Protocol.Streamlet.Local.State.html#5745" class="Function">votes-accept</a> <a id="7250" href="Protocol.Streamlet.Local.State.html#7204" class="Bound">m</a> <a id="7252" href="Protocol.Streamlet.Local.State.html#7213" class="Bound">ms</a> <a id="7255" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>
  <a id="7262" class="Symbol">=</a> <a id="7264" href="Data.List.Relation.Unary.Any.html#1226" class="InductiveConstructor">here</a> <a id="7269" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a>

<a id="voteIds-there"></a><a id="7275" href="Protocol.Streamlet.Local.State.html#7275" class="Function">voteIds-there</a> <a id="7289" class="Symbol">:</a> <a id="7291" class="Symbol">∀</a> <a id="7293" href="Protocol.Streamlet.Local.State.html#7293" class="Bound">b</a> <a id="7295" class="Symbol">→</a> <a id="7297" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a> <a id="7299" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="7301" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="7309" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="7312" href="Protocol.Streamlet.Local.State.html#7293" class="Bound">b</a> <a id="7314" class="Symbol">→</a> <a id="7316" href="Protocol.Streamlet.Local.Chain.html#426" class="Generalizable">p</a> <a id="7318" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="7320" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="7328" class="Symbol">(</a><a id="7329" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="7331" class="InductiveConstructor Operator">∷</a> <a id="7333" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="7335" class="Symbol">)</a> <a id="7337" href="Protocol.Streamlet.Local.State.html#7293" class="Bound">b</a>
<a id="7339" href="Protocol.Streamlet.Local.State.html#7275" class="Function">voteIds-there</a> <a id="7353" class="Symbol">{</a><a id="7354" class="Argument">ms</a> <a id="7357" class="Symbol">=</a> <a id="7359" href="Protocol.Streamlet.Local.State.html#7359" class="Bound">ms</a><a id="7361" class="Symbol">}</a> <a id="7363" class="Symbol">{</a><a id="7364" class="Argument">m</a> <a id="7366" class="Symbol">=</a> <a id="7368" href="Protocol.Streamlet.Local.State.html#7368" class="Bound">m</a><a id="7369" class="Symbol">}</a> <a id="7371" href="Protocol.Streamlet.Local.State.html#7371" class="Bound">b</a> <a id="7373" href="Protocol.Streamlet.Local.State.html#7373" class="Bound">p∈</a>
  <a id="7378" class="Keyword">with</a> <a id="7383" href="Protocol.Streamlet.Local.State.html#7368" class="Bound">m</a> <a id="7385" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="7392" href="Prelude.DecEq.html#123" class="Field Operator">≟</a> <a id="7394" href="Protocol.Streamlet.Local.State.html#7371" class="Bound">b</a>
<a id="7396" class="Symbol">...</a> <a id="7400" class="Symbol">|</a> <a id="7402" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="7406" href="Protocol.Streamlet.Local.State.html#7406" class="Bound">b≡</a> <a id="7409" class="Keyword">rewrite</a> <a id="7417" href="Protocol.Streamlet.Local.State.html#5745" class="Function">votes-accept</a> <a id="7430" class="Bound">m</a> <a id="7432" class="Bound">ms</a> <a id="7435" href="Protocol.Streamlet.Local.State.html#7406" class="Bound">b≡</a> <a id="7438" class="Symbol">=</a> <a id="7440" href="Data.List.Relation.Unary.Any.html#1279" class="InductiveConstructor">there</a> <a id="7446" class="Bound">p∈</a>
<a id="7449" class="Symbol">...</a> <a id="7453" class="Symbol">|</a> <a id="7455" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a>  <a id="7459" href="Protocol.Streamlet.Local.State.html#7459" class="Bound">b≢</a> <a id="7462" class="Keyword">rewrite</a> <a id="7470" href="Protocol.Streamlet.Local.State.html#5879" class="Function">votes-reject</a> <a id="7483" class="Bound">m</a> <a id="7485" class="Bound">ms</a> <a id="7488" href="Protocol.Streamlet.Local.State.html#7459" class="Bound">b≢</a> <a id="7491" class="Symbol">=</a> <a id="7493" class="Bound">p∈</a>

<a id="voteIds-accept∈"></a><a id="7497" href="Protocol.Streamlet.Local.State.html#7497" class="Function">voteIds-accept∈</a> <a id="7513" class="Symbol">:</a> <a id="7515" class="Symbol">∀</a> <a id="7517" class="Symbol">{</a><a id="7518" href="Protocol.Streamlet.Local.State.html#7518" class="Bound">m</a> <a id="7520" href="Protocol.Streamlet.Local.State.html#7520" class="Bound">ms</a> <a id="7523" href="Protocol.Streamlet.Local.State.html#7523" class="Bound">b</a> <a id="7525" href="Protocol.Streamlet.Local.State.html#7525" class="Bound">p</a><a id="7526" class="Symbol">}</a> <a id="7528" class="Symbol">→</a>
  <a id="7532" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="7534" href="Protocol.Streamlet.Local.State.html#7518" class="Bound">m</a> <a id="7536" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="7538" href="Protocol.Streamlet.Local.State.html#7520" class="Bound">ms</a>
  <a id="7543" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="7545" href="Protocol.Streamlet.Local.State.html#7523" class="Bound">b</a> <a id="7547" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7549" href="Protocol.Streamlet.Local.State.html#7518" class="Bound">m</a> <a id="7551" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a>
  <a id="7560" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="7562" href="Protocol.Streamlet.Local.State.html#7525" class="Bound">p</a> <a id="7564" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="7566" href="Protocol.Streamlet.Local.State.html#7518" class="Bound">m</a> <a id="7568" href="Protocol.Streamlet.Block.html#2305" class="Field Operator">∙pid</a>
  <a id="7575" href="Prelude.InferenceRules.html#14143" class="Function Operator">──────────────────</a>
    <a id="7598" href="Protocol.Streamlet.Local.State.html#7525" class="Bound">p</a> <a id="7600" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="7602" href="Protocol.Streamlet.Local.State.html#2919" class="Function">voteIds</a> <a id="7610" href="Protocol.Streamlet.Local.State.html#7520" class="Bound">ms</a> <a id="7613" href="Protocol.Streamlet.Local.State.html#7523" class="Bound">b</a>
<a id="7615" href="Protocol.Streamlet.Local.State.html#7497" class="Function">voteIds-accept∈</a> <a id="7631" class="Symbol">{</a><a id="7632" class="Argument">b</a> <a id="7634" class="Symbol">=</a> <a id="7636" href="Protocol.Streamlet.Local.State.html#7636" class="Bound">b</a><a id="7637" class="Symbol">}</a> <a id="7639" class="Symbol">=</a> <a id="7641" class="Symbol">λ</a> <a id="7643" class="Keyword">where</a>
  <a id="7651" class="Symbol">(</a><a id="7652" href="Data.List.Relation.Unary.Any.html#1226" class="InductiveConstructor">here</a> <a id="7657" href="Agda.Builtin.Equality.html#207" class="InductiveConstructor">refl</a><a id="7661" class="Symbol">)</a> <a id="7663" class="Symbol">→</a> <a id="7665" href="Protocol.Streamlet.Local.State.html#7120" class="Function">voteIds-here</a>
  <a id="7680" class="Symbol">(</a><a id="7681" href="Data.List.Relation.Unary.Any.html#1279" class="InductiveConstructor">there</a> <a id="7687" href="Protocol.Streamlet.Local.State.html#7687" class="Bound">m∈</a><a id="7689" class="Symbol">)</a>  <a id="7692" class="Symbol">→</a> <a id="7694" href="Protocol.Streamlet.Local.State.html#7275" class="Function">voteIds-there</a> <a id="7708" href="Protocol.Streamlet.Local.State.html#7636" class="Bound">b</a> <a id="7710" href="Function.Base.html#1303" class="Function Operator">∘₂</a> <a id="7713" href="Protocol.Streamlet.Local.State.html#7497" class="Function">voteIds-accept∈</a> <a id="7729" href="Protocol.Streamlet.Local.State.html#7687" class="Bound">m∈</a>

<a id="7733" class="Comment">-- NotarizedBlock</a>
<a id="NotarizedBlock-∷"></a><a id="7751" href="Protocol.Streamlet.Local.State.html#7751" class="Function">NotarizedBlock-∷</a> <a id="7768" class="Symbol">:</a> <a id="7770" href="Protocol.Streamlet.Local.State.html#3174" class="Record">NotarizedBlock</a> <a id="7785" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="7788" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="7790" class="Symbol">→</a> <a id="7792" href="Protocol.Streamlet.Local.State.html#3174" class="Record">NotarizedBlock</a> <a id="7807" class="Symbol">(</a><a id="7808" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="7810" class="InductiveConstructor Operator">∷</a> <a id="7812" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="7814" class="Symbol">)</a> <a id="7816" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a>
<a id="7818" href="Protocol.Streamlet.Local.State.html#7751" class="Function">NotarizedBlock-∷</a> <a id="7835" class="Symbol">{</a><a id="7836" class="Argument">b</a> <a id="7838" class="Symbol">=</a> <a id="7840" href="Protocol.Streamlet.Local.State.html#7840" class="Bound">b</a><a id="7841" class="Symbol">}</a> <a id="7843" class="Symbol">{</a><a id="7844" class="Argument">m</a> <a id="7846" class="Symbol">=</a> <a id="7848" href="Protocol.Streamlet.Local.State.html#7848" class="Bound">m</a><a id="7849" class="Symbol">}</a> <a id="7851" class="Symbol">(</a><a id="7852" class="Keyword">record</a> <a id="7859" class="Symbol">{</a><a id="7860" href="Protocol.Streamlet.Local.State.html#3215" class="Field">enoughVotes</a> <a id="7872" class="Symbol">=</a> <a id="7874" href="Protocol.Streamlet.Local.State.html#7874" class="Bound">IH</a><a id="7876" class="Symbol">})</a> <a id="7879" class="Symbol">.</a><a id="7880" href="Protocol.Streamlet.Local.State.html#3215" class="Field">enoughVotes</a>
  <a id="7894" class="Keyword">with</a> <a id="7899" href="Protocol.Streamlet.Local.State.html#7840" class="Bound">b</a> <a id="7901" href="Prelude.DecEq.html#123" class="Field Operator">≟</a> <a id="7903" href="Protocol.Streamlet.Local.State.html#7848" class="Bound">m</a> <a id="7905" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a>
<a id="7912" class="Symbol">...</a> <a id="7916" class="Symbol">|</a> <a id="7918" href="Relation.Nullary.Decidable.Core.html#1655" class="InductiveConstructor">no</a>  <a id="7922" class="Symbol">_</a> <a id="7924" class="Symbol">=</a> <a id="7926" class="Bound">IH</a>
<a id="7929" class="Symbol">...</a> <a id="7933" class="Symbol">|</a> <a id="7935" href="Relation.Nullary.Decidable.Core.html#1618" class="InductiveConstructor">yes</a> <a id="7939" class="Symbol">_</a> <a id="7941" class="Symbol">=</a> <a id="7943" href="Protocol.Streamlet.Assumptions.html#2041" class="Function">majority-∷</a> <a id="7954" class="Bound">IH</a>

<a id="NotarizedBlock-∷˘"></a><a id="7958" href="Protocol.Streamlet.Local.State.html#7958" class="Function">NotarizedBlock-∷˘</a> <a id="7976" class="Symbol">:</a> <a id="7978" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="7980" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="7987" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="7989" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="7991" class="Symbol">→</a> <a id="7993" href="Protocol.Streamlet.Local.State.html#3174" class="Record">NotarizedBlock</a> <a id="8008" class="Symbol">(</a><a id="8009" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="8011" class="InductiveConstructor Operator">∷</a> <a id="8013" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="8015" class="Symbol">)</a> <a id="8017" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="8019" class="Symbol">→</a> <a id="8021" href="Protocol.Streamlet.Local.State.html#3174" class="Record">NotarizedBlock</a> <a id="8036" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="8039" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a>
<a id="8041" href="Protocol.Streamlet.Local.State.html#7958" class="Function">NotarizedBlock-∷˘</a> <a id="8059" class="Symbol">{</a><a id="8060" href="Protocol.Streamlet.Local.State.html#8060" class="Bound">m</a><a id="8061" class="Symbol">}{</a><a id="8063" href="Protocol.Streamlet.Local.State.html#8063" class="Bound">b</a><a id="8064" class="Symbol">}{</a><a id="8066" href="Protocol.Streamlet.Local.State.html#8066" class="Bound">ms</a><a id="8068" class="Symbol">}</a> <a id="8070" href="Protocol.Streamlet.Local.State.html#8070" class="Bound">b≢</a> <a id="8073" href="Protocol.Streamlet.Local.State.html#8073" class="Bound">nb</a> <a id="8076" class="Symbol">.</a><a id="8077" href="Protocol.Streamlet.Local.State.html#3215" class="Field">enoughVotes</a> <a id="8089" class="Symbol">=</a>
  <a id="8093" href="Relation.Binary.PropositionalEquality.Core.html#1808" class="Function">subst</a> <a id="8099" href="Protocol.Streamlet.Assumptions.html#880" class="Function">IsMajority</a> <a id="8110" class="Symbol">(</a><a id="8111" href="Protocol.Streamlet.Local.State.html#5879" class="Function">votes-reject</a> <a id="8124" class="Symbol">_</a> <a id="8126" class="Symbol">_</a> <a id="8128" href="Protocol.Streamlet.Local.State.html#8070" class="Bound">b≢</a><a id="8130" class="Symbol">)</a> <a id="8132" class="Symbol">(</a><a id="8133" href="Protocol.Streamlet.Local.State.html#8073" class="Bound">nb</a> <a id="8136" class="Symbol">.</a><a id="8137" href="Protocol.Streamlet.Local.State.html#3215" class="Field">enoughVotes</a><a id="8148" class="Symbol">)</a>


<a id="8152" class="Comment">-- NotarizedChain</a>
<a id="NotarizedChain-∷"></a><a id="8170" href="Protocol.Streamlet.Local.State.html#8170" class="Function">NotarizedChain-∷</a> <a id="8187" class="Symbol">:</a> <a id="8189" href="Protocol.Streamlet.Local.State.html#3613" class="Function">NotarizedChain</a> <a id="8204" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="8207" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="8210" class="Symbol">→</a> <a id="8212" href="Protocol.Streamlet.Local.State.html#3613" class="Function">NotarizedChain</a> <a id="8227" class="Symbol">(</a><a id="8228" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="8230" class="InductiveConstructor Operator">∷</a> <a id="8232" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="8234" class="Symbol">)</a> <a id="8236" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
<a id="8239" href="Protocol.Streamlet.Local.State.html#8170" class="Function">NotarizedChain-∷</a> <a id="8256" class="Symbol">=</a> <a id="8258" class="Symbol">λ</a> <a id="8260" class="Keyword">where</a>
  <a id="8268" href="Data.List.Relation.Unary.All.html#1690" class="InductiveConstructor">[]</a> <a id="8271" class="Symbol">→</a> <a id="8273" href="Data.List.Relation.Unary.All.html#1690" class="InductiveConstructor">[]</a>
  <a id="8278" class="Symbol">(</a><a id="8279" href="Protocol.Streamlet.Local.State.html#8279" class="Bound">px</a> <a id="8282" href="Data.List.Relation.Unary.All.html#1707" class="InductiveConstructor Operator">∷</a> <a id="8284" href="Protocol.Streamlet.Local.State.html#8284" class="Bound">p</a><a id="8285" class="Symbol">)</a> <a id="8287" class="Symbol">→</a> <a id="8289" href="Protocol.Streamlet.Local.State.html#7751" class="Function">NotarizedBlock-∷</a> <a id="8306" href="Protocol.Streamlet.Local.State.html#8279" class="Bound">px</a> <a id="8309" href="Data.List.Relation.Unary.All.html#1707" class="InductiveConstructor Operator">∷</a> <a id="8311" href="Protocol.Streamlet.Local.State.html#8170" class="Function">NotarizedChain-∷</a> <a id="8328" href="Protocol.Streamlet.Local.State.html#8284" class="Bound">p</a>

<a id="NotarizedChain-∷˘"></a><a id="8331" href="Protocol.Streamlet.Local.State.html#8331" class="Function">NotarizedChain-∷˘</a> <a id="8349" class="Symbol">:</a>
  <a id="8353" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="8355" href="Prelude.Allable.html#210" class="Field">All</a> <a id="8359" class="Symbol">(</a><a id="8360" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="8362" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="8369" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢_</a><a id="8371" class="Symbol">)</a> <a id="8373" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
  <a id="8378" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="8380" href="Protocol.Streamlet.Local.State.html#3613" class="Function">NotarizedChain</a> <a id="8395" class="Symbol">(</a><a id="8396" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="8398" class="InductiveConstructor Operator">∷</a> <a id="8400" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="8402" class="Symbol">)</a> <a id="8404" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
    <a id="8411" href="Prelude.InferenceRules.html#13923" class="Function Operator">──────────────────────────</a>
    <a id="8442" href="Protocol.Streamlet.Local.State.html#3613" class="Function">NotarizedChain</a> <a id="8457" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="8460" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
<a id="8463" href="Protocol.Streamlet.Local.State.html#8331" class="Function">NotarizedChain-∷˘</a> <a id="8481" class="Symbol">=</a> <a id="8483" class="Symbol">λ</a> <a id="8485" class="Keyword">where</a>
  <a id="8493" href="Data.List.Relation.Unary.All.html#1690" class="InductiveConstructor">[]</a> <a id="8496" href="Data.List.Relation.Unary.All.html#1690" class="InductiveConstructor">[]</a> <a id="8499" class="Symbol">→</a> <a id="8501" href="Data.List.Relation.Unary.All.html#1690" class="InductiveConstructor">[]</a>
  <a id="8506" class="Symbol">(</a><a id="8507" href="Protocol.Streamlet.Local.State.html#8507" class="Bound">b≢</a> <a id="8510" href="Data.List.Relation.Unary.All.html#1707" class="InductiveConstructor Operator">∷</a> <a id="8512" href="Protocol.Streamlet.Local.State.html#8512" class="Bound">ms≢</a><a id="8515" class="Symbol">)</a> <a id="8517" class="Symbol">(</a><a id="8518" href="Protocol.Streamlet.Local.State.html#8518" class="Bound">px</a> <a id="8521" href="Data.List.Relation.Unary.All.html#1707" class="InductiveConstructor Operator">∷</a> <a id="8523" href="Protocol.Streamlet.Local.State.html#8523" class="Bound">p</a><a id="8524" class="Symbol">)</a> <a id="8526" class="Symbol">→</a> <a id="8528" href="Protocol.Streamlet.Local.State.html#7958" class="Function">NotarizedBlock-∷˘</a> <a id="8546" href="Protocol.Streamlet.Local.State.html#8507" class="Bound">b≢</a> <a id="8549" href="Protocol.Streamlet.Local.State.html#8518" class="Bound">px</a> <a id="8552" href="Data.List.Relation.Unary.All.html#1707" class="InductiveConstructor Operator">∷</a> <a id="8554" href="Protocol.Streamlet.Local.State.html#8331" class="Function">NotarizedChain-∷˘</a> <a id="8572" href="Protocol.Streamlet.Local.State.html#8512" class="Bound">ms≢</a> <a id="8576" href="Protocol.Streamlet.Local.State.html#8523" class="Bound">p</a>

<a id="NotarizedChain-∉"></a><a id="8579" href="Protocol.Streamlet.Local.State.html#8579" class="Function">NotarizedChain-∉</a> <a id="8596" class="Symbol">:</a>
  <a id="8600" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="8602" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="8604" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="8611" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="8613" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
  <a id="8618" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="8620" href="Protocol.Streamlet.Local.State.html#3613" class="Function">NotarizedChain</a> <a id="8635" class="Symbol">(</a><a id="8636" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="8638" class="InductiveConstructor Operator">∷</a> <a id="8640" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="8642" class="Symbol">)</a> <a id="8644" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
    <a id="8651" href="Prelude.InferenceRules.html#13923" class="Function Operator">──────────────────────────</a>
    <a id="8682" href="Protocol.Streamlet.Local.State.html#3613" class="Function">NotarizedChain</a> <a id="8697" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="8700" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
<a id="8703" href="Protocol.Streamlet.Local.State.html#8579" class="Function">NotarizedChain-∉</a> <a id="8720" class="Symbol">=</a> <a id="8722" href="Protocol.Streamlet.Local.State.html#8331" class="Function">NotarizedChain-∷˘</a> <a id="8740" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="8742" href="Data.List.Relation.Unary.All.Properties.html#3353" class="Function">¬Any⇒All¬</a> <a id="8752" class="Symbol">_</a>

<a id="8755" class="Comment">-- chain-∈</a>
<a id="chain-∈-∷˘"></a><a id="8766" href="Protocol.Streamlet.Local.State.html#8766" class="Function">chain-∈-∷˘</a> <a id="8777" class="Symbol">:</a>
  <a id="8781" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="8783" href="Prelude.Allable.html#210" class="Field">All</a> <a id="8787" class="Symbol">(</a><a id="8788" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="8790" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="8797" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢_</a><a id="8799" class="Symbol">)</a> <a id="8801" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
  <a id="8806" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="8808" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="8811" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="8819" class="Symbol">(</a><a id="8820" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="8822" class="InductiveConstructor Operator">∷</a> <a id="8824" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="8826" class="Symbol">)</a>
    <a id="8832" href="Prelude.InferenceRules.html#14094" class="Function Operator">────────────────────</a>
    <a id="8857" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="8860" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="8868" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
<a id="8871" href="Protocol.Streamlet.Local.State.html#8766" class="Function">chain-∈-∷˘</a> <a id="8882" class="Symbol">=</a> <a id="8884" class="Symbol">λ</a> <a id="8886" class="Keyword">where</a>
  <a id="8894" href="Data.List.Relation.Unary.All.html#1690" class="InductiveConstructor">[]</a> <a id="8897" href="Protocol.Streamlet.Local.State.html#1700" class="InductiveConstructor">[]</a> <a id="8900" class="Symbol">→</a> <a id="8902" href="Protocol.Streamlet.Local.State.html#1700" class="InductiveConstructor">[]</a>
  <a id="8907" class="Symbol">(</a><a id="8908" href="Protocol.Streamlet.Local.State.html#8908" class="Bound">b≢</a> <a id="8911" href="Data.List.Relation.Unary.All.html#1707" class="InductiveConstructor Operator">∷</a> <a id="8913" href="Protocol.Streamlet.Local.State.html#8913" class="Bound">ch≢</a><a id="8916" class="Symbol">)</a> <a id="8918" class="Symbol">(</a><a id="8919" href="Data.List.Relation.Unary.Any.html#1226" class="InductiveConstructor">here</a> <a id="8924" href="Protocol.Streamlet.Local.State.html#8924" class="Bound">b≡</a> <a id="8927" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">∷</a> <a id="8929" href="Protocol.Streamlet.Local.State.html#8929" class="Bound">ch∈</a> <a id="8933" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">⊣</a> <a id="8935" href="Protocol.Streamlet.Local.State.html#8935" class="Bound">x</a><a id="8936" class="Symbol">)</a> <a id="8938" class="Symbol">→</a> <a id="8940" href="Data.Empty.html#1050" class="Function">⊥-elim</a> <a id="8947" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="8949" href="Protocol.Streamlet.Local.State.html#8908" class="Bound">b≢</a> <a id="8952" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="8954" href="Relation.Binary.PropositionalEquality.Core.html#1712" class="Function">sym</a> <a id="8958" href="Protocol.Streamlet.Local.State.html#8924" class="Bound">b≡</a>
  <a id="8963" class="Symbol">(</a><a id="8964" href="Protocol.Streamlet.Local.State.html#8964" class="Bound">b≢</a> <a id="8967" href="Data.List.Relation.Unary.All.html#1707" class="InductiveConstructor Operator">∷</a> <a id="8969" href="Protocol.Streamlet.Local.State.html#8969" class="Bound">ch≢</a><a id="8972" class="Symbol">)</a> <a id="8974" class="Symbol">(</a><a id="8975" href="Data.List.Relation.Unary.Any.html#1279" class="InductiveConstructor">there</a> <a id="8981" href="Protocol.Streamlet.Local.State.html#8981" class="Bound">m∈</a> <a id="8984" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">∷</a> <a id="8986" href="Protocol.Streamlet.Local.State.html#8986" class="Bound">ch∈</a> <a id="8990" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">⊣</a> <a id="8992" href="Protocol.Streamlet.Local.State.html#8992" class="Bound">x</a><a id="8993" class="Symbol">)</a> <a id="8995" class="Symbol">→</a> <a id="8997" href="Protocol.Streamlet.Local.State.html#8981" class="Bound">m∈</a> <a id="9000" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">∷</a> <a id="9002" href="Protocol.Streamlet.Local.State.html#8766" class="Function">chain-∈-∷˘</a> <a id="9013" href="Protocol.Streamlet.Local.State.html#8969" class="Bound">ch≢</a> <a id="9017" href="Protocol.Streamlet.Local.State.html#8986" class="Bound">ch∈</a> <a id="9021" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">⊣</a> <a id="9023" href="Protocol.Streamlet.Local.State.html#8992" class="Bound">x</a>

<a id="chain-∉"></a><a id="9026" href="Protocol.Streamlet.Local.State.html#9026" class="Function">chain-∉</a> <a id="9034" class="Symbol">:</a>
  <a id="9038" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="9040" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="9042" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="9049" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="9051" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
  <a id="9056" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="9058" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="9061" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="9069" class="Symbol">(</a><a id="9070" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="9072" class="InductiveConstructor Operator">∷</a> <a id="9074" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="9076" class="Symbol">)</a>
    <a id="9082" href="Prelude.InferenceRules.html#14094" class="Function Operator">────────────────────</a>
    <a id="9107" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="9110" href="Protocol.Streamlet.Local.State.html#1652" class="Datatype Operator">chain-∈</a> <a id="9118" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
<a id="9121" href="Protocol.Streamlet.Local.State.html#9026" class="Function">chain-∉</a> <a id="9129" class="Symbol">=</a> <a id="9131" href="Protocol.Streamlet.Local.State.html#8766" class="Function">chain-∈-∷˘</a> <a id="9142" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="9144" href="Data.List.Relation.Unary.All.Properties.html#3353" class="Function">¬Any⇒All¬</a> <a id="9154" class="Symbol">_</a>

<a id="9157" class="Comment">-- notarized-chain-∈</a>
<a id="notarized-chain-∈-∷"></a><a id="9178" href="Protocol.Streamlet.Local.State.html#9178" class="Function">notarized-chain-∈-∷</a> <a id="9198" class="Symbol">:</a> <a id="9200" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="9203" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="9221" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="9224" class="Symbol">→</a> <a id="9226" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="9229" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="9247" class="Symbol">(</a><a id="9248" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="9250" class="InductiveConstructor Operator">∷</a> <a id="9252" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="9254" class="Symbol">)</a>
<a id="9256" href="Protocol.Streamlet.Local.State.html#9178" class="Function">notarized-chain-∈-∷</a> <a id="9276" class="Symbol">(</a><a id="9277" href="Protocol.Streamlet.Local.State.html#9277" class="Bound">ch∈</a> <a id="9281" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9283" href="Protocol.Streamlet.Local.State.html#9283" class="Bound">nch</a><a id="9286" class="Symbol">)</a> <a id="9288" class="Symbol">=</a> <a id="9290" href="Protocol.Streamlet.Local.State.html#2329" class="Function">chain-∈-∷</a> <a id="9300" href="Protocol.Streamlet.Local.State.html#9277" class="Bound">ch∈</a> <a id="9304" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9306" href="Protocol.Streamlet.Local.State.html#8170" class="Function">NotarizedChain-∷</a> <a id="9323" href="Protocol.Streamlet.Local.State.html#9283" class="Bound">nch</a>

<a id="notarized-chain-∈-∷˘"></a><a id="9328" href="Protocol.Streamlet.Local.State.html#9328" class="Function">notarized-chain-∈-∷˘</a> <a id="9349" class="Symbol">:</a>
  <a id="9353" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="9355" href="Prelude.Allable.html#210" class="Field">All</a> <a id="9359" class="Symbol">(</a><a id="9360" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="9362" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="9369" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢_</a><a id="9371" class="Symbol">)</a> <a id="9373" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
  <a id="9378" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="9380" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="9383" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="9401" class="Symbol">(</a><a id="9402" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="9404" class="InductiveConstructor Operator">∷</a> <a id="9406" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="9408" class="Symbol">)</a>
    <a id="9414" href="Prelude.InferenceRules.html#13824" class="Function Operator">─────────────────────────────</a>
    <a id="9448" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="9451" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="9469" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
<a id="9472" href="Protocol.Streamlet.Local.State.html#9328" class="Function">notarized-chain-∈-∷˘</a> <a id="9493" href="Protocol.Streamlet.Local.State.html#9493" class="Bound">ms≢</a> <a id="9497" class="Symbol">(</a><a id="9498" href="Protocol.Streamlet.Local.State.html#9498" class="Bound">ch∈</a> <a id="9502" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9504" href="Protocol.Streamlet.Local.State.html#9504" class="Bound">nch</a><a id="9507" class="Symbol">)</a> <a id="9509" class="Symbol">=</a> <a id="9511" href="Protocol.Streamlet.Local.State.html#8766" class="Function">chain-∈-∷˘</a> <a id="9522" href="Protocol.Streamlet.Local.State.html#9493" class="Bound">ms≢</a> <a id="9526" href="Protocol.Streamlet.Local.State.html#9498" class="Bound">ch∈</a> <a id="9530" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9532" href="Protocol.Streamlet.Local.State.html#8331" class="Function">NotarizedChain-∷˘</a> <a id="9550" href="Protocol.Streamlet.Local.State.html#9493" class="Bound">ms≢</a> <a id="9554" href="Protocol.Streamlet.Local.State.html#9504" class="Bound">nch</a>

<a id="notarized-chain-∉"></a><a id="9559" href="Protocol.Streamlet.Local.State.html#9559" class="Function">notarized-chain-∉</a> <a id="9577" class="Symbol">:</a>
  <a id="9581" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="9583" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="9585" href="Protocol.Streamlet.Block.html#2075" class="Field Operator">∙block</a> <a id="9592" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="9594" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a>
  <a id="9599" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="9601" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="9604" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="9622" class="Symbol">(</a><a id="9623" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="9625" class="InductiveConstructor Operator">∷</a> <a id="9627" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a><a id="9629" class="Symbol">)</a>
    <a id="9635" href="Prelude.InferenceRules.html#13824" class="Function Operator">─────────────────────────────</a>
    <a id="9669" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="9672" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="9690" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
<a id="9693" href="Protocol.Streamlet.Local.State.html#9559" class="Function">notarized-chain-∉</a> <a id="9711" class="Symbol">=</a> <a id="9713" href="Protocol.Streamlet.Local.State.html#9328" class="Function">notarized-chain-∈-∷˘</a> <a id="9734" href="Function.Base.html#1115" class="Function Operator">∘</a> <a id="9736" href="Data.List.Relation.Unary.All.Properties.html#3353" class="Function">¬Any⇒All¬</a> <a id="9746" class="Symbol">_</a>

<a id="notarized-chain-∈-tail"></a><a id="9749" href="Protocol.Streamlet.Local.State.html#9749" class="Function">notarized-chain-∈-tail</a> <a id="9772" class="Symbol">:</a> <a id="9774" class="Symbol">(</a><a id="9775" href="Protocol.Streamlet.Block.html#433" class="Generalizable">b</a> <a id="9777" class="InductiveConstructor Operator">∷</a> <a id="9779" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a><a id="9781" class="Symbol">)</a> <a id="9783" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="9801" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a> <a id="9804" class="Symbol">→</a> <a id="9806" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="9809" href="Protocol.Streamlet.Local.State.html#3967" class="Function Operator">notarized-chain-∈</a> <a id="9827" href="Protocol.Streamlet.Message.html#403" class="Generalizable">ms</a>
<a id="9830" href="Protocol.Streamlet.Local.State.html#9749" class="Function">notarized-chain-∈-tail</a> <a id="9853" class="Symbol">(_</a> <a id="9856" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">∷</a> <a id="9858" href="Protocol.Streamlet.Local.State.html#9858" class="Bound">ch∈</a> <a id="9862" href="Protocol.Streamlet.Local.State.html#1768" class="InductiveConstructor Operator">⊣</a> <a id="9864" class="Symbol">_</a> <a id="9866" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9868" class="Symbol">_</a> <a id="9870" href="Data.List.Relation.Unary.All.html#1707" class="InductiveConstructor Operator">∷</a> <a id="9872" href="Protocol.Streamlet.Local.State.html#9872" class="Bound">nc</a><a id="9874" class="Symbol">)</a> <a id="9876" class="Symbol">=</a> <a id="9878" href="Protocol.Streamlet.Local.State.html#9858" class="Bound">ch∈</a> <a id="9882" href="Agda.Builtin.Sigma.html#235" class="InductiveConstructor Operator">,</a> <a id="9884" href="Protocol.Streamlet.Local.State.html#9872" class="Bound">nc</a>
</pre>-->
</body>
</html>
