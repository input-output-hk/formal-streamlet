<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Protocol.Streamlet.Local.Step</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <link rel="stylesheet" href="Agda.css" />
</head>
<body>
<h1 id="transitions-between-local-states-of-a-single-node.">Transitions
between local states of a single node.</h1>
<!--
<pre class="Agda"><a id="69" class="Symbol">{-#</a> <a id="73" class="Keyword">OPTIONS</a> <a id="81" class="Pragma">--safe</a> <a id="88" class="Symbol">#-}</a>
<a id="92" class="Keyword">open</a> <a id="97" class="Keyword">import</a> <a id="104" href="Prelude.html" class="Module">Prelude</a>
<a id="112" class="Keyword">open</a> <a id="117" class="Keyword">import</a> <a id="124" href="Hash.html" class="Module">Hash</a>

<a id="130" class="Keyword">open</a> <a id="135" class="Keyword">import</a> <a id="142" href="Protocol.Streamlet.Base.html" class="Module">Protocol.Streamlet.Base</a>
<a id="166" class="Keyword">open</a> <a id="171" class="Keyword">import</a> <a id="178" href="Protocol.Streamlet.Assumptions.html" class="Module">Protocol.Streamlet.Assumptions</a>

<a id="210" class="Keyword">module</a> <a id="217" href="Protocol.Streamlet.Local.Step.html" class="Module">Protocol.Streamlet.Local.Step</a> <a id="247" class="Symbol">(</a><a id="248" href="Protocol.Streamlet.Local.Step.html#248" class="Bound">⋯</a> <a id="250" class="Symbol">:</a> <a id="252" class="Symbol">_)</a> <a id="255" class="Symbol">(</a><a id="256" class="Keyword">open</a> <a id="261" href="Protocol.Streamlet.Assumptions.html#222" class="Module">Assumptions</a> <a id="273" href="Protocol.Streamlet.Local.Step.html#248" class="Bound">⋯</a><a id="274" class="Symbol">)</a> <a id="276" class="Keyword">where</a>

<a id="283" class="Keyword">open</a> <a id="288" class="Keyword">import</a> <a id="295" href="Protocol.Streamlet.Block.html" class="Module">Protocol.Streamlet.Block</a> <a id="320" href="Protocol.Streamlet.Local.Step.html#248" class="Bound">⋯</a>
<a id="322" class="Keyword">open</a> <a id="327" class="Keyword">import</a> <a id="334" href="Protocol.Streamlet.Message.html" class="Module">Protocol.Streamlet.Message</a> <a id="361" href="Protocol.Streamlet.Local.Step.html#248" class="Bound">⋯</a>
<a id="363" class="Keyword">open</a> <a id="368" class="Keyword">import</a> <a id="375" href="Protocol.Streamlet.Local.Chain.html" class="Module">Protocol.Streamlet.Local.Chain</a> <a id="406" href="Protocol.Streamlet.Local.Step.html#248" class="Bound">⋯</a>
<a id="408" class="Keyword">open</a> <a id="413" class="Keyword">import</a> <a id="420" href="Protocol.Streamlet.Local.State.html" class="Module">Protocol.Streamlet.Local.State</a> <a id="451" href="Protocol.Streamlet.Local.Step.html#248" class="Bound">⋯</a>
</pre>-->
<h2 id="some-auxililary-functions">Some auxililary functions</h2>
<pre class="Agda"><a id="proposeBlock"></a><a id="499" href="Protocol.Streamlet.Local.Step.html#499" class="Function">proposeBlock</a> <a id="512" class="Symbol">:</a> <a id="514" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a> <a id="525" class="Symbol">→</a> <a id="527" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a> <a id="535" class="Symbol">→</a> <a id="537" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a>
<a id="548" href="Protocol.Streamlet.Local.Step.html#499" class="Function">proposeBlock</a> <a id="561" href="Protocol.Streamlet.Local.Step.html#561" class="Bound">ls</a> <a id="564" href="Protocol.Streamlet.Local.Step.html#564" class="Bound">m</a> <a id="566" class="Symbol">=</a> <a id="568" class="Keyword">record</a> <a id="575" href="Protocol.Streamlet.Local.Step.html#561" class="Bound">ls</a>
  <a id="580" class="Symbol">{</a> <a id="582" href="Protocol.Streamlet.Local.State.html#939" class="Field">phase</a> <a id="588" class="Symbol">=</a> <a id="590" href="Protocol.Streamlet.Local.State.html#524" class="InductiveConstructor">Voted</a>
  <a id="598" class="Symbol">;</a> <a id="600" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a>    <a id="606" class="Symbol">=</a> <a id="608" href="Protocol.Streamlet.Local.Step.html#564" class="Bound">m</a> <a id="610" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="612" href="Protocol.Streamlet.Local.Step.html#561" class="Bound">ls</a> <a id="615" class="Symbol">.</a><a id="616" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a>
  <a id="621" class="Symbol">}</a>

<a id="voteBlock"></a><a id="624" href="Protocol.Streamlet.Local.Step.html#624" class="Function">voteBlock</a> <a id="634" class="Symbol">:</a> <a id="636" class="Symbol">(</a><a id="637" href="Protocol.Streamlet.Local.Step.html#637" class="Bound">ls</a> <a id="640" class="Symbol">:</a> <a id="642" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a><a id="652" class="Symbol">)</a> <a id="654" class="Symbol">→</a> <a id="656" href="Prelude.Irrelevance.html#816" class="Function">AnyFirst</a> <a id="665" class="Symbol">(</a><a id="666" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="668" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡_</a><a id="670" class="Symbol">)</a> <a id="672" class="Symbol">(</a><a id="673" href="Protocol.Streamlet.Local.Step.html#637" class="Bound">ls</a> <a id="676" class="Symbol">.</a><a id="677" href="Protocol.Streamlet.Local.State.html#990" class="Field">inbox</a><a id="682" class="Symbol">)</a> <a id="684" class="Symbol">→</a> <a id="686" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a> <a id="694" class="Symbol">→</a> <a id="696" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a>
<a id="707" href="Protocol.Streamlet.Local.Step.html#624" class="Function">voteBlock</a> <a id="717" class="Symbol">{</a><a id="718" href="Protocol.Streamlet.Local.Step.html#718" class="Bound">m</a><a id="719" class="Symbol">}</a> <a id="721" href="Protocol.Streamlet.Local.Step.html#721" class="Bound">ls</a> <a id="724" href="Protocol.Streamlet.Local.Step.html#724" class="Bound">m∈</a> <a id="727" href="Protocol.Streamlet.Local.Step.html#727" class="Bound">vote</a> <a id="732" class="Symbol">=</a> <a id="734" class="Keyword">record</a> <a id="741" href="Protocol.Streamlet.Local.Step.html#721" class="Bound">ls</a>
  <a id="746" class="Symbol">{</a> <a id="748" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a>    <a id="754" class="Symbol">=</a> <a id="756" href="Protocol.Streamlet.Local.Step.html#727" class="Bound">vote</a> <a id="761" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="763" href="Protocol.Streamlet.Local.Step.html#718" class="Bound">m</a> <a id="765" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="767" href="Protocol.Streamlet.Local.Step.html#721" class="Bound">ls</a> <a id="770" class="Symbol">.</a><a id="771" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a>
  <a id="776" class="Symbol">;</a> <a id="778" href="Protocol.Streamlet.Local.State.html#939" class="Field">phase</a> <a id="784" class="Symbol">=</a> <a id="786" href="Protocol.Streamlet.Local.State.html#524" class="InductiveConstructor">Voted</a>
  <a id="794" class="Symbol">;</a> <a id="796" href="Protocol.Streamlet.Local.State.html#990" class="Field">inbox</a> <a id="802" class="Symbol">=</a> <a id="804" class="Symbol">(</a><a id="805" href="Protocol.Streamlet.Local.Step.html#721" class="Bound">ls</a> <a id="808" class="Symbol">.</a><a id="809" href="Protocol.Streamlet.Local.State.html#990" class="Field">inbox</a><a id="814" class="Symbol">)</a> <a id="816" href="Data.List.Relation.Unary.Any.html#2138" class="Function Operator">L.Any.─</a> <a id="824" class="Symbol">(</a><a id="825" href="Prelude.Irrelevance.html#1735" class="Function">AnyFirst⇒Any</a> <a id="838" href="Protocol.Streamlet.Local.Step.html#724" class="Bound">m∈</a><a id="840" class="Symbol">)</a>
  <a id="844" class="Symbol">}</a>

<a id="registerVote"></a><a id="847" href="Protocol.Streamlet.Local.Step.html#847" class="Function">registerVote</a> <a id="860" class="Symbol">:</a> <a id="862" class="Symbol">(</a><a id="863" href="Protocol.Streamlet.Local.Step.html#863" class="Bound">ls</a> <a id="866" class="Symbol">:</a> <a id="868" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a><a id="878" class="Symbol">)</a> <a id="880" class="Symbol">→</a> <a id="882" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="884" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="886" href="Protocol.Streamlet.Local.Step.html#863" class="Bound">ls</a> <a id="889" class="Symbol">.</a><a id="890" href="Protocol.Streamlet.Local.State.html#990" class="Field">inbox</a> <a id="896" class="Symbol">→</a> <a id="898" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a>
<a id="909" href="Protocol.Streamlet.Local.Step.html#847" class="Function">registerVote</a> <a id="922" class="Symbol">{</a><a id="923" href="Protocol.Streamlet.Local.Step.html#923" class="Bound">m</a><a id="924" class="Symbol">}</a> <a id="926" href="Protocol.Streamlet.Local.Step.html#926" class="Bound">ls</a> <a id="929" href="Protocol.Streamlet.Local.Step.html#929" class="Bound">m∈</a> <a id="932" class="Symbol">=</a> <a id="934" class="Keyword">record</a> <a id="941" href="Protocol.Streamlet.Local.Step.html#926" class="Bound">ls</a>
  <a id="946" class="Symbol">{</a> <a id="948" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a>    <a id="954" class="Symbol">=</a> <a id="956" href="Protocol.Streamlet.Local.Step.html#923" class="Bound">m</a> <a id="958" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="960" href="Protocol.Streamlet.Local.Step.html#926" class="Bound">ls</a> <a id="963" class="Symbol">.</a><a id="964" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a>
  <a id="969" class="Symbol">;</a> <a id="971" href="Protocol.Streamlet.Local.State.html#990" class="Field">inbox</a> <a id="977" class="Symbol">=</a> <a id="979" class="Symbol">(</a><a id="980" href="Protocol.Streamlet.Local.Step.html#926" class="Bound">ls</a> <a id="983" class="Symbol">.</a><a id="984" href="Protocol.Streamlet.Local.State.html#990" class="Field">inbox</a><a id="989" class="Symbol">)</a> <a id="991" href="Data.List.Relation.Unary.Any.html#2138" class="Function Operator">L.Any.─</a> <a id="999" href="Protocol.Streamlet.Local.Step.html#929" class="Bound">m∈</a>
  <a id="1004" class="Symbol">}</a>

<a id="finalize"></a><a id="1007" href="Protocol.Streamlet.Local.Step.html#1007" class="Function">finalize</a> <a id="1016" class="Symbol">:</a> <a id="1018" href="Protocol.Streamlet.Local.Chain.html#525" class="Function">Chain</a> <a id="1024" class="Symbol">→</a> <a id="1026" href="Algebra.Core.html#484" class="Function">Op₁</a> <a id="1030" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a>
<a id="1041" href="Protocol.Streamlet.Local.Step.html#1007" class="Function">finalize</a> <a id="1050" href="Protocol.Streamlet.Local.Step.html#1050" class="Bound">ch</a> <a id="1053" href="Protocol.Streamlet.Local.Step.html#1053" class="Bound">ls</a> <a id="1056" class="Symbol">=</a> <a id="1058" class="Keyword">record</a> <a id="1065" href="Protocol.Streamlet.Local.Step.html#1053" class="Bound">ls</a>
  <a id="1070" class="Symbol">{</a> <a id="1072" href="Protocol.Streamlet.Local.State.html#1019" class="Field">final</a> <a id="1078" class="Symbol">=</a> <a id="1080" href="Protocol.Streamlet.Local.Step.html#1050" class="Bound">ch</a><a id="1082" class="Symbol">}</a>
</pre>
<h2 id="the-local-step-relation">The local step relation</h2>
<p>Given a local state a step may produce a message.</p>
<pre class="Agda"><a id="1176" class="Keyword">data</a> <a id="_▷_⊢_—[_]→_"></a><a id="1181" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">_▷_⊢_—[_]→_</a>
  <a id="1195" class="Symbol">(</a><a id="1196" href="Protocol.Streamlet.Local.Step.html#1196" class="Bound">p</a> <a id="1198" class="Symbol">:</a> <a id="1200" href="Protocol.Streamlet.Assumptions.html#512" class="Function">Pid</a><a id="1203" class="Symbol">)</a> <a id="1205" class="Symbol">(</a><a id="1206" href="Protocol.Streamlet.Local.Step.html#1206" class="Bound">e</a> <a id="1208" class="Symbol">:</a> <a id="1210" href="Protocol.Streamlet.Base.html#83" class="Function">Epoch</a><a id="1215" class="Symbol">)</a> <a id="1217" class="Symbol">(</a><a id="1218" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="1221" class="Symbol">:</a> <a id="1223" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a><a id="1233" class="Symbol">)</a> <a id="1235" class="Symbol">:</a> <a id="1237" href="Agda.Builtin.Maybe.html#135" class="Datatype">Maybe</a> <a id="1243" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a> <a id="1251" class="Symbol">→</a> <a id="1253" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a> <a id="1264" class="Symbol">→</a> <a id="1266" href="Agda.Primitive.html#388" class="Primitive">Type</a> <a id="1271" class="Keyword">where</a>

  <a id="1280" class="Comment">-- Leader proposes a new block.</a>
  <a id="_▷_⊢_—[_]→_.ProposeBlock"></a><a id="1314" href="Protocol.Streamlet.Local.Step.html#1314" class="InductiveConstructor">ProposeBlock</a> <a id="1327" class="Symbol">:</a>
    <a id="1333" class="Keyword">let</a>
      <a id="1343" href="Protocol.Streamlet.Local.Step.html#1343" class="Bound">L</a> <a id="1345" class="Symbol">=</a> <a id="1347" href="Protocol.Streamlet.Assumptions.html#684" class="Field">epochLeader</a> <a id="1359" href="Protocol.Streamlet.Local.Step.html#1206" class="Bound">e</a>
      <a id="1367" href="Protocol.Streamlet.Local.Step.html#1367" class="Bound">h</a> <a id="1369" class="Symbol">=</a> <a id="1371" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="1374" href="Hash.html#366" class="Field Operator">♯</a>
      <a id="1382" href="Protocol.Streamlet.Local.Step.html#1382" class="Bound">b</a> <a id="1384" class="Symbol">=</a> <a id="1386" href="Protocol.Streamlet.Block.html#290" class="InductiveConstructor Operator">⟨</a> <a id="1388" href="Protocol.Streamlet.Local.Step.html#1367" class="Bound">h</a> <a id="1390" href="Protocol.Streamlet.Block.html#290" class="InductiveConstructor Operator">,</a> <a id="1392" href="Protocol.Streamlet.Local.Step.html#1206" class="Bound">e</a> <a id="1394" href="Protocol.Streamlet.Block.html#290" class="InductiveConstructor Operator">,</a> <a id="1396" href="Protocol.Streamlet.Local.Chain.html#439" class="Generalizable">txs</a> <a id="1400" href="Protocol.Streamlet.Block.html#290" class="InductiveConstructor Operator">⟩</a>
      <a id="1408" href="Protocol.Streamlet.Local.Step.html#1408" class="Bound">m</a> <a id="1410" class="Symbol">=</a> <a id="1412" href="Protocol.Streamlet.Message.html#321" class="InductiveConstructor">Propose</a> <a id="1420" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1422" href="Protocol.Streamlet.Block.html#1598" class="Function">signBlock</a> <a id="1432" href="Protocol.Streamlet.Local.Step.html#1196" class="Bound">p</a> <a id="1434" href="Protocol.Streamlet.Local.Step.html#1382" class="Bound">b</a>
    <a id="1440" class="Keyword">in</a>
    <a id="1447" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="1449" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="1452" class="Symbol">.</a><a id="1453" href="Protocol.Streamlet.Local.State.html#939" class="Field">phase</a> <a id="1459" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1461" href="Protocol.Streamlet.Local.State.html#518" class="InductiveConstructor">Ready</a>
    <a id="1471" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="1473" href="Protocol.Streamlet.Local.Step.html#1196" class="Bound">p</a> <a id="1475" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="1477" href="Protocol.Streamlet.Local.Step.html#1343" class="Bound">L</a>
    <a id="1483" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="1485" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="1488" href="Protocol.Streamlet.Local.State.html#5503" class="Function Operator">longest-notarized-chain-∈</a> <a id="1514" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="1517" class="Symbol">.</a><a id="1518" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a>
    <a id="1525" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="1527" href="Protocol.Streamlet.Local.Chain.html#1198" class="Datatype">ValidChain</a> <a id="1538" class="Symbol">(</a><a id="1539" href="Protocol.Streamlet.Local.Step.html#1382" class="Bound">b</a> <a id="1541" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="1543" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a><a id="1545" class="Symbol">)</a>
      <a id="1553" href="Prelude.InferenceRules.html#13338" class="Function Operator">─────────────────────────────────────────</a>
      <a id="1601" href="Protocol.Streamlet.Local.Step.html#1196" class="Bound">p</a> <a id="1603" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">▷</a> <a id="1605" href="Protocol.Streamlet.Local.Step.html#1206" class="Bound">e</a> <a id="1607" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">⊢</a> <a id="1609" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="1612" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">—[</a> <a id="1615" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="1620" href="Protocol.Streamlet.Local.Step.html#1408" class="Bound">m</a> <a id="1622" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">]→</a> <a id="1625" href="Protocol.Streamlet.Local.Step.html#499" class="Function">proposeBlock</a> <a id="1638" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="1641" href="Protocol.Streamlet.Local.Step.html#1408" class="Bound">m</a>

  <a id="1646" class="Comment">-- Upon getting the first valid proposal a node votes for it.</a>
  <a id="_▷_⊢_—[_]→_.VoteBlock"></a><a id="1710" href="Protocol.Streamlet.Local.Step.html#1710" class="InductiveConstructor">VoteBlock</a> <a id="1720" class="Symbol">:</a>
    <a id="1726" class="Keyword">let</a>
      <a id="1736" href="Protocol.Streamlet.Local.Step.html#1736" class="Bound">L</a>  <a id="1739" class="Symbol">=</a> <a id="1741" href="Protocol.Streamlet.Assumptions.html#684" class="Field">epochLeader</a> <a id="1753" href="Protocol.Streamlet.Local.Step.html#1206" class="Bound">e</a>
      <a id="1761" href="Protocol.Streamlet.Local.Step.html#1761" class="Bound">b</a>  <a id="1764" class="Symbol">=</a> <a id="1766" href="Protocol.Streamlet.Block.html#290" class="InductiveConstructor Operator">⟨</a> <a id="1768" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="1771" href="Hash.html#366" class="Field Operator">♯</a> <a id="1773" href="Protocol.Streamlet.Block.html#290" class="InductiveConstructor Operator">,</a> <a id="1775" href="Protocol.Streamlet.Local.Step.html#1206" class="Bound">e</a> <a id="1777" href="Protocol.Streamlet.Block.html#290" class="InductiveConstructor Operator">,</a> <a id="1779" href="Protocol.Streamlet.Local.Chain.html#439" class="Generalizable">txs</a> <a id="1783" href="Protocol.Streamlet.Block.html#290" class="InductiveConstructor Operator">⟩</a>
      <a id="1791" href="Protocol.Streamlet.Local.Step.html#1791" class="Bound">sᴾ</a> <a id="1794" class="Symbol">=</a> <a id="1796" href="Protocol.Streamlet.Block.html#1598" class="Function">signBlock</a> <a id="1806" href="Protocol.Streamlet.Local.Step.html#1736" class="Bound">L</a> <a id="1808" href="Protocol.Streamlet.Local.Step.html#1761" class="Bound">b</a>
      <a id="1816" href="Protocol.Streamlet.Local.Step.html#1816" class="Bound">mᵖ</a> <a id="1819" class="Symbol">=</a> <a id="1821" href="Protocol.Streamlet.Message.html#321" class="InductiveConstructor">Propose</a> <a id="1829" href="Protocol.Streamlet.Local.Step.html#1791" class="Bound">sᴾ</a>
      <a id="1838" href="Protocol.Streamlet.Local.Step.html#1838" class="Bound">m</a>  <a id="1841" class="Symbol">=</a> <a id="1843" href="Protocol.Streamlet.Message.html#329" class="InductiveConstructor">Vote</a>    <a id="1851" href="Function.Base.html#1974" class="Function Operator">$</a> <a id="1853" href="Protocol.Streamlet.Block.html#1598" class="Function">signBlock</a> <a id="1863" href="Protocol.Streamlet.Local.Step.html#1196" class="Bound">p</a> <a id="1865" href="Protocol.Streamlet.Local.Step.html#1761" class="Bound">b</a>
    <a id="1871" class="Keyword">in</a>
    <a id="1878" class="Symbol">∀</a> <a id="1880" class="Symbol">(</a><a id="1881" href="Protocol.Streamlet.Local.Step.html#1881" class="Bound">m∈</a> <a id="1884" class="Symbol">:</a> <a id="1886" href="Prelude.Irrelevance.html#816" class="Function">AnyFirst</a> <a id="1895" class="Symbol">(</a><a id="1896" href="Protocol.Streamlet.Local.Step.html#1816" class="Bound">mᵖ</a> <a id="1899" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡_</a><a id="1901" class="Symbol">)</a> <a id="1903" class="Symbol">(</a><a id="1904" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="1907" class="Symbol">.</a><a id="1908" href="Protocol.Streamlet.Local.State.html#990" class="Field">inbox</a><a id="1913" class="Symbol">))</a> <a id="1916" class="Symbol">→</a>
    <a id="1922" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="1924" href="Protocol.Streamlet.Local.Step.html#1791" class="Bound">sᴾ</a> <a id="1927" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="1929" href="Data.List.Base.html#1631" class="Function">map</a> <a id="1933" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="1947" class="Symbol">(</a><a id="1948" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="1951" class="Symbol">.</a><a id="1952" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a><a id="1954" class="Symbol">)</a> <a id="1956" class="Comment">-- an alternative is to change voteBlock, accept the proposal but erase the existing vote.</a>
    <a id="2051" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="2053" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="2056" class="Symbol">.</a><a id="2057" href="Protocol.Streamlet.Local.State.html#939" class="Field">phase</a> <a id="2063" href="Agda.Builtin.Equality.html#150" class="Datatype Operator">≡</a> <a id="2065" href="Protocol.Streamlet.Local.State.html#518" class="InductiveConstructor">Ready</a>
    <a id="2075" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="2077" href="Protocol.Streamlet.Local.Step.html#1196" class="Bound">p</a> <a id="2079" href="Relation.Binary.PropositionalEquality.Core.html#858" class="Function Operator">≢</a> <a id="2081" href="Protocol.Streamlet.Local.Step.html#1736" class="Bound">L</a>
    <a id="2087" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="2089" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a> <a id="2092" href="Protocol.Streamlet.Local.State.html#5503" class="Function Operator">longest-notarized-chain-∈</a> <a id="2118" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="2121" class="Symbol">.</a><a id="2122" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a>
    <a id="2129" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="2131" href="Protocol.Streamlet.Local.Chain.html#1198" class="Datatype">ValidChain</a> <a id="2142" class="Symbol">(</a><a id="2143" href="Protocol.Streamlet.Local.Step.html#1761" class="Bound">b</a> <a id="2145" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2147" href="Protocol.Streamlet.Local.Chain.html#570" class="Generalizable">ch</a><a id="2149" class="Symbol">)</a>
      <a id="2157" href="Prelude.InferenceRules.html#13338" class="Function Operator">─────────────────────────────────────────</a>
      <a id="2205" href="Protocol.Streamlet.Local.Step.html#1196" class="Bound">p</a> <a id="2207" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">▷</a> <a id="2209" href="Protocol.Streamlet.Local.Step.html#1206" class="Bound">e</a> <a id="2211" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">⊢</a> <a id="2213" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="2216" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">—[</a> <a id="2219" href="Agda.Builtin.Maybe.html#173" class="InductiveConstructor">just</a> <a id="2224" href="Protocol.Streamlet.Local.Step.html#1838" class="Bound">m</a> <a id="2226" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">]→</a> <a id="2229" href="Protocol.Streamlet.Local.Step.html#624" class="Function">voteBlock</a> <a id="2239" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="2242" href="Protocol.Streamlet.Local.Step.html#1881" class="Bound">m∈</a> <a id="2245" href="Protocol.Streamlet.Local.Step.html#1838" class="Bound">m</a>

  <a id="2250" class="Comment">-- NB: could a node get a proposal for a future epoch?</a>

  <a id="2308" class="Comment">-- Whenever other nodes vote, register their vote.</a>
  <a id="_▷_⊢_—[_]→_.RegisterVote"></a><a id="2361" href="Protocol.Streamlet.Local.Step.html#2361" class="InductiveConstructor">RegisterVote</a> <a id="2374" class="Symbol">:</a> <a id="2376" class="Keyword">let</a> <a id="2380" href="Protocol.Streamlet.Local.Step.html#2380" class="Bound">m</a> <a id="2382" class="Symbol">=</a> <a id="2384" href="Protocol.Streamlet.Message.html#329" class="InductiveConstructor">Vote</a> <a id="2389" href="Protocol.Streamlet.Block.html#1720" class="Generalizable">sb</a> <a id="2392" class="Keyword">in</a>
    <a id="2399" class="Comment">-- TODO: discard dishonest votes</a>
    <a id="2436" class="Symbol">∀</a> <a id="2438" class="Symbol">(</a><a id="2439" href="Protocol.Streamlet.Local.Step.html#2439" class="Bound">m∈</a> <a id="2442" class="Symbol">:</a> <a id="2444" href="Protocol.Streamlet.Local.Step.html#2380" class="Bound">m</a> <a id="2446" href="Data.List.Membership.Setoid.html#950" class="Function Operator">∈</a> <a id="2448" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="2451" class="Symbol">.</a><a id="2452" href="Protocol.Streamlet.Local.State.html#990" class="Field">inbox</a><a id="2457" class="Symbol">)</a> <a id="2459" class="Symbol">→</a>
    <a id="2465" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="2467" href="Protocol.Streamlet.Block.html#1720" class="Generalizable">sb</a> <a id="2470" href="Data.List.Membership.Setoid.html#999" class="Function Operator">∉</a> <a id="2472" href="Data.List.Base.html#1631" class="Function">map</a> <a id="2476" href="Protocol.Streamlet.Block.html#2419" class="Field Operator">_∙signedBlock</a> <a id="2490" class="Symbol">(</a><a id="2491" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="2494" class="Symbol">.</a><a id="2495" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a><a id="2497" class="Symbol">)</a>
           <a id="2510" class="Comment">-- don&#39;t count a vote twice</a>
           <a id="2549" class="Comment">-- even if one is Propose sb and the other is Vote sb</a>
      <a id="2609" href="Prelude.InferenceRules.html#13243" class="Function Operator">───────────────────────────────────────────</a>
      <a id="2659" href="Protocol.Streamlet.Local.Step.html#1196" class="Bound">p</a> <a id="2661" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">▷</a> <a id="2663" href="Protocol.Streamlet.Local.Step.html#1206" class="Bound">e</a> <a id="2665" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">⊢</a> <a id="2667" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="2670" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">—[</a> <a id="2673" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="2681" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">]→</a> <a id="2684" href="Protocol.Streamlet.Local.Step.html#847" class="Function">registerVote</a> <a id="2697" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="2700" href="Protocol.Streamlet.Local.Step.html#2439" class="Bound">m∈</a>

  <a id="2706" class="Comment">-- Node finalizes a block (in their view).</a>
  <a id="_▷_⊢_—[_]→_.FinalizeBlock"></a><a id="2751" href="Protocol.Streamlet.Local.Step.html#2751" class="InductiveConstructor">FinalizeBlock</a> <a id="2765" class="Symbol">:</a> <a id="2767" class="Symbol">∀</a> <a id="2769" href="Protocol.Streamlet.Local.Step.html#2769" class="Bound">ch</a> <a id="2772" href="Protocol.Streamlet.Local.Step.html#2772" class="Bound">b</a> <a id="2774" class="Symbol">→</a>
    <a id="2780" href="Prelude.InferenceRules.html#56097" class="Function Operator">∙</a> <a id="2782" href="Protocol.Streamlet.Local.Chain.html#1198" class="Datatype">ValidChain</a> <a id="2793" class="Symbol">(</a><a id="2794" href="Protocol.Streamlet.Local.Step.html#2772" class="Bound">b</a> <a id="2796" href="Agda.Builtin.List.html#199" class="InductiveConstructor Operator">∷</a> <a id="2798" href="Protocol.Streamlet.Local.Step.html#2769" class="Bound">ch</a><a id="2800" class="Symbol">)</a>
    <a id="2806" href="Prelude.InferenceRules.html#56028" class="Function Operator">∙</a> <a id="2808" href="Protocol.Streamlet.Local.State.html#3689" class="Datatype">FinalizedChain</a> <a id="2823" class="Symbol">(</a><a id="2824" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="2827" class="Symbol">.</a><a id="2828" href="Protocol.Streamlet.Local.State.html#961" class="Field">db</a><a id="2830" class="Symbol">)</a> <a id="2832" href="Protocol.Streamlet.Local.Step.html#2769" class="Bound">ch</a> <a id="2835" href="Protocol.Streamlet.Local.Step.html#2772" class="Bound">b</a>
      <a id="2843" href="Prelude.InferenceRules.html#13429" class="Function Operator">───────────────────────────────────────</a>
      <a id="2889" href="Protocol.Streamlet.Local.Step.html#1196" class="Bound">p</a> <a id="2891" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">▷</a> <a id="2893" href="Protocol.Streamlet.Local.Step.html#1206" class="Bound">e</a> <a id="2895" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">⊢</a> <a id="2897" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a> <a id="2900" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">—[</a> <a id="2903" href="Agda.Builtin.Maybe.html#194" class="InductiveConstructor">nothing</a> <a id="2911" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">]→</a> <a id="2914" href="Protocol.Streamlet.Local.Step.html#1007" class="Function">finalize</a> <a id="2923" href="Protocol.Streamlet.Local.Step.html#2769" class="Bound">ch</a> <a id="2926" href="Protocol.Streamlet.Local.Step.html#1218" class="Bound">ls</a>
</pre>
When the epoch advances, reset all phases to <code>Ready</code>:
<pre class="Agda"><a id="epochChange"></a><a id="2996" href="Protocol.Streamlet.Local.Step.html#2996" class="Function">epochChange</a> <a id="3008" class="Symbol">:</a> <a id="3010" href="Algebra.Core.html#484" class="Function">Op₁</a> <a id="3014" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a>
<a id="3025" href="Protocol.Streamlet.Local.Step.html#2996" class="Function">epochChange</a> <a id="3037" href="Protocol.Streamlet.Local.Step.html#3037" class="Bound">ls</a> <a id="3040" class="Symbol">=</a> <a id="3042" class="Keyword">record</a> <a id="3049" href="Protocol.Streamlet.Local.Step.html#3037" class="Bound">ls</a>
  <a id="3054" class="Symbol">{</a> <a id="3056" href="Protocol.Streamlet.Local.State.html#939" class="Field">phase</a> <a id="3062" class="Symbol">=</a> <a id="3064" href="Protocol.Streamlet.Local.State.html#518" class="InductiveConstructor">Ready</a> <a id="3070" class="Symbol">}</a>
</pre>
A node can also receive messages at their inbox:
<pre class="Agda"><a id="receiveMessage"></a><a id="3134" href="Protocol.Streamlet.Local.Step.html#3134" class="Function">receiveMessage</a> <a id="3149" class="Symbol">:</a> <a id="3151" href="Protocol.Streamlet.Message.html#298" class="Datatype">Message</a> <a id="3159" class="Symbol">→</a> <a id="3161" href="Algebra.Core.html#484" class="Function">Op₁</a> <a id="3165" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a>
<a id="3176" href="Protocol.Streamlet.Local.Step.html#3134" class="Function">receiveMessage</a> <a id="3191" href="Protocol.Streamlet.Local.Step.html#3191" class="Bound">m</a> <a id="3193" href="Protocol.Streamlet.Local.Step.html#3193" class="Bound">ls</a> <a id="3196" class="Symbol">=</a> <a id="3198" class="Keyword">record</a> <a id="3205" href="Protocol.Streamlet.Local.Step.html#3193" class="Bound">ls</a>
  <a id="3210" class="Symbol">{</a> <a id="3212" href="Protocol.Streamlet.Local.State.html#990" class="Field">inbox</a> <a id="3218" class="Symbol">=</a> <a id="3220" href="Protocol.Streamlet.Local.Step.html#3193" class="Bound">ls</a> <a id="3223" class="Symbol">.</a><a id="3224" href="Protocol.Streamlet.Local.State.html#990" class="Field">inbox</a> <a id="3230" href="Data.List.Base.html#7645" class="Function Operator">L.∷ʳ</a> <a id="3235" href="Protocol.Streamlet.Local.Step.html#3191" class="Bound">m</a> <a id="3237" class="Symbol">}</a>
</pre>
<h2 id="traces">Traces</h2>
<p>We consider <strong>traces</strong> of the (local) step relation,
defined as its <em>reflexive-transitive closure</em>:</p>
<pre class="Agda"><a id="3364" class="Keyword">private</a> <a id="3372" class="Keyword">module</a> <a id="∣LOCAL∣"></a><a id="3379" href="Protocol.Streamlet.Local.Step.html#3379" class="Module">∣LOCAL∣</a> <a id="3387" class="Symbol">(</a><a id="3388" href="Protocol.Streamlet.Local.Step.html#3388" class="Bound">p</a> <a id="3390" class="Symbol">:</a> <a id="3392" href="Protocol.Streamlet.Assumptions.html#512" class="Function">Pid</a><a id="3395" class="Symbol">)</a> <a id="3397" class="Keyword">where</a>

  <a id="∣LOCAL∣.StateProperty"></a><a id="3406" href="Protocol.Streamlet.Local.Step.html#3406" class="Function">StateProperty</a> <a id="3420" class="Symbol">=</a> <a id="3422" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a> <a id="3433" class="Symbol">→</a> <a id="3435" href="Agda.Primitive.html#388" class="Primitive">Type</a>

  <a id="∣LOCAL∣._—→_"></a><a id="3443" href="Protocol.Streamlet.Local.Step.html#3443" class="Function Operator">_—→_</a> <a id="3448" class="Symbol">:</a> <a id="3450" href="Relation.Binary.Core.html#896" class="Function">Rel</a> <a id="3454" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a> <a id="3465" class="Symbol">_</a>
  <a id="3469" href="Protocol.Streamlet.Local.Step.html#3469" class="Bound">ls</a> <a id="3472" href="Protocol.Streamlet.Local.Step.html#3443" class="Function Operator">—→</a> <a id="3475" href="Protocol.Streamlet.Local.Step.html#3475" class="Bound">ls′</a> <a id="3479" class="Symbol">=</a> <a id="3481" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="3483" class="Symbol">λ</a> <a id="3485" href="Protocol.Streamlet.Local.Step.html#3485" class="Bound">e</a> <a id="3487" class="Symbol">→</a> <a id="3489" href="Data.Product.Base.html#852" class="Function">∃</a> <a id="3491" class="Symbol">λ</a> <a id="3493" href="Protocol.Streamlet.Local.Step.html#3493" class="Bound">mm</a> <a id="3496" class="Symbol">→</a> <a id="3498" href="Protocol.Streamlet.Local.Step.html#3388" class="Bound">p</a> <a id="3500" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">▷</a> <a id="3502" href="Protocol.Streamlet.Local.Step.html#3485" class="Bound">e</a> <a id="3504" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">⊢</a> <a id="3506" href="Protocol.Streamlet.Local.Step.html#3469" class="Bound">ls</a> <a id="3509" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">—[</a> <a id="3512" href="Protocol.Streamlet.Local.Step.html#3493" class="Bound">mm</a> <a id="3515" href="Protocol.Streamlet.Local.Step.html#1181" class="Datatype Operator">]→</a> <a id="3518" href="Protocol.Streamlet.Local.Step.html#3475" class="Bound">ls′</a>

  <a id="3525" class="Keyword">open</a> <a id="3530" class="Keyword">import</a> <a id="3537" href="Prelude.Closures.html" class="Module">Prelude.Closures</a> <a id="3554" href="Protocol.Streamlet.Local.Step.html#3443" class="Function Operator">_—→_</a> <a id="3559" class="Keyword">public</a>

  <a id="3569" class="Comment">-- step incorporating global changes as well (currently unused)</a>
  <a id="3635" class="Keyword">data</a> <a id="∣LOCAL∣._—→⁺_"></a><a id="3640" href="Protocol.Streamlet.Local.Step.html#3640" class="Datatype Operator">_—→⁺_</a> <a id="3646" class="Symbol">:</a> <a id="3648" href="Relation.Binary.Core.html#896" class="Function">Rel</a> <a id="3652" href="Protocol.Streamlet.Local.State.html#883" class="Record">LocalState</a> <a id="3663" href="Level.html#521" class="Function">0ℓ</a> <a id="3666" class="Keyword">where</a>
    <a id="∣LOCAL∣._—→⁺_.LocalStep"></a><a id="3676" href="Protocol.Streamlet.Local.Step.html#3676" class="InductiveConstructor">LocalStep</a>      <a id="3691" class="Symbol">:</a> <a id="3693" href="Protocol.Streamlet.Local.State.html#1083" class="Generalizable">ls</a> <a id="3696" href="Protocol.Streamlet.Local.Step.html#3443" class="Function Operator">—→</a> <a id="3699" href="Protocol.Streamlet.Local.State.html#1086" class="Generalizable">ls′</a> <a id="3703" class="Symbol">→</a> <a id="3705" href="Protocol.Streamlet.Local.State.html#1083" class="Generalizable">ls</a> <a id="3708" href="Protocol.Streamlet.Local.Step.html#3640" class="Datatype Operator">—→⁺</a> <a id="3712" href="Protocol.Streamlet.Local.State.html#1086" class="Generalizable">ls′</a>
    <a id="∣LOCAL∣._—→⁺_.EpochChange"></a><a id="3720" href="Protocol.Streamlet.Local.Step.html#3720" class="InductiveConstructor">EpochChange</a>    <a id="3735" class="Symbol">:</a> <a id="3737" href="Protocol.Streamlet.Local.State.html#1083" class="Generalizable">ls</a> <a id="3740" href="Protocol.Streamlet.Local.Step.html#3640" class="Datatype Operator">—→⁺</a> <a id="3744" href="Protocol.Streamlet.Local.Step.html#2996" class="Function">epochChange</a> <a id="3756" href="Protocol.Streamlet.Local.State.html#1083" class="Generalizable">ls</a>
    <a id="∣LOCAL∣._—→⁺_.ReceiveMessage"></a><a id="3763" href="Protocol.Streamlet.Local.Step.html#3763" class="InductiveConstructor">ReceiveMessage</a> <a id="3778" class="Symbol">:</a> <a id="3780" href="Protocol.Streamlet.Local.State.html#1083" class="Generalizable">ls</a> <a id="3783" href="Protocol.Streamlet.Local.Step.html#3640" class="Datatype Operator">—→⁺</a> <a id="3787" href="Protocol.Streamlet.Local.Step.html#3134" class="Function">receiveMessage</a> <a id="3802" href="Protocol.Streamlet.Message.html#386" class="Generalizable">m</a> <a id="3804" href="Protocol.Streamlet.Local.State.html#1083" class="Generalizable">ls</a>

<a id="3808" class="Keyword">open</a> <a id="3813" href="Protocol.Streamlet.Local.Step.html#3379" class="Module">∣LOCAL∣</a> <a id="3821" class="Keyword">public</a> <a id="3828" class="Keyword">using</a> <a id="3834" class="Symbol">()</a> <a id="3837" class="Keyword">renaming</a>
  <a id="3848" class="Symbol">(</a> <a id="3850" href="Protocol.Streamlet.Local.Step.html#3443" class="Function Operator">_—→_</a> <a id="3855" class="Symbol">to</a> <a id="3858" class="Function Operator">_▷_—→_</a><a id="3864" class="Symbol">;</a> <a id="3866" href="Prelude.Closures.html#312" class="Datatype Operator">_—↠_</a> <a id="3871" class="Symbol">to</a> <a id="3874" class="Datatype Operator">_▷_—↠_</a><a id="3880" class="Symbol">;</a> <a id="3882" href="Protocol.Streamlet.Local.Step.html#3640" class="Datatype Operator">_—→⁺_</a> <a id="3888" class="Symbol">to</a> <a id="3891" class="Datatype Operator">_▷_—→⁺_</a>
  <a id="3901" class="Symbol">;</a> <a id="3903" href="Prelude.Closures.html#3400" class="Function">Reachable</a> <a id="3913" class="Symbol">to</a> <a id="3916" class="Function">LocalReachable</a><a id="3930" class="Symbol">;</a> <a id="3932" href="Prelude.Closures.html#3717" class="Function">Invariant</a> <a id="3942" class="Symbol">to</a> <a id="3945" class="Function">LocalInvariant</a>
  <a id="3962" class="Symbol">;</a> <a id="3964" href="Protocol.Streamlet.Local.Step.html#3406" class="Function">StateProperty</a> <a id="3978" class="Symbol">to</a> <a id="3981" class="Function">LocalStateProperty</a>
  <a id="4002" class="Symbol">)</a>
</pre>
</body>
</html>
